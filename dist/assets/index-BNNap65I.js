(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function QS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wp={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function eb(){if(_E)return xu;_E=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:u,ref:r!==void 0?r:null,props:a}}return xu.Fragment=e,xu.jsx=n,xu.jsxs=n,xu}var TE;function tb(){return TE||(TE=1,wp.exports=eb()),wp.exports}var S=tb(),Rp={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function nb(){if(EE)return Ve;EE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,D={};function V(F,ae,he){this.props=F,this.context=ae,this.refs=D,this.updater=he||w}V.prototype.isReactComponent={},V.prototype.setState=function(F,ae){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ae,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function H(){}H.prototype=V.prototype;function z(F,ae,he){this.props=F,this.context=ae,this.refs=D,this.updater=he||w}var G=z.prototype=new H;G.constructor=z,I(G,V.prototype),G.isPureReactComponent=!0;var ee=Array.isArray,ne={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function U(F,ae,he,le,Ae,Fe){return he=Fe.ref,{$$typeof:t,type:F,key:ae,ref:he!==void 0?he:null,props:Fe}}function M(F,ae){return U(F.type,ae,void 0,void 0,void 0,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function P(F){var ae={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ae[he]})}var O=/\/+/g;function q(F,ae){return typeof F=="object"&&F!==null&&F.key!=null?P(""+F.key):ae.toString(36)}function L(){}function Dt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(L,L):(F.status="pending",F.then(function(ae){F.status==="pending"&&(F.status="fulfilled",F.value=ae)},function(ae){F.status==="pending"&&(F.status="rejected",F.reason=ae)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function We(F,ae,he,le,Ae){var Fe=typeof F;(Fe==="undefined"||Fe==="boolean")&&(F=null);var Ne=!1;if(F===null)Ne=!0;else switch(Fe){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(F.$$typeof){case t:case e:Ne=!0;break;case v:return Ne=F._init,We(Ne(F._payload),ae,he,le,Ae)}}if(Ne)return Ae=Ae(F),Ne=le===""?"."+q(F,0):le,ee(Ae)?(he="",Ne!=null&&(he=Ne.replace(O,"$&/")+"/"),We(Ae,ae,he,"",function(pi){return pi})):Ae!=null&&(N(Ae)&&(Ae=M(Ae,he+(Ae.key==null||F&&F.key===Ae.key?"":(""+Ae.key).replace(O,"$&/")+"/")+Ne)),ae.push(Ae)),1;Ne=0;var Kt=le===""?".":le+":";if(ee(F))for(var dt=0;dt<F.length;dt++)le=F[dt],Fe=Kt+q(le,dt),Ne+=We(le,ae,he,Fe,Ae);else if(dt=C(F),typeof dt=="function")for(F=dt.call(F),dt=0;!(le=F.next()).done;)le=le.value,Fe=Kt+q(le,dt++),Ne+=We(le,ae,he,Fe,Ae);else if(Fe==="object"){if(typeof F.then=="function")return We(Dt(F),ae,he,le,Ae);throw ae=String(F),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Z(F,ae,he){if(F==null)return F;var le=[],Ae=0;return We(F,le,"","",function(Fe){return ae.call(he,Fe,Ae++)}),le}function de(F){if(F._status===-1){var ae=F._result;ae=ae(),ae.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ae)}if(F._status===1)return F._result.default;throw F._result}var Ce=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Ze(){}return Ve.Children={map:Z,forEach:function(F,ae,he){Z(F,function(){ae.apply(this,arguments)},he)},count:function(F){var ae=0;return Z(F,function(){ae++}),ae},toArray:function(F){return Z(F,function(ae){return ae})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ve.Component=V,Ve.Fragment=n,Ve.Profiler=r,Ve.PureComponent=z,Ve.StrictMode=i,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ne,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(F){return ne.H.useMemoCache(F)}},Ve.cache=function(F){return function(){return F.apply(null,arguments)}},Ve.cloneElement=function(F,ae,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var le=I({},F.props),Ae=F.key,Fe=void 0;if(ae!=null)for(Ne in ae.ref!==void 0&&(Fe=void 0),ae.key!==void 0&&(Ae=""+ae.key),ae)!fe.call(ae,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ae.ref===void 0||(le[Ne]=ae[Ne]);var Ne=arguments.length-2;if(Ne===1)le.children=he;else if(1<Ne){for(var Kt=Array(Ne),dt=0;dt<Ne;dt++)Kt[dt]=arguments[dt+2];le.children=Kt}return U(F.type,Ae,void 0,void 0,Fe,le)},Ve.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ve.createElement=function(F,ae,he){var le,Ae={},Fe=null;if(ae!=null)for(le in ae.key!==void 0&&(Fe=""+ae.key),ae)fe.call(ae,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ae[le]=ae[le]);var Ne=arguments.length-2;if(Ne===1)Ae.children=he;else if(1<Ne){for(var Kt=Array(Ne),dt=0;dt<Ne;dt++)Kt[dt]=arguments[dt+2];Ae.children=Kt}if(F&&F.defaultProps)for(le in Ne=F.defaultProps,Ne)Ae[le]===void 0&&(Ae[le]=Ne[le]);return U(F,Fe,void 0,void 0,null,Ae)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:h,render:F}},Ve.isValidElement=N,Ve.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:de}},Ve.memo=function(F,ae){return{$$typeof:m,type:F,compare:ae===void 0?null:ae}},Ve.startTransition=function(F){var ae=ne.T,he={};ne.T=he;try{var le=F(),Ae=ne.S;Ae!==null&&Ae(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ze,Ce)}catch(Fe){Ce(Fe)}finally{ne.T=ae}},Ve.unstable_useCacheRefresh=function(){return ne.H.useCacheRefresh()},Ve.use=function(F){return ne.H.use(F)},Ve.useActionState=function(F,ae,he){return ne.H.useActionState(F,ae,he)},Ve.useCallback=function(F,ae){return ne.H.useCallback(F,ae)},Ve.useContext=function(F){return ne.H.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F,ae){return ne.H.useDeferredValue(F,ae)},Ve.useEffect=function(F,ae,he){var le=ne.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(F,ae)},Ve.useId=function(){return ne.H.useId()},Ve.useImperativeHandle=function(F,ae,he){return ne.H.useImperativeHandle(F,ae,he)},Ve.useInsertionEffect=function(F,ae){return ne.H.useInsertionEffect(F,ae)},Ve.useLayoutEffect=function(F,ae){return ne.H.useLayoutEffect(F,ae)},Ve.useMemo=function(F,ae){return ne.H.useMemo(F,ae)},Ve.useOptimistic=function(F,ae){return ne.H.useOptimistic(F,ae)},Ve.useReducer=function(F,ae,he){return ne.H.useReducer(F,ae,he)},Ve.useRef=function(F){return ne.H.useRef(F)},Ve.useState=function(F){return ne.H.useState(F)},Ve.useSyncExternalStore=function(F,ae,he){return ne.H.useSyncExternalStore(F,ae,he)},Ve.useTransition=function(){return ne.H.useTransition()},Ve.version="19.1.0",Ve}var CE;function Jg(){return CE||(CE=1,Rp.exports=nb()),Rp.exports}var Y=Jg();const ib=QS(Y);var Ip={exports:{}},wu={},bp={exports:{}},Np={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function rb(){return SE||(SE=1,function(t){function e(Z,de){var Ce=Z.length;Z.push(de);e:for(;0<Ce;){var Ze=Ce-1>>>1,F=Z[Ze];if(0<r(F,de))Z[Ze]=de,Z[Ce]=F,Ce=Ze;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var de=Z[0],Ce=Z.pop();if(Ce!==de){Z[0]=Ce;e:for(var Ze=0,F=Z.length,ae=F>>>1;Ze<ae;){var he=2*(Ze+1)-1,le=Z[he],Ae=he+1,Fe=Z[Ae];if(0>r(le,Ce))Ae<F&&0>r(Fe,le)?(Z[Ze]=Fe,Z[Ae]=Ce,Ze=Ae):(Z[Ze]=le,Z[he]=Ce,Ze=he);else if(Ae<F&&0>r(Fe,Ce))Z[Ze]=Fe,Z[Ae]=Ce,Ze=Ae;else break e}}return de}function r(Z,de){var Ce=Z.sortIndex-de.sortIndex;return Ce!==0?Ce:Z.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,E=null,C=3,w=!1,I=!1,D=!1,V=!1,H=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ee(Z){for(var de=n(m);de!==null;){if(de.callback===null)i(m);else if(de.startTime<=Z)i(m),de.sortIndex=de.expirationTime,e(p,de);else break;de=n(m)}}function ne(Z){if(D=!1,ee(Z),!I)if(n(p)!==null)I=!0,fe||(fe=!0,q());else{var de=n(m);de!==null&&We(ne,de.startTime-Z)}}var fe=!1,U=-1,M=5,N=-1;function P(){return V?!0:!(t.unstable_now()-N<M)}function O(){if(V=!1,fe){var Z=t.unstable_now();N=Z;var de=!0;try{e:{I=!1,D&&(D=!1,z(U),U=-1),w=!0;var Ce=C;try{t:{for(ee(Z),E=n(p);E!==null&&!(E.expirationTime>Z&&P());){var Ze=E.callback;if(typeof Ze=="function"){E.callback=null,C=E.priorityLevel;var F=Ze(E.expirationTime<=Z);if(Z=t.unstable_now(),typeof F=="function"){E.callback=F,ee(Z),de=!0;break t}E===n(p)&&i(p),ee(Z)}else i(p);E=n(p)}if(E!==null)de=!0;else{var ae=n(m);ae!==null&&We(ne,ae.startTime-Z),de=!1}}break e}finally{E=null,C=Ce,w=!1}de=void 0}}finally{de?q():fe=!1}}}var q;if(typeof G=="function")q=function(){G(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Dt=L.port2;L.port1.onmessage=O,q=function(){Dt.postMessage(null)}}else q=function(){H(O,0)};function We(Z,de){U=H(function(){Z(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(Z){switch(C){case 1:case 2:case 3:var de=3;break;default:de=C}var Ce=C;C=de;try{return Z()}finally{C=Ce}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ce=C;C=Z;try{return de()}finally{C=Ce}},t.unstable_scheduleCallback=function(Z,de,Ce){var Ze=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Ze+Ce:Ze):Ce=Ze,Z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Ce+F,Z={id:v++,callback:de,priorityLevel:Z,startTime:Ce,expirationTime:F,sortIndex:-1},Ce>Ze?(Z.sortIndex=Ce,e(m,Z),n(p)===null&&Z===n(m)&&(D?(z(U),U=-1):D=!0,We(ne,Ce-Ze))):(Z.sortIndex=F,e(p,Z),I||w||(I=!0,fe||(fe=!0,q()))),Z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Z){var de=C;return function(){var Ce=C;C=de;try{return Z.apply(this,arguments)}finally{C=Ce}}}}(Np)),Np}var AE;function sb(){return AE||(AE=1,bp.exports=rb()),bp.exports}var Mp={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function ob(){if(xE)return fn;xE=1;var t=Jg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},fn.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},fn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},fn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},fn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=h(v,m.crossOrigin),C=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:w}):v==="script"&&i.d.X(p,{crossOrigin:E,integrity:C,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},fn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},fn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=h(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},fn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},fn.requestFormReset=function(p){i.d.r(p)},fn.unstable_batchedUpdates=function(p,m){return p(m)},fn.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},fn.useFormStatus=function(){return u.H.useHostTransitionStatus()},fn.version="19.1.0",fn}var wE;function ab(){if(wE)return Mp.exports;wE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mp.exports=ob(),Mp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function lb(){if(RE)return wu;RE=1;var t=sb(),e=Jg(),n=ab();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function p(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,d=o;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),s;if(_===d)return h(y),o;_=_.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=_;else{for(var x=!1,R=y.child;R;){if(R===l){x=!0,l=y,d=_;break}if(R===d){x=!0,d=y,l=_;break}R=R.sibling}if(!x){for(R=_.child;R;){if(R===l){x=!0,l=_,d=y;break}if(R===d){x=!0,d=_,l=y;break}R=R.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function m(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=m(s),o!==null)return o;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function Dt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case V:return"Profiler";case D:return"StrictMode";case ne:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case G:return(s.displayName||"Context")+".Provider";case z:return(s._context.displayName||"Context")+".Consumer";case ee:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case U:return o=s.displayName||null,o!==null?o:Dt(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Dt(s(o))}catch{}}return null}var We=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Ze=[],F=-1;function ae(s){return{current:s}}function he(s){0>F||(s.current=Ze[F],Ze[F]=null,F--)}function le(s,o){F++,Ze[F]=s.current,s.current=o}var Ae=ae(null),Fe=ae(null),Ne=ae(null),Kt=ae(null);function dt(s,o){switch(le(Ne,o),le(Fe,s),le(Ae,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?YT(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=YT(o),s=JT(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}he(Ae),le(Ae,s)}function pi(){he(Ae),he(Fe),he(Ne)}function Mr(s){s.memoizedState!==null&&le(Kt,s);var o=Ae.current,l=JT(o,s.type);o!==l&&(le(Fe,s),le(Ae,l))}function Ki(s){Fe.current===s&&(he(Ae),he(Fe)),Kt.current===s&&(he(Kt),Tu._currentValue=Ce)}var ks=Object.prototype.hasOwnProperty,Vs=t.unstable_scheduleCallback,Ls=t.unstable_cancelCallback,yl=t.unstable_shouldYield,Ac=t.unstable_requestPaint,qn=t.unstable_now,wh=t.unstable_getCurrentPriorityLevel,vl=t.unstable_ImmediatePriority,qo=t.unstable_UserBlockingPriority,Us=t.unstable_NormalPriority,Rh=t.unstable_LowPriority,zo=t.unstable_IdlePriority,_l=t.log,xc=t.unstable_setDisableYieldValue,Et=null,it=null;function In(s){if(typeof _l=="function"&&xc(s),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Et,s)}catch{}}var un=Math.clz32?Math.clz32:Os,wc=Math.log,Ih=Math.LN2;function Os(s){return s>>>=0,s===0?32:31-(wc(s)/Ih|0)|0}var Fs=256,Bs=4194304;function ni(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Go(s,o,l){var d=s.pendingLanes;if(d===0)return 0;var y=0,_=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var R=d&134217727;return R!==0?(d=R&~_,d!==0?y=ni(d):(x&=R,x!==0?y=ni(x):l||(l=R&~s,l!==0&&(y=ni(l))))):(R=d&~_,R!==0?y=ni(R):x!==0?y=ni(x):l||(l=d&~s,l!==0&&(y=ni(l)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:y}function qs(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Tl(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(){var s=Fs;return Fs<<=1,(Fs&4194048)===0&&(Fs=256),s}function Cl(){var s=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),s}function Yi(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function Ji(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Sl(s,o,l,d,y,_){var x=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,Q=s.hiddenUpdates;for(l=x&~l;0<l;){var te=31-un(l),re=1<<te;R[te]=0,k[te]=-1;var W=Q[te];if(W!==null)for(Q[te]=null,te=0;te<W.length;te++){var X=W[te];X!==null&&(X.lane&=-536870913)}l&=~re}d!==0&&gi(s,d,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(x&~o))}function gi(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var d=31-un(o);s.entangledLanes|=o,s.entanglements[d]=s.entanglements[d]|1073741824|l&4194090}function Al(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var d=31-un(l),y=1<<d;y&o|s[d]&o&&(s[d]|=o),l&=~y}}function Dr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ho(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pr(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:hE(s.type))}function Rc(s,o){var l=de.p;try{return de.p=s,o()}finally{de.p=l}}var gt=Math.random().toString(36).slice(2),Bt="__reactFiber$"+gt,Pt="__reactProps$"+gt,zn="__reactContainer$"+gt,xl="__reactEvents$"+gt,bh="__reactListeners$"+gt,kr="__reactHandles$"+gt,Ic="__reactResources$"+gt,zs="__reactMarker$"+gt;function Vr(s){delete s[Bt],delete s[Pt],delete s[xl],delete s[bh],delete s[kr]}function Qi(s){var o=s[Bt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[zn]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=jT(s);s!==null;){if(l=s[Bt])return l;s=jT(s)}return o}s=l,l=s.parentNode}return null}function yi(s){if(s=s[Bt]||s[zn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function vi(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function yn(s){var o=s[Ic];return o||(o=s[Ic]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(s){s[zs]=!0}var wl=new Set,$o={};function ii(s,o){Wi(s,o),Wi(s+"Capture",o)}function Wi(s,o){for($o[s]=o,s=0;s<o.length;s++)wl.add(o[s])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nc={},Gs={};function Mc(s){return ks.call(Gs,s)?!0:ks.call(Nc,s)?!1:bc.test(s)?Gs[s]=!0:(Nc[s]=!0,!1)}function Lr(s,o,l){if(Mc(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function _i(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Zt(s,o,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+d)}}var Hs,Dc;function Xi(s){if(Hs===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Hs=o&&o[1]||"",Dc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+s+Dc}var Ko=!1;function Yo(s,o){if(!s||Ko)return"";Ko=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var W=X}Reflect.construct(s,[],re)}else{try{re.call()}catch(X){W=X}s.call(re.prototype)}}else{try{throw Error()}catch(X){W=X}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&W&&typeof X.stack=="string")return[X.stack,W.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),x=_[0],R=_[1];if(x&&R){var k=x.split(`
`),Q=R.split(`
`);for(y=d=0;d<k.length&&!k[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(d===k.length||y===Q.length)for(d=k.length-1,y=Q.length-1;1<=d&&0<=y&&k[d]!==Q[y];)y--;for(;1<=d&&0<=y;d--,y--)if(k[d]!==Q[y]){if(d!==1||y!==1)do if(d--,y--,0>y||k[d]!==Q[y]){var te=`
`+k[d].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=d&&0<=y);break}}}finally{Ko=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Xi(l):""}function Rl(s){switch(s.tag){case 26:case 27:case 5:return Xi(s.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 15:return Yo(s.type,!1);case 11:return Yo(s.type.render,!1);case 1:return Yo(s.type,!0);case 31:return Xi("Activity");default:return""}}function Jo(s){try{var o="";do o+=Rl(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Il(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nh(s){var o=Il(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(x){d=""+x,_.call(this,x)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Qo(s){s._valueTracker||(s._valueTracker=Nh(s))}function bl(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return s&&(d=Il(s)?s.checked?"true":"false":s.value),s=d,s!==l?(o.setValue(s),!0):!1}function $s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Mh=/[\n"\\]/g;function kt(s){return s.replace(Mh,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bn(s,o,l,d,y,_,x,R){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),o!=null?x==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+vn(o)):s.value!==""+vn(o)&&(s.value=""+vn(o)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),o!=null?Ur(s,x,vn(o)):l!=null?Ur(s,x,vn(l)):d!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+vn(R):s.removeAttribute("name")}function Ks(s,o,l,d,y,_,x,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;l=l!=null?""+vn(l):"",o=o!=null?""+vn(o):l,R||o===s.value||(s.value=o),s.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=R?s.checked:!!d,s.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x)}function Ur(s,o,l){o==="number"&&$s(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ji(s,o,l,d){if(s=s.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=o.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&d&&(s[l].defaultSelected=!0)}else{for(l=""+vn(l),o=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function at(s,o,l){if(o!=null&&(o=""+vn(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+vn(l):""}function Ys(s,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(i(92));if(We(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=vn(o),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d)}function Gn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(s,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":d?s.setProperty(o,l):typeof l!="number"||l===0||Js.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function Nl(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&l[y]!==d&&Pc(s,y,d)}else for(var _ in o)o.hasOwnProperty(_)&&Pc(s,_,o[_])}function Ml(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ph=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(s){return Ph.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Zi=null;function Hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var er=null,tr=null;function Dl(s){var o=yi(s);if(o&&(s=o.stateNode)){var l=s[Pt]||null;e:switch(s=o.stateNode,o.type){case"input":if(bn(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==s&&d.form===s.form){var y=d[Pt]||null;if(!y)throw Error(i(90));bn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===s.form&&bl(d)}break e;case"textarea":at(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&ji(s,!!l.multiple,o,!1)}}}var Ti=!1;function kc(s,o,l){if(Ti)return s(o,l);Ti=!0;try{var d=s(o);return d}finally{if(Ti=!1,(er!==null||tr!==null)&&(If(),er&&(o=er,s=tr,tr=er=null,Dl(o),s)))for(o=0;o<s.length;o++)Dl(s[o])}}function Qs(s,o){var l=s.stateNode;if(l===null)return null;var d=l[Pt]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(ri)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{$n=!1}var Ei=null,Or=null,nr=null;function Pl(){if(nr)return nr;var s,o=Or,l=o.length,d,y="value"in Ei?Ei.value:Ei.textContent,_=y.length;for(s=0;s<l&&o[s]===y[s];s++);var x=l-s;for(d=1;d<=x&&o[l-d]===y[_-d];d++);return nr=y.slice(s,1<d?1-d:void 0)}function Ci(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Si(){return!0}function kl(){return!1}function Yt(s){function o(l,d,y,_,x){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Si:kl,this.isPropagationStopped=kl,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),o}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Yt(tt),Xs=v({},tt,{view:0,detail:0}),Vc=Yt(Xs),jo,Zo,Ai,js=v({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:to,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ai&&(Ai&&s.type==="mousemove"?(jo=s.screenX-Ai.screenX,Zo=s.screenY-Ai.screenY):Zo=jo=0,Ai=s),jo)},movementY:function(s){return"movementY"in s?s.movementY:Zo}}),Kn=Yt(js),Lc=v({},js,{dataTransfer:0}),kh=Yt(Lc),Zs=v({},Xs,{relatedTarget:0}),ea=Yt(Zs),Vl=v({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),ta=Yt(Vl),Uc=v({},tt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),na=Yt(Uc),Vh=v({},tt,{data:0}),Ll=Yt(Vh),eo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ul(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Fc[s])?!!o[s]:!1}function to(){return Ul}var Bc=v({},Xs,{key:function(s){if(s.key){var o=eo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Ci(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Oc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:to,charCode:function(s){return s.type==="keypress"?Ci(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ci(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ia=Yt(Bc),qc=v({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=Yt(qc),ir=v({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:to}),zc=Yt(ir),Gc=v({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hc=Yt(Gc),$c=v({},js,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=Yt($c),_n=v({},tt,{newState:0,oldState:0}),Kc=Yt(_n),Yc=[9,13,27,32],xi=ri&&"CompositionEvent"in window,g=null;ri&&"documentMode"in document&&(g=document.documentMode);var T=ri&&"TextEvent"in window&&!g,A=ri&&(!xi||g&&8<g&&11>=g),b=" ",K=!1;function j(s,o){switch(s){case"keyup":return Yc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ke=!1;function qt(s,o){switch(s){case"compositionend":return ce(o);case"keypress":return o.which!==32?null:(K=!0,b);case"textInput":return s=o.data,s===b&&K?null:s;default:return null}}function Ye(s,o){if(Ke)return s==="compositionend"||!xi&&j(s,o)?(s=Pl(),nr=Or=Ei=null,Ke=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return A&&o.locale!=="ko"?null:o.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zt(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Jt[s.type]:o==="textarea"}function rr(s,o,l,d){er?tr?tr.push(d):tr=[d]:er=d,o=kf(o,"onChange"),0<o.length&&(l=new Xo("onChange","change",null,l,d),s.push({event:l,listeners:o}))}var en=null,wi=null;function Fl(s){zT(s,0)}function Jc(s){var o=vi(s);if(bl(o))return s}function uv(s,o){if(s==="change")return o}var cv=!1;if(ri){var Lh;if(ri){var Uh="oninput"in document;if(!Uh){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),Uh=typeof fv.oninput=="function"}Lh=Uh}else Lh=!1;cv=Lh&&(!document.documentMode||9<document.documentMode)}function dv(){en&&(en.detachEvent("onpropertychange",hv),wi=en=null)}function hv(s){if(s.propertyName==="value"&&Jc(wi)){var o=[];rr(o,wi,s,Hn(s)),kc(Fl,o)}}function NR(s,o,l){s==="focusin"?(dv(),en=o,wi=l,en.attachEvent("onpropertychange",hv)):s==="focusout"&&dv()}function MR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jc(wi)}function DR(s,o){if(s==="click")return Jc(o)}function PR(s,o){if(s==="input"||s==="change")return Jc(o)}function kR(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Nn=typeof Object.is=="function"?Object.is:kR;function Bl(s,o){if(Nn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!ks.call(o,y)||!Nn(s[y],o[y]))return!1}return!0}function mv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function pv(s,o){var l=mv(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=o&&d>=o)return{node:l,offset:o-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=mv(l)}}function gv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?gv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function yv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=$s(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=$s(s.document)}return o}function Oh(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var VR=ri&&"documentMode"in document&&11>=document.documentMode,sa=null,Fh=null,ql=null,Bh=!1;function vv(s,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bh||sa==null||sa!==$s(d)||(d=sa,"selectionStart"in d&&Oh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ql&&Bl(ql,d)||(ql=d,d=kf(Fh,"onSelect"),0<d.length&&(o=new Xo("onSelect","select",null,o,l),s.push({event:o,listeners:d}),o.target=sa)))}function no(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var oa={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},qh={},_v={};ri&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function io(s){if(qh[s])return qh[s];if(!oa[s])return s;var o=oa[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in _v)return qh[s]=o[l];return s}var Tv=io("animationend"),Ev=io("animationiteration"),Cv=io("animationstart"),LR=io("transitionrun"),UR=io("transitionstart"),OR=io("transitioncancel"),Sv=io("transitionend"),Av=new Map,zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zh.push("scrollEnd");function si(s,o){Av.set(s,o),ii(o,[s])}var xv=new WeakMap;function Yn(s,o){if(typeof s=="object"&&s!==null){var l=xv.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Jo(o)},xv.set(s,o),o)}return{value:s,source:o,stack:Jo(o)}}var Jn=[],aa=0,Gh=0;function Qc(){for(var s=aa,o=Gh=aa=0;o<s;){var l=Jn[o];Jn[o++]=null;var d=Jn[o];Jn[o++]=null;var y=Jn[o];Jn[o++]=null;var _=Jn[o];if(Jn[o++]=null,d!==null&&y!==null){var x=d.pending;x===null?y.next=y:(y.next=x.next,x.next=y),d.pending=y}_!==0&&wv(l,y,_)}}function Wc(s,o,l,d){Jn[aa++]=s,Jn[aa++]=o,Jn[aa++]=l,Jn[aa++]=d,Gh|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Hh(s,o,l,d){return Wc(s,o,l,d),Xc(s)}function la(s,o){return Wc(s,null,null,o),Xc(s)}function wv(s,o,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,d=_.alternate,d!==null&&(d.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&o!==null&&(y=31-un(l),s=_.hiddenUpdates,d=s[y],d===null?s[y]=[o]:d.push(o),o.lane=l|536870912),_):null}function Xc(s){if(50<du)throw du=0,Wm=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ua={};function FR(s,o,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(s,o,l,d){return new FR(s,o,l,d)}function $h(s){return s=s.prototype,!(!s||!s.isReactComponent)}function sr(s,o){var l=s.alternate;return l===null?(l=Mn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Rv(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function jc(s,o,l,d,y,_){var x=0;if(d=s,typeof s=="function")$h(s)&&(x=1);else if(typeof s=="string")x=qI(s,l,Ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Mn(31,l,o,y),s.elementType=N,s.lanes=_,s;case I:return ro(l.children,y,_,o);case D:x=8,y|=24;break;case V:return s=Mn(12,l,o,y|2),s.elementType=V,s.lanes=_,s;case ne:return s=Mn(13,l,o,y),s.elementType=ne,s.lanes=_,s;case fe:return s=Mn(19,l,o,y),s.elementType=fe,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:case G:x=10;break e;case z:x=9;break e;case ee:x=11;break e;case U:x=14;break e;case M:x=16,d=null;break e}x=29,l=Error(i(130,s===null?"null":typeof s,"")),d=null}return o=Mn(x,l,o,y),o.elementType=s,o.type=d,o.lanes=_,o}function ro(s,o,l,d){return s=Mn(7,s,d,o),s.lanes=l,s}function Kh(s,o,l){return s=Mn(6,s,null,o),s.lanes=l,s}function Yh(s,o,l){return o=Mn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var ca=[],fa=0,Zc=null,ef=0,Qn=[],Wn=0,so=null,or=1,ar="";function oo(s,o){ca[fa++]=ef,ca[fa++]=Zc,Zc=s,ef=o}function Iv(s,o,l){Qn[Wn++]=or,Qn[Wn++]=ar,Qn[Wn++]=so,so=s;var d=or;s=ar;var y=32-un(d)-1;d&=~(1<<y),l+=1;var _=32-un(o)+y;if(30<_){var x=y-y%5;_=(d&(1<<x)-1).toString(32),d>>=x,y-=x,or=1<<32-un(o)+y|l<<y|d,ar=_+s}else or=1<<_|l<<y|d,ar=s}function Jh(s){s.return!==null&&(oo(s,1),Iv(s,1,0))}function Qh(s){for(;s===Zc;)Zc=ca[--fa],ca[fa]=null,ef=ca[--fa],ca[fa]=null;for(;s===so;)so=Qn[--Wn],Qn[Wn]=null,ar=Qn[--Wn],Qn[Wn]=null,or=Qn[--Wn],Qn[Wn]=null}var Tn=null,Ct=null,et=!1,ao=null,Ri=!1,Wh=Error(i(519));function lo(s){var o=Error(i(418,""));throw Hl(Yn(o,s)),Wh}function bv(s){var o=s.stateNode,l=s.type,d=s.memoizedProps;switch(o[Bt]=s,o[Pt]=d,l){case"dialog":ze("cancel",o),ze("close",o);break;case"iframe":case"object":case"embed":ze("load",o);break;case"video":case"audio":for(l=0;l<mu.length;l++)ze(mu[l],o);break;case"source":ze("error",o);break;case"img":case"image":case"link":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"input":ze("invalid",o),Ks(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Qo(o);break;case"select":ze("invalid",o);break;case"textarea":ze("invalid",o),Ys(o,d.value,d.defaultValue,d.children),Qo(o)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||KT(o.textContent,l)?(d.popover!=null&&(ze("beforetoggle",o),ze("toggle",o)),d.onScroll!=null&&ze("scroll",o),d.onScrollEnd!=null&&ze("scrollend",o),d.onClick!=null&&(o.onclick=Vf),o=!0):o=!1,o||lo(s)}function Nv(s){for(Tn=s.return;Tn;)switch(Tn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:Tn=Tn.return}}function zl(s){if(s!==Tn)return!1;if(!et)return Nv(s),et=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||dp(s.type,s.memoizedProps)),l=!l),l&&Ct&&lo(s),Nv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){Ct=ai(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}Ct=null}}else o===27?(o=Ct,es(s.type)?(s=gp,gp=null,Ct=s):Ct=o):Ct=Tn?ai(s.stateNode.nextSibling):null;return!0}function Gl(){Ct=Tn=null,et=!1}function Mv(){var s=ao;return s!==null&&(xn===null?xn=s:xn.push.apply(xn,s),ao=null),s}function Hl(s){ao===null?ao=[s]:ao.push(s)}var Xh=ae(null),uo=null,lr=null;function Fr(s,o,l){le(Xh,o._currentValue),o._currentValue=l}function ur(s){s._currentValue=Xh.current,he(Xh)}function jh(s,o,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===l)break;s=s.return}}function Zh(s,o,l,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var x=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<o.length;k++)if(R.context===o[k]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),jh(_.return,l,s),d||(x=null);break e}_=R.next}}else if(y.tag===18){if(x=y.return,x===null)throw Error(i(341));x.lanes|=l,_=x.alternate,_!==null&&(_.lanes|=l),jh(x,l,s),x=null}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}}function $l(s,o,l,d){s=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var x=y.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var R=y.type;Nn(y.pendingProps.value,x.value)||(s!==null?s.push(R):s=[R])}}else if(y===Kt.current){if(x=y.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Tu):s=[Tu])}y=y.return}s!==null&&Zh(o,s,l,d),o.flags|=262144}function tf(s){for(s=s.firstContext;s!==null;){if(!Nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function co(s){uo=s,lr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cn(s){return Dv(uo,s)}function nf(s,o){return uo===null&&co(s),Dv(s,o)}function Dv(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},lr===null){if(s===null)throw Error(i(308));lr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else lr=lr.next=o;return l}var BR=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},qR=t.unstable_scheduleCallback,zR=t.unstable_NormalPriority,Gt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function em(){return{controller:new BR,data:new Map,refCount:0}}function Kl(s){s.refCount--,s.refCount===0&&qR(zR,function(){s.controller.abort()})}var Yl=null,tm=0,da=0,ha=null;function GR(s,o){if(Yl===null){var l=Yl=[];tm=0,da=ip(),ha={status:"pending",value:void 0,then:function(d){l.push(d)}}}return tm++,o.then(Pv,Pv),o}function Pv(){if(--tm===0&&Yl!==null){ha!==null&&(ha.status="fulfilled");var s=Yl;Yl=null,da=0,ha=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function HR(s,o){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var kv=Z.S;Z.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&GR(s,o),kv!==null&&kv(s,o)};var fo=ae(null);function nm(){var s=fo.current;return s!==null?s:ht.pooledCache}function rf(s,o){o===null?le(fo,fo.current):le(fo,o.pool)}function Vv(){var s=nm();return s===null?null:{parent:Gt._currentValue,pool:s}}var Jl=Error(i(460)),Lv=Error(i(474)),sf=Error(i(542)),im={then:function(){}};function Uv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function of(){}function Ov(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(of,of),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Bv(s),s;default:if(typeof o.status=="string")o.then(of,of);else{if(s=ht,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Bv(s),s}throw Ql=o,Jl}}var Ql=null;function Fv(){if(Ql===null)throw Error(i(459));var s=Ql;return Ql=null,s}function Bv(s){if(s===Jl||s===sf)throw Error(i(483))}var Br=!1;function rm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function qr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zr(s,o,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(rt&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=Xc(s),wv(s,null,l),o}return Wc(s,d,o,l),Xc(s)}function Wl(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,Al(s,l)}}function om(s,o){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=x:_=_.next=x,l=l.next}while(l!==null);_===null?y=_=o:_=_.next=o}else y=_=o;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var am=!1;function Xl(){if(am){var s=ha;if(s!==null)throw s}}function jl(s,o,l,d){am=!1;var y=s.updateQueue;Br=!1;var _=y.firstBaseUpdate,x=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,Q=k.next;k.next=null,x===null?_=Q:x.next=Q,x=k;var te=s.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==x&&(R===null?te.firstBaseUpdate=Q:R.next=Q,te.lastBaseUpdate=k))}if(_!==null){var re=y.baseState;x=0,te=Q=k=null,R=_;do{var W=R.lane&-536870913,X=W!==R.lane;if(X?(Je&W)===W:(d&W)===W){W!==0&&W===da&&(am=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var be=s,xe=R;W=o;var ct=l;switch(xe.tag){case 1:if(be=xe.payload,typeof be=="function"){re=be.call(ct,re,W);break e}re=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=xe.payload,W=typeof be=="function"?be.call(ct,re,W):be,W==null)break e;re=v({},re,W);break e;case 2:Br=!0}}W=R.callback,W!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[W]:X.push(W))}else X={lane:W,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(Q=te=X,k=re):te=te.next=X,x|=W;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);te===null&&(k=re),y.baseState=k,y.firstBaseUpdate=Q,y.lastBaseUpdate=te,_===null&&(y.shared.lanes=0),Wr|=x,s.lanes=x,s.memoizedState=re}}function qv(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function zv(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)qv(l[s],o)}var ma=ae(null),af=ae(0);function Gv(s,o){s=gr,le(af,s),le(ma,o),gr=s|o.baseLanes}function lm(){le(af,gr),le(ma,ma.current)}function um(){gr=af.current,he(ma),he(af)}var Gr=0,Ue=null,lt=null,Vt=null,lf=!1,pa=!1,ho=!1,uf=0,Zl=0,ga=null,$R=0;function Rt(){throw Error(i(321))}function cm(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Nn(s[l],o[l]))return!1;return!0}function fm(s,o,l,d,y,_){return Gr=_,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=s===null||s.memoizedState===null?w_:R_,ho=!1,_=l(d,y),ho=!1,pa&&(_=$v(o,l,d,y)),Hv(s),_}function Hv(s){Z.H=pf;var o=lt!==null&&lt.next!==null;if(Gr=0,Vt=lt=Ue=null,lf=!1,Zl=0,ga=null,o)throw Error(i(300));s===null||Qt||(s=s.dependencies,s!==null&&tf(s)&&(Qt=!0))}function $v(s,o,l,d){Ue=s;var y=0;do{if(pa&&(ga=null),Zl=0,pa=!1,25<=y)throw Error(i(301));if(y+=1,Vt=lt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Z.H=jR,_=o(l,d)}while(pa);return _}function KR(){var s=Z.H,o=s.useState()[0];return o=typeof o.then=="function"?eu(o):o,s=s.useState()[0],(lt!==null?lt.memoizedState:null)!==s&&(Ue.flags|=1024),o}function dm(){var s=uf!==0;return uf=0,s}function hm(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function mm(s){if(lf){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}lf=!1}Gr=0,Vt=lt=Ue=null,pa=!1,Zl=uf=0,ga=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ue.memoizedState=Vt=s:Vt=Vt.next=s,Vt}function Lt(){if(lt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var o=Vt===null?Ue.memoizedState:Vt.next;if(o!==null)Vt=o,lt=s;else{if(s===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Vt===null?Ue.memoizedState=Vt=s:Vt=Vt.next=s}return Vt}function pm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(s){var o=Zl;return Zl+=1,ga===null&&(ga=[]),s=Ov(ga,s,o),o=Ue,(Vt===null?o.memoizedState:Vt.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?w_:R_),s}function cf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return eu(s);if(s.$$typeof===G)return cn(s)}throw Error(i(438,String(s)))}function gm(s){var o=null,l=Ue.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=Ue.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=pm(),Ue.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),d=0;d<s;d++)l[d]=P;return o.index++,l}function cr(s,o){return typeof o=="function"?o(s):o}function ff(s){var o=Lt();return ym(o,lt,s)}function ym(s,o,l){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=s.baseQueue,_=d.pending;if(_!==null){if(y!==null){var x=y.next;y.next=_.next,_.next=x}o.baseQueue=y=_,d.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{o=y.next;var R=x=null,k=null,Q=o,te=!1;do{var re=Q.lane&-536870913;if(re!==Q.lane?(Je&re)===re:(Gr&re)===re){var W=Q.revertLane;if(W===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),re===da&&(te=!0);else if((Gr&W)===W){Q=Q.next,W===da&&(te=!0);continue}else re={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(R=k=re,x=_):k=k.next=re,Ue.lanes|=W,Wr|=W;re=Q.action,ho&&l(_,re),_=Q.hasEagerState?Q.eagerState:l(_,re)}else W={lane:re,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(R=k=W,x=_):k=k.next=W,Ue.lanes|=re,Wr|=re;Q=Q.next}while(Q!==null&&Q!==o);if(k===null?x=_:k.next=R,!Nn(_,s.memoizedState)&&(Qt=!0,te&&(l=ha,l!==null)))throw l;s.memoizedState=_,s.baseState=x,s.baseQueue=k,d.lastRenderedState=_}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function vm(s){var o=Lt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var d=l.dispatch,y=l.pending,_=o.memoizedState;if(y!==null){l.pending=null;var x=y=y.next;do _=s(_,x.action),x=x.next;while(x!==y);Nn(_,o.memoizedState)||(Qt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,d]}function Kv(s,o,l){var d=Ue,y=Lt(),_=et;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=o();var x=!Nn((lt||y).memoizedState,l);x&&(y.memoizedState=l,Qt=!0),y=y.queue;var R=Qv.bind(null,d,y,s);if(tu(2048,8,R,[s]),y.getSnapshot!==o||x||Vt!==null&&Vt.memoizedState.tag&1){if(d.flags|=2048,ya(9,df(),Jv.bind(null,d,y,l,o),null),ht===null)throw Error(i(349));_||(Gr&124)!==0||Yv(d,o,l)}return l}function Yv(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Ue.updateQueue,o===null?(o=pm(),Ue.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Jv(s,o,l,d){o.value=l,o.getSnapshot=d,Wv(o)&&Xv(s)}function Qv(s,o,l){return l(function(){Wv(o)&&Xv(s)})}function Wv(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Nn(s,l)}catch{return!0}}function Xv(s){var o=la(s,2);o!==null&&Ln(o,s,2)}function _m(s){var o=Sn();if(typeof s=="function"){var l=s;if(s=l(),ho){In(!0);try{l()}finally{In(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:s},o}function jv(s,o,l,d){return s.baseState=l,ym(s,lt,typeof d=="function"?d:cr)}function YR(s,o,l,d,y){if(mf(s))throw Error(i(485));if(s=o.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};Z.T!==null?l(!0):_.isTransition=!1,d(_),l=o.pending,l===null?(_.next=o.pending=_,Zv(o,_)):(_.next=l.next,o.pending=l.next=_)}}function Zv(s,o){var l=o.action,d=o.payload,y=s.state;if(o.isTransition){var _=Z.T,x={};Z.T=x;try{var R=l(y,d),k=Z.S;k!==null&&k(x,R),e_(s,o,R)}catch(Q){Tm(s,o,Q)}finally{Z.T=_}}else try{_=l(y,d),e_(s,o,_)}catch(Q){Tm(s,o,Q)}}function e_(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){t_(s,o,d)},function(d){return Tm(s,o,d)}):t_(s,o,l)}function t_(s,o,l){o.status="fulfilled",o.value=l,n_(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,Zv(s,l)))}function Tm(s,o,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,n_(o),o=o.next;while(o!==d)}s.action=null}function n_(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function i_(s,o){return o}function r_(s,o){if(et){var l=ht.formState;if(l!==null){e:{var d=Ue;if(et){if(Ct){t:{for(var y=Ct,_=Ri;y.nodeType!==8;){if(!_){y=null;break t}if(y=ai(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Ct=ai(y.nextSibling),d=y.data==="F!";break e}}lo(d)}d=!1}d&&(o=l[0])}}return l=Sn(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i_,lastRenderedState:o},l.queue=d,l=S_.bind(null,Ue,d),d.dispatch=l,d=_m(!1),_=xm.bind(null,Ue,!1,d.queue),d=Sn(),y={state:o,dispatch:null,action:s,pending:null},d.queue=y,l=YR.bind(null,Ue,y,_,l),y.dispatch=l,d.memoizedState=s,[o,l,!1]}function s_(s){var o=Lt();return o_(o,lt,s)}function o_(s,o,l){if(o=ym(s,o,i_)[0],s=ff(cr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=eu(o)}catch(x){throw x===Jl?sf:x}else d=o;o=Lt();var y=o.queue,_=y.dispatch;return l!==o.memoizedState&&(Ue.flags|=2048,ya(9,df(),JR.bind(null,y,l),null)),[d,_,s]}function JR(s,o){s.action=o}function a_(s){var o=Lt(),l=lt;if(l!==null)return o_(o,l,s);Lt(),o=o.memoizedState,l=Lt();var d=l.queue.dispatch;return l.memoizedState=s,[o,d,!1]}function ya(s,o,l,d){return s={tag:s,create:l,deps:d,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=pm(),Ue.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,o.lastEffect=s),s}function df(){return{destroy:void 0,resource:void 0}}function l_(){return Lt().memoizedState}function hf(s,o,l,d){var y=Sn();d=d===void 0?null:d,Ue.flags|=s,y.memoizedState=ya(1|o,df(),l,d)}function tu(s,o,l,d){var y=Lt();d=d===void 0?null:d;var _=y.memoizedState.inst;lt!==null&&d!==null&&cm(d,lt.memoizedState.deps)?y.memoizedState=ya(o,_,l,d):(Ue.flags|=s,y.memoizedState=ya(1|o,_,l,d))}function u_(s,o){hf(8390656,8,s,o)}function c_(s,o){tu(2048,8,s,o)}function f_(s,o){return tu(4,2,s,o)}function d_(s,o){return tu(4,4,s,o)}function h_(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function m_(s,o,l){l=l!=null?l.concat([s]):null,tu(4,4,h_.bind(null,o,s),l)}function Em(){}function p_(s,o){var l=Lt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&cm(o,d[1])?d[0]:(l.memoizedState=[s,o],s)}function g_(s,o){var l=Lt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&cm(o,d[1]))return d[0];if(d=s(),ho){In(!0);try{s()}finally{In(!1)}}return l.memoizedState=[d,o],d}function Cm(s,o,l){return l===void 0||(Gr&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=_T(),Ue.lanes|=s,Wr|=s,l)}function y_(s,o,l,d){return Nn(l,o)?l:ma.current!==null?(s=Cm(s,l,d),Nn(s,o)||(Qt=!0),s):(Gr&42)===0?(Qt=!0,s.memoizedState=l):(s=_T(),Ue.lanes|=s,Wr|=s,o)}function v_(s,o,l,d,y){var _=de.p;de.p=_!==0&&8>_?_:8;var x=Z.T,R={};Z.T=R,xm(s,!1,o,l);try{var k=y(),Q=Z.S;if(Q!==null&&Q(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var te=HR(k,d);nu(s,o,te,Vn(s))}else nu(s,o,d,Vn(s))}catch(re){nu(s,o,{then:function(){},status:"rejected",reason:re},Vn())}finally{de.p=_,Z.T=x}}function QR(){}function Sm(s,o,l,d){if(s.tag!==5)throw Error(i(476));var y=__(s).queue;v_(s,y,o,Ce,l===null?QR:function(){return T_(s),l(d)})}function __(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:Ce},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function T_(s){var o=__(s).next.queue;nu(s,o,{},Vn())}function Am(){return cn(Tu)}function E_(){return Lt().memoizedState}function C_(){return Lt().memoizedState}function WR(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Vn();s=qr(l);var d=zr(o,s,l);d!==null&&(Ln(d,o,l),Wl(d,o,l)),o={cache:em()},s.payload=o;return}o=o.return}}function XR(s,o,l){var d=Vn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},mf(s)?A_(o,l):(l=Hh(s,o,l,d),l!==null&&(Ln(l,s,d),x_(l,o,d)))}function S_(s,o,l){var d=Vn();nu(s,o,l,d)}function nu(s,o,l,d){var y={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(mf(s))A_(o,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var x=o.lastRenderedState,R=_(x,l);if(y.hasEagerState=!0,y.eagerState=R,Nn(R,x))return Wc(s,o,y,0),ht===null&&Qc(),!1}catch{}finally{}if(l=Hh(s,o,y,d),l!==null)return Ln(l,s,d),x_(l,o,d),!0}return!1}function xm(s,o,l,d){if(d={lane:2,revertLane:ip(),action:d,hasEagerState:!1,eagerState:null,next:null},mf(s)){if(o)throw Error(i(479))}else o=Hh(s,l,d,2),o!==null&&Ln(o,s,2)}function mf(s){var o=s.alternate;return s===Ue||o!==null&&o===Ue}function A_(s,o){pa=lf=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function x_(s,o,l){if((l&4194048)!==0){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,Al(s,l)}}var pf={readContext:cn,use:cf,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},w_={readContext:cn,use:cf,useCallback:function(s,o){return Sn().memoizedState=[s,o===void 0?null:o],s},useContext:cn,useEffect:u_,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,hf(4194308,4,h_.bind(null,o,s),l)},useLayoutEffect:function(s,o){return hf(4194308,4,s,o)},useInsertionEffect:function(s,o){hf(4,2,s,o)},useMemo:function(s,o){var l=Sn();o=o===void 0?null:o;var d=s();if(ho){In(!0);try{s()}finally{In(!1)}}return l.memoizedState=[d,o],d},useReducer:function(s,o,l){var d=Sn();if(l!==void 0){var y=l(o);if(ho){In(!0);try{l(o)}finally{In(!1)}}}else y=o;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=XR.bind(null,Ue,s),[d.memoizedState,s]},useRef:function(s){var o=Sn();return s={current:s},o.memoizedState=s},useState:function(s){s=_m(s);var o=s.queue,l=S_.bind(null,Ue,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:Em,useDeferredValue:function(s,o){var l=Sn();return Cm(l,s,o)},useTransition:function(){var s=_m(!1);return s=v_.bind(null,Ue,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var d=Ue,y=Sn();if(et){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),ht===null)throw Error(i(349));(Je&124)!==0||Yv(d,o,l)}y.memoizedState=l;var _={value:l,getSnapshot:o};return y.queue=_,u_(Qv.bind(null,d,_,s),[s]),d.flags|=2048,ya(9,df(),Jv.bind(null,d,_,l,o),null),l},useId:function(){var s=Sn(),o=ht.identifierPrefix;if(et){var l=ar,d=or;l=(d&~(1<<32-un(d)-1)).toString(32)+l,o="«"+o+"R"+l,l=uf++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=$R++,o="«"+o+"r"+l.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:Am,useFormState:r_,useActionState:r_,useOptimistic:function(s){var o=Sn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=xm.bind(null,Ue,!0,l),l.dispatch=o,[s,o]},useMemoCache:gm,useCacheRefresh:function(){return Sn().memoizedState=WR.bind(null,Ue)}},R_={readContext:cn,use:cf,useCallback:p_,useContext:cn,useEffect:c_,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:g_,useReducer:ff,useRef:l_,useState:function(){return ff(cr)},useDebugValue:Em,useDeferredValue:function(s,o){var l=Lt();return y_(l,lt.memoizedState,s,o)},useTransition:function(){var s=ff(cr)[0],o=Lt().memoizedState;return[typeof s=="boolean"?s:eu(s),o]},useSyncExternalStore:Kv,useId:E_,useHostTransitionStatus:Am,useFormState:s_,useActionState:s_,useOptimistic:function(s,o){var l=Lt();return jv(l,lt,s,o)},useMemoCache:gm,useCacheRefresh:C_},jR={readContext:cn,use:cf,useCallback:p_,useContext:cn,useEffect:c_,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:g_,useReducer:vm,useRef:l_,useState:function(){return vm(cr)},useDebugValue:Em,useDeferredValue:function(s,o){var l=Lt();return lt===null?Cm(l,s,o):y_(l,lt.memoizedState,s,o)},useTransition:function(){var s=vm(cr)[0],o=Lt().memoizedState;return[typeof s=="boolean"?s:eu(s),o]},useSyncExternalStore:Kv,useId:E_,useHostTransitionStatus:Am,useFormState:a_,useActionState:a_,useOptimistic:function(s,o){var l=Lt();return lt!==null?jv(l,lt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:gm,useCacheRefresh:C_},va=null,iu=0;function gf(s){var o=iu;return iu+=1,va===null&&(va=[]),Ov(va,s,o)}function ru(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function yf(s,o){throw o.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function I_(s){var o=s._init;return o(s._payload)}function b_(s){function o($,B){if(s){var J=$.deletions;J===null?($.deletions=[B],$.flags|=16):J.push(B)}}function l($,B){if(!s)return null;for(;B!==null;)o($,B),B=B.sibling;return null}function d($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function y($,B){return $=sr($,B),$.index=0,$.sibling=null,$}function _($,B,J){return $.index=J,s?(J=$.alternate,J!==null?(J=J.index,J<B?($.flags|=67108866,B):J):($.flags|=67108866,B)):($.flags|=1048576,B)}function x($){return s&&$.alternate===null&&($.flags|=67108866),$}function R($,B,J,ie){return B===null||B.tag!==6?(B=Kh(J,$.mode,ie),B.return=$,B):(B=y(B,J),B.return=$,B)}function k($,B,J,ie){var ye=J.type;return ye===I?te($,B,J.props.children,ie,J.key):B!==null&&(B.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===M&&I_(ye)===B.type)?(B=y(B,J.props),ru(B,J),B.return=$,B):(B=jc(J.type,J.key,J.props,null,$.mode,ie),ru(B,J),B.return=$,B)}function Q($,B,J,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=Yh(J,$.mode,ie),B.return=$,B):(B=y(B,J.children||[]),B.return=$,B)}function te($,B,J,ie,ye){return B===null||B.tag!==7?(B=ro(J,$.mode,ie,ye),B.return=$,B):(B=y(B,J),B.return=$,B)}function re($,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Kh(""+B,$.mode,J),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return J=jc(B.type,B.key,B.props,null,$.mode,J),ru(J,B),J.return=$,J;case w:return B=Yh(B,$.mode,J),B.return=$,B;case M:var ie=B._init;return B=ie(B._payload),re($,B,J)}if(We(B)||q(B))return B=ro(B,$.mode,J,null),B.return=$,B;if(typeof B.then=="function")return re($,gf(B),J);if(B.$$typeof===G)return re($,nf($,B),J);yf($,B)}return null}function W($,B,J,ie){var ye=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ye!==null?null:R($,B,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===ye?k($,B,J,ie):null;case w:return J.key===ye?Q($,B,J,ie):null;case M:return ye=J._init,J=ye(J._payload),W($,B,J,ie)}if(We(J)||q(J))return ye!==null?null:te($,B,J,ie,null);if(typeof J.then=="function")return W($,B,gf(J),ie);if(J.$$typeof===G)return W($,B,nf($,J),ie);yf($,J)}return null}function X($,B,J,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return $=$.get(J)||null,R(B,$,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return $=$.get(ie.key===null?J:ie.key)||null,k(B,$,ie,ye);case w:return $=$.get(ie.key===null?J:ie.key)||null,Q(B,$,ie,ye);case M:var Be=ie._init;return ie=Be(ie._payload),X($,B,J,ie,ye)}if(We(ie)||q(ie))return $=$.get(J)||null,te(B,$,ie,ye,null);if(typeof ie.then=="function")return X($,B,J,gf(ie),ye);if(ie.$$typeof===G)return X($,B,J,nf(B,ie),ye);yf(B,ie)}return null}function be($,B,J,ie){for(var ye=null,Be=null,Te=B,we=B=0,Xt=null;Te!==null&&we<J.length;we++){Te.index>we?(Xt=Te,Te=null):Xt=Te.sibling;var Xe=W($,Te,J[we],ie);if(Xe===null){Te===null&&(Te=Xt);break}s&&Te&&Xe.alternate===null&&o($,Te),B=_(Xe,B,we),Be===null?ye=Xe:Be.sibling=Xe,Be=Xe,Te=Xt}if(we===J.length)return l($,Te),et&&oo($,we),ye;if(Te===null){for(;we<J.length;we++)Te=re($,J[we],ie),Te!==null&&(B=_(Te,B,we),Be===null?ye=Te:Be.sibling=Te,Be=Te);return et&&oo($,we),ye}for(Te=d(Te);we<J.length;we++)Xt=X(Te,$,we,J[we],ie),Xt!==null&&(s&&Xt.alternate!==null&&Te.delete(Xt.key===null?we:Xt.key),B=_(Xt,B,we),Be===null?ye=Xt:Be.sibling=Xt,Be=Xt);return s&&Te.forEach(function(ss){return o($,ss)}),et&&oo($,we),ye}function xe($,B,J,ie){if(J==null)throw Error(i(151));for(var ye=null,Be=null,Te=B,we=B=0,Xt=null,Xe=J.next();Te!==null&&!Xe.done;we++,Xe=J.next()){Te.index>we?(Xt=Te,Te=null):Xt=Te.sibling;var ss=W($,Te,Xe.value,ie);if(ss===null){Te===null&&(Te=Xt);break}s&&Te&&ss.alternate===null&&o($,Te),B=_(ss,B,we),Be===null?ye=ss:Be.sibling=ss,Be=ss,Te=Xt}if(Xe.done)return l($,Te),et&&oo($,we),ye;if(Te===null){for(;!Xe.done;we++,Xe=J.next())Xe=re($,Xe.value,ie),Xe!==null&&(B=_(Xe,B,we),Be===null?ye=Xe:Be.sibling=Xe,Be=Xe);return et&&oo($,we),ye}for(Te=d(Te);!Xe.done;we++,Xe=J.next())Xe=X(Te,$,we,Xe.value,ie),Xe!==null&&(s&&Xe.alternate!==null&&Te.delete(Xe.key===null?we:Xe.key),B=_(Xe,B,we),Be===null?ye=Xe:Be.sibling=Xe,Be=Xe);return s&&Te.forEach(function(ZI){return o($,ZI)}),et&&oo($,we),ye}function ct($,B,J,ie){if(typeof J=="object"&&J!==null&&J.type===I&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var ye=J.key;B!==null;){if(B.key===ye){if(ye=J.type,ye===I){if(B.tag===7){l($,B.sibling),ie=y(B,J.props.children),ie.return=$,$=ie;break e}}else if(B.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===M&&I_(ye)===B.type){l($,B.sibling),ie=y(B,J.props),ru(ie,J),ie.return=$,$=ie;break e}l($,B);break}else o($,B);B=B.sibling}J.type===I?(ie=ro(J.props.children,$.mode,ie,J.key),ie.return=$,$=ie):(ie=jc(J.type,J.key,J.props,null,$.mode,ie),ru(ie,J),ie.return=$,$=ie)}return x($);case w:e:{for(ye=J.key;B!==null;){if(B.key===ye)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){l($,B.sibling),ie=y(B,J.children||[]),ie.return=$,$=ie;break e}else{l($,B);break}else o($,B);B=B.sibling}ie=Yh(J,$.mode,ie),ie.return=$,$=ie}return x($);case M:return ye=J._init,J=ye(J._payload),ct($,B,J,ie)}if(We(J))return be($,B,J,ie);if(q(J)){if(ye=q(J),typeof ye!="function")throw Error(i(150));return J=ye.call(J),xe($,B,J,ie)}if(typeof J.then=="function")return ct($,B,gf(J),ie);if(J.$$typeof===G)return ct($,B,nf($,J),ie);yf($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(l($,B.sibling),ie=y(B,J),ie.return=$,$=ie):(l($,B),ie=Kh(J,$.mode,ie),ie.return=$,$=ie),x($)):l($,B)}return function($,B,J,ie){try{iu=0;var ye=ct($,B,J,ie);return va=null,ye}catch(Te){if(Te===Jl||Te===sf)throw Te;var Be=Mn(29,Te,null,$.mode);return Be.lanes=ie,Be.return=$,Be}finally{}}}var _a=b_(!0),N_=b_(!1),Xn=ae(null),Ii=null;function Hr(s){var o=s.alternate;le(Ht,Ht.current&1),le(Xn,s),Ii===null&&(o===null||ma.current!==null||o.memoizedState!==null)&&(Ii=s)}function M_(s){if(s.tag===22){if(le(Ht,Ht.current),le(Xn,s),Ii===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Ii=s)}}else $r()}function $r(){le(Ht,Ht.current),le(Xn,Xn.current)}function fr(s){he(Xn),Ii===s&&(Ii=null),he(Ht)}var Ht=ae(0);function vf(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||pp(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function wm(s,o,l,d){o=s.memoizedState,l=l(d,o),l=l==null?o:v({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Rm={enqueueSetState:function(s,o,l){s=s._reactInternals;var d=Vn(),y=qr(d);y.payload=o,l!=null&&(y.callback=l),o=zr(s,y,d),o!==null&&(Ln(o,s,d),Wl(o,s,d))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var d=Vn(),y=qr(d);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=zr(s,y,d),o!==null&&(Ln(o,s,d),Wl(o,s,d))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Vn(),d=qr(l);d.tag=2,o!=null&&(d.callback=o),o=zr(s,d,l),o!==null&&(Ln(o,s,l),Wl(o,s,l))}};function D_(s,o,l,d,y,_,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,x):o.prototype&&o.prototype.isPureReactComponent?!Bl(l,d)||!Bl(y,_):!0}function P_(s,o,l,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==s&&Rm.enqueueReplaceState(o,o.state,null)}function mo(s,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(s=s.defaultProps){l===o&&(l=v({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}var _f=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function k_(s){_f(s)}function V_(s){console.error(s)}function L_(s){_f(s)}function Tf(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function U_(s,o,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Im(s,o,l){return l=qr(l),l.tag=3,l.payload={element:null},l.callback=function(){Tf(s,o)},l}function O_(s){return s=qr(s),s.tag=3,s}function F_(s,o,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;s.payload=function(){return y(_)},s.callback=function(){U_(o,l,d)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){U_(o,l,d),typeof y!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function ZR(s,o,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&$l(o,l,y,!0),l=Xn.current,l!==null){switch(l.tag){case 13:return Ii===null?jm():l.alternate===null&&St===0&&(St=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===im?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),ep(s,d,y)),!1;case 22:return l.flags|=65536,d===im?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),ep(s,d,y)),!1}throw Error(i(435,l.tag))}return ep(s,d,y),jm(),!1}if(et)return o=Xn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==Wh&&(s=Error(i(422),{cause:d}),Hl(Yn(s,l)))):(d!==Wh&&(o=Error(i(423),{cause:d}),Hl(Yn(o,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=Yn(d,l),y=Im(s.stateNode,d,y),om(s,y),St!==4&&(St=2)),!1;var _=Error(i(520),{cause:d});if(_=Yn(_,l),fu===null?fu=[_]:fu.push(_),St!==4&&(St=2),o===null)return!0;d=Yn(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Im(l.stateNode,d,s),om(l,s),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xr===null||!Xr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=O_(y),F_(y,s,l,d),om(l,y),!1}l=l.return}while(l!==null);return!1}var B_=Error(i(461)),Qt=!1;function tn(s,o,l,d){o.child=s===null?N_(o,null,l,d):_a(o,s.child,l,d)}function q_(s,o,l,d,y){l=l.render;var _=o.ref;if("ref"in d){var x={};for(var R in d)R!=="ref"&&(x[R]=d[R])}else x=d;return co(o),d=fm(s,o,l,x,_,y),R=dm(),s!==null&&!Qt?(hm(s,o,y),dr(s,o,y)):(et&&R&&Jh(o),o.flags|=1,tn(s,o,d,y),o.child)}function z_(s,o,l,d,y){if(s===null){var _=l.type;return typeof _=="function"&&!$h(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,G_(s,o,_,d,y)):(s=jc(l.type,null,d,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!Lm(s,y)){var x=_.memoizedProps;if(l=l.compare,l=l!==null?l:Bl,l(x,d)&&s.ref===o.ref)return dr(s,o,y)}return o.flags|=1,s=sr(_,d),s.ref=o.ref,s.return=o,o.child=s}function G_(s,o,l,d,y){if(s!==null){var _=s.memoizedProps;if(Bl(_,d)&&s.ref===o.ref)if(Qt=!1,o.pendingProps=d=_,Lm(s,y))(s.flags&131072)!==0&&(Qt=!0);else return o.lanes=s.lanes,dr(s,o,y)}return bm(s,o,l,d,y)}function H_(s,o,l){var d=o.pendingProps,y=d.children,_=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=_!==null?_.baseLanes|l:l,s!==null){for(y=o.child=s.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;o.childLanes=_&~d}else o.childLanes=0,o.child=null;return $_(s,o,d,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&rf(o,_!==null?_.cachePool:null),_!==null?Gv(o,_):lm(),M_(o);else return o.lanes=o.childLanes=536870912,$_(s,o,_!==null?_.baseLanes|l:l,l)}else _!==null?(rf(o,_.cachePool),Gv(o,_),$r(),o.memoizedState=null):(s!==null&&rf(o,null),lm(),$r());return tn(s,o,y,l),o.child}function $_(s,o,l,d){var y=nm();return y=y===null?null:{parent:Gt._currentValue,pool:y},o.memoizedState={baseLanes:l,cachePool:y},s!==null&&rf(o,null),lm(),M_(o),s!==null&&$l(s,o,d,!0),null}function Ef(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function bm(s,o,l,d,y){return co(o),l=fm(s,o,l,d,void 0,y),d=dm(),s!==null&&!Qt?(hm(s,o,y),dr(s,o,y)):(et&&d&&Jh(o),o.flags|=1,tn(s,o,l,y),o.child)}function K_(s,o,l,d,y,_){return co(o),o.updateQueue=null,l=$v(o,d,l,y),Hv(s),d=dm(),s!==null&&!Qt?(hm(s,o,_),dr(s,o,_)):(et&&d&&Jh(o),o.flags|=1,tn(s,o,l,_),o.child)}function Y_(s,o,l,d,y){if(co(o),o.stateNode===null){var _=ua,x=l.contextType;typeof x=="object"&&x!==null&&(_=cn(x)),_=new l(d,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Rm,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=d,_.state=o.memoizedState,_.refs={},rm(o),x=l.contextType,_.context=typeof x=="object"&&x!==null?cn(x):ua,_.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(wm(o,l,x,d),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&Rm.enqueueReplaceState(_,_.state,null),jl(o,d,_,y),Xl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(s===null){_=o.stateNode;var R=o.memoizedProps,k=mo(l,R);_.props=k;var Q=_.context,te=l.contextType;x=ua,typeof te=="object"&&te!==null&&(x=cn(te));var re=l.getDerivedStateFromProps;te=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||Q!==x)&&P_(o,_,d,x),Br=!1;var W=o.memoizedState;_.state=W,jl(o,d,_,y),Xl(),Q=o.memoizedState,R||W!==Q||Br?(typeof re=="function"&&(wm(o,l,re,d),Q=o.memoizedState),(k=Br||D_(o,l,k,d,W,Q,x))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Q),_.props=d,_.state=Q,_.context=x,d=k):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{_=o.stateNode,sm(s,o),x=o.memoizedProps,te=mo(l,x),_.props=te,re=o.pendingProps,W=_.context,Q=l.contextType,k=ua,typeof Q=="object"&&Q!==null&&(k=cn(Q)),R=l.getDerivedStateFromProps,(Q=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==re||W!==k)&&P_(o,_,d,k),Br=!1,W=o.memoizedState,_.state=W,jl(o,d,_,y),Xl();var X=o.memoizedState;x!==re||W!==X||Br||s!==null&&s.dependencies!==null&&tf(s.dependencies)?(typeof R=="function"&&(wm(o,l,R,d),X=o.memoizedState),(te=Br||D_(o,l,te,d,W,X,k)||s!==null&&s.dependencies!==null&&tf(s.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,X,k)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===s.memoizedProps&&W===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&W===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=X),_.props=d,_.state=X,_.context=k,d=te):(typeof _.componentDidUpdate!="function"||x===s.memoizedProps&&W===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&W===s.memoizedState||(o.flags|=1024),d=!1)}return _=d,Ef(s,o),d=(o.flags&128)!==0,_||d?(_=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&d?(o.child=_a(o,s.child,null,y),o.child=_a(o,null,l,y)):tn(s,o,l,y),o.memoizedState=_.state,s=o.child):s=dr(s,o,y),s}function J_(s,o,l,d){return Gl(),o.flags|=256,tn(s,o,l,d),o.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mm(s){return{baseLanes:s,cachePool:Vv()}}function Dm(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=jn),s}function Q_(s,o,l){var d=o.pendingProps,y=!1,_=(o.flags&128)!==0,x;if((x=_)||(x=s!==null&&s.memoizedState===null?!1:(Ht.current&2)!==0),x&&(y=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,s===null){if(et){if(y?Hr(o):$r(),et){var R=Ct,k;if(k=R){e:{for(k=R,R=Ri;k.nodeType!==8;){if(!R){R=null;break e}if(k=ai(k.nextSibling),k===null){R=null;break e}}R=k}R!==null?(o.memoizedState={dehydrated:R,treeContext:so!==null?{id:or,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},k=Mn(18,null,null,0),k.stateNode=R,k.return=o,o.child=k,Tn=o,Ct=null,k=!0):k=!1}k||lo(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return pp(R)?o.lanes=32:o.lanes=536870912,null;fr(o)}return R=d.children,d=d.fallback,y?($r(),y=o.mode,R=Cf({mode:"hidden",children:R},y),d=ro(d,y,l,null),R.return=o,d.return=o,R.sibling=d,o.child=R,y=o.child,y.memoizedState=Mm(l),y.childLanes=Dm(s,x,l),o.memoizedState=Nm,d):(Hr(o),Pm(o,R))}if(k=s.memoizedState,k!==null&&(R=k.dehydrated,R!==null)){if(_)o.flags&256?(Hr(o),o.flags&=-257,o=km(s,o,l)):o.memoizedState!==null?($r(),o.child=s.child,o.flags|=128,o=null):($r(),y=d.fallback,R=o.mode,d=Cf({mode:"visible",children:d.children},R),y=ro(y,R,l,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,_a(o,s.child,null,l),d=o.child,d.memoizedState=Mm(l),d.childLanes=Dm(s,x,l),o.memoizedState=Nm,o=y);else if(Hr(o),pp(R)){if(x=R.nextSibling&&R.nextSibling.dataset,x)var Q=x.dgst;x=Q,d=Error(i(419)),d.stack="",d.digest=x,Hl({value:d,source:null,stack:null}),o=km(s,o,l)}else if(Qt||$l(s,o,l,!1),x=(l&s.childLanes)!==0,Qt||x){if(x=ht,x!==null&&(d=l&-l,d=(d&42)!==0?1:Dr(d),d=(d&(x.suspendedLanes|l))!==0?0:d,d!==0&&d!==k.retryLane))throw k.retryLane=d,la(s,d),Ln(x,s,d),B_;R.data==="$?"||jm(),o=km(s,o,l)}else R.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=k.treeContext,Ct=ai(R.nextSibling),Tn=o,et=!0,ao=null,Ri=!1,s!==null&&(Qn[Wn++]=or,Qn[Wn++]=ar,Qn[Wn++]=so,or=s.id,ar=s.overflow,so=o),o=Pm(o,d.children),o.flags|=4096);return o}return y?($r(),y=d.fallback,R=o.mode,k=s.child,Q=k.sibling,d=sr(k,{mode:"hidden",children:d.children}),d.subtreeFlags=k.subtreeFlags&65011712,Q!==null?y=sr(Q,y):(y=ro(y,R,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,R=s.child.memoizedState,R===null?R=Mm(l):(k=R.cachePool,k!==null?(Q=Gt._currentValue,k=k.parent!==Q?{parent:Q,pool:Q}:k):k=Vv(),R={baseLanes:R.baseLanes|l,cachePool:k}),y.memoizedState=R,y.childLanes=Dm(s,x,l),o.memoizedState=Nm,d):(Hr(o),l=s.child,s=l.sibling,l=sr(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,s!==null&&(x=o.deletions,x===null?(o.deletions=[s],o.flags|=16):x.push(s)),o.child=l,o.memoizedState=null,l)}function Pm(s,o){return o=Cf({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Cf(s,o){return s=Mn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function km(s,o,l){return _a(o,s.child,null,l),s=Pm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function W_(s,o,l){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),jh(s.return,o,l)}function Vm(s,o,l,d,y){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=y)}function X_(s,o,l){var d=o.pendingProps,y=d.revealOrder,_=d.tail;if(tn(s,o,d.children,l),d=Ht.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&W_(s,l,o);else if(s.tag===19)W_(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(le(Ht,d),y){case"forwards":for(l=o.child,y=null;l!==null;)s=l.alternate,s!==null&&vf(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Vm(o,!1,y,l,_);break;case"backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&vf(s)===null){o.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Vm(o,!0,l,null,_);break;case"together":Vm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function dr(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Wr|=o.lanes,(l&o.childLanes)===0)if(s!==null){if($l(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=sr(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=sr(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Lm(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&tf(s)))}function eI(s,o,l){switch(o.tag){case 3:dt(o,o.stateNode.containerInfo),Fr(o,Gt,s.memoizedState.cache),Gl();break;case 27:case 5:Mr(o);break;case 4:dt(o,o.stateNode.containerInfo);break;case 10:Fr(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Hr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Q_(s,o,l):(Hr(o),s=dr(s,o,l),s!==null?s.sibling:null);Hr(o);break;case 19:var y=(s.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||($l(s,o,l,!1),d=(l&o.childLanes)!==0),y){if(d)return X_(s,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Ht,Ht.current),d)break;return null;case 22:case 23:return o.lanes=0,H_(s,o,l);case 24:Fr(o,Gt,s.memoizedState.cache)}return dr(s,o,l)}function j_(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)Qt=!0;else{if(!Lm(s,l)&&(o.flags&128)===0)return Qt=!1,eI(s,o,l);Qt=(s.flags&131072)!==0}else Qt=!1,et&&(o.flags&1048576)!==0&&Iv(o,ef,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")$h(d)?(s=mo(d,s),o.tag=1,o=Y_(null,o,d,s,l)):(o.tag=0,o=bm(null,o,d,s,l));else{if(d!=null){if(y=d.$$typeof,y===ee){o.tag=11,o=q_(null,o,d,s,l);break e}else if(y===U){o.tag=14,o=z_(null,o,d,s,l);break e}}throw o=Dt(d)||d,Error(i(306,o,""))}}return o;case 0:return bm(s,o,o.type,o.pendingProps,l);case 1:return d=o.type,y=mo(d,o.pendingProps),Y_(s,o,d,y,l);case 3:e:{if(dt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));d=o.pendingProps;var _=o.memoizedState;y=_.element,sm(s,o),jl(o,d,null,l);var x=o.memoizedState;if(d=x.cache,Fr(o,Gt,d),d!==_.cache&&Zh(o,[Gt],l,!0),Xl(),d=x.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=J_(s,o,d,l);break e}else if(d!==y){y=Yn(Error(i(424)),o),Hl(y),o=J_(s,o,d,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ct=ai(s.firstChild),Tn=o,et=!0,ao=null,Ri=!0,l=N_(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Gl(),d===y){o=dr(s,o,l);break e}tn(s,o,d,l)}o=o.child}return o;case 26:return Ef(s,o),s===null?(l=nE(o.type,null,o.pendingProps,null))?o.memoizedState=l:et||(l=o.type,s=o.pendingProps,d=Lf(Ne.current).createElement(l),d[Bt]=o,d[Pt]=s,rn(d,l,s),wt(d),o.stateNode=d):o.memoizedState=nE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Mr(o),s===null&&et&&(d=o.stateNode=ZT(o.type,o.pendingProps,Ne.current),Tn=o,Ri=!0,y=Ct,es(o.type)?(gp=y,Ct=ai(d.firstChild)):Ct=y),tn(s,o,o.pendingProps.children,l),Ef(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&et&&((y=d=Ct)&&(d=II(d,o.type,o.pendingProps,Ri),d!==null?(o.stateNode=d,Tn=o,Ct=ai(d.firstChild),Ri=!1,y=!0):y=!1),y||lo(o)),Mr(o),y=o.type,_=o.pendingProps,x=s!==null?s.memoizedProps:null,d=_.children,dp(y,_)?d=null:x!==null&&dp(y,x)&&(o.flags|=32),o.memoizedState!==null&&(y=fm(s,o,KR,null,null,l),Tu._currentValue=y),Ef(s,o),tn(s,o,d,l),o.child;case 6:return s===null&&et&&((s=l=Ct)&&(l=bI(l,o.pendingProps,Ri),l!==null?(o.stateNode=l,Tn=o,Ct=null,s=!0):s=!1),s||lo(o)),null;case 13:return Q_(s,o,l);case 4:return dt(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=_a(o,null,d,l):tn(s,o,d,l),o.child;case 11:return q_(s,o,o.type,o.pendingProps,l);case 7:return tn(s,o,o.pendingProps,l),o.child;case 8:return tn(s,o,o.pendingProps.children,l),o.child;case 12:return tn(s,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,Fr(o,o.type,d.value),tn(s,o,d.children,l),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,co(o),y=cn(y),d=d(y),o.flags|=1,tn(s,o,d,l),o.child;case 14:return z_(s,o,o.type,o.pendingProps,l);case 15:return G_(s,o,o.type,o.pendingProps,l);case 19:return X_(s,o,l);case 31:return d=o.pendingProps,l=o.mode,d={mode:d.mode,children:d.children},s===null?(l=Cf(d,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=sr(s.child,d),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return H_(s,o,l);case 24:return co(o),d=cn(Gt),s===null?(y=nm(),y===null&&(y=ht,_=em(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),o.memoizedState={parent:d,cache:y},rm(o),Fr(o,Gt,y)):((s.lanes&l)!==0&&(sm(s,o),jl(o,null,null,l),Xl()),y=s.memoizedState,_=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Fr(o,Gt,d)):(d=_.cache,Fr(o,Gt,d),d!==y.cache&&Zh(o,[Gt],l,!0))),tn(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function hr(s){s.flags|=4}function Z_(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!aE(o)){if(o=Xn.current,o!==null&&((Je&4194048)===Je?Ii!==null:(Je&62914560)!==Je&&(Je&536870912)===0||o!==Ii))throw Ql=im,Lv;s.flags|=8192}}function Sf(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Cl():536870912,s.lanes|=o,Sa|=o)}function su(s,o){if(!et)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function _t(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(o)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=l,o}function tI(s,o,l){var d=o.pendingProps;switch(Qh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return l=o.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ur(Gt),pi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(zl(o)?hr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mv())),_t(o),null;case 26:return l=o.memoizedState,s===null?(hr(o),l!==null?(_t(o),Z_(o,l)):(_t(o),o.flags&=-16777217)):l?l!==s.memoizedState?(hr(o),_t(o),Z_(o,l)):(_t(o),o.flags&=-16777217):(s.memoizedProps!==d&&hr(o),_t(o),o.flags&=-16777217),null;case 27:Ki(o),l=Ne.current;var y=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==d&&hr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return _t(o),null}s=Ae.current,zl(o)?bv(o):(s=ZT(y,d,l),o.stateNode=s,hr(o))}return _t(o),null;case 5:if(Ki(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==d&&hr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return _t(o),null}if(s=Ae.current,zl(o))bv(o);else{switch(y=Lf(Ne.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?y.createElement(l,{is:d.is}):y.createElement(l)}}s[Bt]=o,s[Pt]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=s;e:switch(rn(s,l,d),l){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&hr(o)}}return _t(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==d&&hr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(s=Ne.current,zl(o)){if(s=o.stateNode,l=o.memoizedProps,d=null,y=Tn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[Bt]=o,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||KT(s.nodeValue,l)),s||lo(o)}else s=Lf(s).createTextNode(d),s[Bt]=o,o.stateNode=s}return _t(o),null;case 13:if(d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=zl(o),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Bt]=o}else Gl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),y=!1}else y=Mv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(fr(o),o):(fr(o),null)}if(fr(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=d!==null,s=s!==null&&s.memoizedState!==null,l){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),Sf(o,o.updateQueue),_t(o),null;case 4:return pi(),s===null&&ap(o.stateNode.containerInfo),_t(o),null;case 10:return ur(o.type),_t(o),null;case 19:if(he(Ht),y=o.memoizedState,y===null)return _t(o),null;if(d=(o.flags&128)!==0,_=y.rendering,_===null)if(d)su(y,!1);else{if(St!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=vf(s),_!==null){for(o.flags|=128,su(y,!1),s=_.updateQueue,o.updateQueue=s,Sf(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)Rv(l,s),l=l.sibling;return le(Ht,Ht.current&1|2),o.child}s=s.sibling}y.tail!==null&&qn()>wf&&(o.flags|=128,d=!0,su(y,!1),o.lanes=4194304)}else{if(!d)if(s=vf(_),s!==null){if(o.flags|=128,d=!0,s=s.updateQueue,o.updateQueue=s,Sf(o,s),su(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!et)return _t(o),null}else 2*qn()-y.renderingStartTime>wf&&l!==536870912&&(o.flags|=128,d=!0,su(y,!1),o.lanes=4194304);y.isBackwards?(_.sibling=o.child,o.child=_):(s=y.last,s!==null?s.sibling=_:o.child=_,y.last=_)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=qn(),o.sibling=null,s=Ht.current,le(Ht,d?s&1|2:s&1),o):(_t(o),null);case 22:case 23:return fr(o),um(),d=o.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),l=o.updateQueue,l!==null&&Sf(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),s!==null&&he(fo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ur(Gt),_t(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function nI(s,o){switch(Qh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ur(Gt),pi(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ki(o),null;case 13:if(fr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Gl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return he(Ht),null;case 4:return pi(),null;case 10:return ur(o.type),null;case 22:case 23:return fr(o),um(),s!==null&&he(fo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ur(Gt),null;case 25:return null;default:return null}}function eT(s,o){switch(Qh(o),o.tag){case 3:ur(Gt),pi();break;case 26:case 27:case 5:Ki(o);break;case 4:pi();break;case 13:fr(o);break;case 19:he(Ht);break;case 10:ur(o.type);break;case 22:case 23:fr(o),um(),s!==null&&he(fo);break;case 24:ur(Gt)}}function ou(s,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&s)===s){d=void 0;var _=l.create,x=l.inst;d=_(),x.destroy=d}l=l.next}while(l!==y)}}catch(R){ft(o,o.return,R)}}function Kr(s,o,l){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&s)===s){var x=d.inst,R=x.destroy;if(R!==void 0){x.destroy=void 0,y=o;var k=l,Q=R;try{Q()}catch(te){ft(y,k,te)}}}d=d.next}while(d!==_)}}catch(te){ft(o,o.return,te)}}function tT(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{zv(o,l)}catch(d){ft(s,s.return,d)}}}function nT(s,o,l){l.props=mo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){ft(s,o,d)}}function au(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(y){ft(s,o,y)}}function bi(s,o){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){ft(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ft(s,o,y)}else l.current=null}function iT(s){var o=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){ft(s,s.return,y)}}function Um(s,o,l){try{var d=s.stateNode;SI(d,s.type,l,o),d[Pt]=o}catch(y){ft(s,s.return,y)}}function rT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&es(s.type)||s.tag===4}function Om(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&es(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fm(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Vf));else if(d!==4&&(d===27&&es(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Fm(s,o,l),s=s.sibling;s!==null;)Fm(s,o,l),s=s.sibling}function Af(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(d!==4&&(d===27&&es(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Af(s,o,l),s=s.sibling;s!==null;)Af(s,o,l),s=s.sibling}function sT(s){var o=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);rn(o,d,l),o[Bt]=s,o[Pt]=l}catch(_){ft(s,s.return,_)}}var mr=!1,It=!1,Bm=!1,oT=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function iI(s,o){if(s=s.containerInfo,cp=zf,s=yv(s),Oh(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var x=0,R=-1,k=-1,Q=0,te=0,re=s,W=null;t:for(;;){for(var X;re!==l||y!==0&&re.nodeType!==3||(R=x+y),re!==_||d!==0&&re.nodeType!==3||(k=x+d),re.nodeType===3&&(x+=re.nodeValue.length),(X=re.firstChild)!==null;)W=re,re=X;for(;;){if(re===s)break t;if(W===l&&++Q===y&&(R=x),W===_&&++te===d&&(k=x),(X=re.nextSibling)!==null)break;re=W,W=re.parentNode}re=X}l=R===-1||k===-1?null:{start:R,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(fp={focusedElem:s,selectionRange:l},zf=!1,Wt=o;Wt!==null;)if(o=Wt,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Wt=s;else for(;Wt!==null;){switch(o=Wt,_=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=o,y=_.memoizedProps,_=_.memoizedState,d=l.stateNode;try{var be=mo(l.type,y,l.elementType===l.type);s=d.getSnapshotBeforeUpdate(be,_),d.__reactInternalSnapshotBeforeUpdate=s}catch(xe){ft(l,l.return,xe)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)mp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Wt=s;break}Wt=o.return}}function aT(s,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Yr(s,l),d&4&&ou(5,l);break;case 1:if(Yr(s,l),d&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(x){ft(l,l.return,x)}else{var y=mo(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(x){ft(l,l.return,x)}}d&64&&tT(l),d&512&&au(l,l.return);break;case 3:if(Yr(s,l),d&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{zv(s,o)}catch(x){ft(l,l.return,x)}}break;case 27:o===null&&d&4&&sT(l);case 26:case 5:Yr(s,l),o===null&&d&4&&iT(l),d&512&&au(l,l.return);break;case 12:Yr(s,l);break;case 13:Yr(s,l),d&4&&cT(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=dI.bind(null,l),NI(s,l))));break;case 22:if(d=l.memoizedState!==null||mr,!d){o=o!==null&&o.memoizedState!==null||It,y=mr;var _=It;mr=d,(It=o)&&!_?Jr(s,l,(l.subtreeFlags&8772)!==0):Yr(s,l),mr=y,It=_}break;case 30:break;default:Yr(s,l)}}function lT(s){var o=s.alternate;o!==null&&(s.alternate=null,lT(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Vr(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var yt=null,An=!1;function pr(s,o,l){for(l=l.child;l!==null;)uT(s,o,l),l=l.sibling}function uT(s,o,l){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Et,l)}catch{}switch(l.tag){case 26:It||bi(l,o),pr(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:It||bi(l,o);var d=yt,y=An;es(l.type)&&(yt=l.stateNode,An=!1),pr(s,o,l),gu(l.stateNode),yt=d,An=y;break;case 5:It||bi(l,o);case 6:if(d=yt,y=An,yt=null,pr(s,o,l),yt=d,An=y,yt!==null)if(An)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(l.stateNode)}catch(_){ft(l,o,_)}else try{yt.removeChild(l.stateNode)}catch(_){ft(l,o,_)}break;case 18:yt!==null&&(An?(s=yt,XT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Au(s)):XT(yt,l.stateNode));break;case 4:d=yt,y=An,yt=l.stateNode.containerInfo,An=!0,pr(s,o,l),yt=d,An=y;break;case 0:case 11:case 14:case 15:It||Kr(2,l,o),It||Kr(4,l,o),pr(s,o,l);break;case 1:It||(bi(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&nT(l,o,d)),pr(s,o,l);break;case 21:pr(s,o,l);break;case 22:It=(d=It)||l.memoizedState!==null,pr(s,o,l),It=d;break;default:pr(s,o,l)}}function cT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Au(s)}catch(l){ft(o,o.return,l)}}function rI(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new oT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new oT),o;default:throw Error(i(435,s.tag))}}function qm(s,o){var l=rI(s);o.forEach(function(d){var y=hI.bind(null,s,d);l.has(d)||(l.add(d),d.then(y,y))})}function Dn(s,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],_=s,x=o,R=x;e:for(;R!==null;){switch(R.tag){case 27:if(es(R.type)){yt=R.stateNode,An=!1;break e}break;case 5:yt=R.stateNode,An=!1;break e;case 3:case 4:yt=R.stateNode.containerInfo,An=!0;break e}R=R.return}if(yt===null)throw Error(i(160));uT(_,x,y),yt=null,An=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)fT(o,s),o=o.sibling}var oi=null;function fT(s,o){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dn(o,s),Pn(s),d&4&&(Kr(3,s,s.return),ou(3,s),Kr(5,s,s.return));break;case 1:Dn(o,s),Pn(s),d&512&&(It||l===null||bi(l,l.return)),d&64&&mr&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=oi;if(Dn(o,s),Pn(s),d&512&&(It||l===null||bi(l,l.return)),d&4){var _=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[zs]||_[Bt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),rn(_,d,l),_[Bt]=s,wt(_),d=_;break e;case"link":var x=sE("link","href",y).get(d+(l.href||""));if(x){for(var R=0;R<x.length;R++)if(_=x[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(R,1);break t}}_=y.createElement(d),rn(_,d,l),y.head.appendChild(_);break;case"meta":if(x=sE("meta","content",y).get(d+(l.content||""))){for(R=0;R<x.length;R++)if(_=x[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(R,1);break t}}_=y.createElement(d),rn(_,d,l),y.head.appendChild(_);break;default:throw Error(i(468,d))}_[Bt]=s,wt(_),d=_}s.stateNode=d}else oE(y,s.type,s.stateNode);else s.stateNode=rE(y,d,s.memoizedProps);else _!==d?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,d===null?oE(y,s.type,s.stateNode):rE(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Um(s,s.memoizedProps,l.memoizedProps)}break;case 27:Dn(o,s),Pn(s),d&512&&(It||l===null||bi(l,l.return)),l!==null&&d&4&&Um(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Dn(o,s),Pn(s),d&512&&(It||l===null||bi(l,l.return)),s.flags&32){y=s.stateNode;try{Gn(y,"")}catch(X){ft(s,s.return,X)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,Um(s,y,l!==null?l.memoizedProps:y)),d&1024&&(Bm=!0);break;case 6:if(Dn(o,s),Pn(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(X){ft(s,s.return,X)}}break;case 3:if(Ff=null,y=oi,oi=Uf(o.containerInfo),Dn(o,s),oi=y,Pn(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Au(o.containerInfo)}catch(X){ft(s,s.return,X)}Bm&&(Bm=!1,dT(s));break;case 4:d=oi,oi=Uf(s.stateNode.containerInfo),Dn(o,s),Pn(s),oi=d;break;case 12:Dn(o,s),Pn(s);break;case 13:Dn(o,s),Pn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ym=qn()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,qm(s,d)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,Q=mr,te=It;if(mr=Q||y,It=te||k,Dn(o,s),It=te,mr=Q,Pn(s),d&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||k||mr||It||po(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){k=l=o;try{if(_=k.stateNode,y)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{R=k.stateNode;var re=k.memoizedProps.style,W=re!=null&&re.hasOwnProperty("display")?re.display:null;R.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(X){ft(k,k.return,X)}}}else if(o.tag===6){if(l===null){k=o;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(X){ft(k,k.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,qm(s,l))));break;case 19:Dn(o,s),Pn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,qm(s,d)));break;case 30:break;case 21:break;default:Dn(o,s),Pn(s)}}function Pn(s){var o=s.flags;if(o&2){try{for(var l,d=s.return;d!==null;){if(rT(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Om(s);Af(s,_,y);break;case 5:var x=l.stateNode;l.flags&32&&(Gn(x,""),l.flags&=-33);var R=Om(s);Af(s,R,x);break;case 3:case 4:var k=l.stateNode.containerInfo,Q=Om(s);Fm(s,Q,k);break;default:throw Error(i(161))}}catch(te){ft(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function dT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;dT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Yr(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)aT(s,o.alternate,o),o=o.sibling}function po(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Kr(4,o,o.return),po(o);break;case 1:bi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&nT(o,o.return,l),po(o);break;case 27:gu(o.stateNode);case 26:case 5:bi(o,o.return),po(o);break;case 22:o.memoizedState===null&&po(o);break;case 30:po(o);break;default:po(o)}s=s.sibling}}function Jr(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=s,_=o,x=_.flags;switch(_.tag){case 0:case 11:case 15:Jr(y,_,l),ou(4,_);break;case 1:if(Jr(y,_,l),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){ft(d,d.return,Q)}if(d=_,y=d.updateQueue,y!==null){var R=d.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)qv(k[y],R)}catch(Q){ft(d,d.return,Q)}}l&&x&64&&tT(_),au(_,_.return);break;case 27:sT(_);case 26:case 5:Jr(y,_,l),l&&d===null&&x&4&&iT(_),au(_,_.return);break;case 12:Jr(y,_,l);break;case 13:Jr(y,_,l),l&&x&4&&cT(y,_);break;case 22:_.memoizedState===null&&Jr(y,_,l),au(_,_.return);break;case 30:break;default:Jr(y,_,l)}o=o.sibling}}function zm(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Kl(l))}function Gm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Kl(s))}function Ni(s,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)hT(s,o,l,d),o=o.sibling}function hT(s,o,l,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Ni(s,o,l,d),y&2048&&ou(9,o);break;case 1:Ni(s,o,l,d);break;case 3:Ni(s,o,l,d),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Kl(s)));break;case 12:if(y&2048){Ni(s,o,l,d),s=o.stateNode;try{var _=o.memoizedProps,x=_.id,R=_.onPostCommit;typeof R=="function"&&R(x,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ft(o,o.return,k)}}else Ni(s,o,l,d);break;case 13:Ni(s,o,l,d);break;case 23:break;case 22:_=o.stateNode,x=o.alternate,o.memoizedState!==null?_._visibility&2?Ni(s,o,l,d):lu(s,o):_._visibility&2?Ni(s,o,l,d):(_._visibility|=2,Ta(s,o,l,d,(o.subtreeFlags&10256)!==0)),y&2048&&zm(x,o);break;case 24:Ni(s,o,l,d),y&2048&&Gm(o.alternate,o);break;default:Ni(s,o,l,d)}}function Ta(s,o,l,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=s,x=o,R=l,k=d,Q=x.flags;switch(x.tag){case 0:case 11:case 15:Ta(_,x,R,k,y),ou(8,x);break;case 23:break;case 22:var te=x.stateNode;x.memoizedState!==null?te._visibility&2?Ta(_,x,R,k,y):lu(_,x):(te._visibility|=2,Ta(_,x,R,k,y)),y&&Q&2048&&zm(x.alternate,x);break;case 24:Ta(_,x,R,k,y),y&&Q&2048&&Gm(x.alternate,x);break;default:Ta(_,x,R,k,y)}o=o.sibling}}function lu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,d=o,y=d.flags;switch(d.tag){case 22:lu(l,d),y&2048&&zm(d.alternate,d);break;case 24:lu(l,d),y&2048&&Gm(d.alternate,d);break;default:lu(l,d)}o=o.sibling}}var uu=8192;function Ea(s){if(s.subtreeFlags&uu)for(s=s.child;s!==null;)mT(s),s=s.sibling}function mT(s){switch(s.tag){case 26:Ea(s),s.flags&uu&&s.memoizedState!==null&&GI(oi,s.memoizedState,s.memoizedProps);break;case 5:Ea(s);break;case 3:case 4:var o=oi;oi=Uf(s.stateNode.containerInfo),Ea(s),oi=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=uu,uu=16777216,Ea(s),uu=o):Ea(s));break;default:Ea(s)}}function pT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function cu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];Wt=d,yT(d,s)}pT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gT(s),s=s.sibling}function gT(s){switch(s.tag){case 0:case 11:case 15:cu(s),s.flags&2048&&Kr(9,s,s.return);break;case 3:cu(s);break;case 12:cu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,xf(s)):cu(s);break;default:cu(s)}}function xf(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];Wt=d,yT(d,s)}pT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Kr(8,o,o.return),xf(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,xf(o));break;default:xf(o)}s=s.sibling}}function yT(s,o){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:Kr(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Kl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Wt=d;else e:for(l=s;Wt!==null;){d=Wt;var y=d.sibling,_=d.return;if(lT(d),d===l){Wt=null;break e}if(y!==null){y.return=_,Wt=y;break e}Wt=_}}}var sI={getCacheForType:function(s){var o=cn(Gt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},oI=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,qe=null,Je=0,st=0,kn=null,Qr=!1,Ca=!1,Hm=!1,gr=0,St=0,Wr=0,go=0,$m=0,jn=0,Sa=0,fu=null,xn=null,Km=!1,Ym=0,wf=1/0,Rf=null,Xr=null,nn=0,jr=null,Aa=null,xa=0,Jm=0,Qm=null,vT=null,du=0,Wm=null;function Vn(){if((rt&2)!==0&&Je!==0)return Je&-Je;if(Z.T!==null){var s=da;return s!==0?s:ip()}return Pr()}function _T(){jn===0&&(jn=(Je&536870912)===0||et?El():536870912);var s=Xn.current;return s!==null&&(s.flags|=32),jn}function Ln(s,o,l){(s===ht&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(wa(s,0),Zr(s,Je,jn,!1)),Ji(s,l),((rt&2)===0||s!==ht)&&(s===ht&&((rt&2)===0&&(go|=l),St===4&&Zr(s,Je,jn,!1)),Mi(s))}function TT(s,o,l){if((rt&6)!==0)throw Error(i(327));var d=!l&&(o&124)===0&&(o&s.expiredLanes)===0||qs(s,o),y=d?uI(s,o):Zm(s,o,!0),_=d;do{if(y===0){Ca&&!d&&Zr(s,o,0,!1);break}else{if(l=s.current.alternate,_&&!aI(l)){y=Zm(s,o,!1),_=!1;continue}if(y===2){if(_=o,s.errorRecoveryDisabledLanes&_)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var R=s;y=fu;var k=R.current.memoizedState.isDehydrated;if(k&&(wa(R,x).flags|=256),x=Zm(R,x,!1),x!==2){if(Hm&&!k){R.errorRecoveryDisabledLanes|=_,go|=_,y=4;break e}_=xn,xn=y,_!==null&&(xn===null?xn=_:xn.push.apply(xn,_))}y=x}if(_=!1,y!==2)continue}}if(y===1){wa(s,0),Zr(s,o,0,!0);break}e:{switch(d=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Zr(d,o,jn,!Qr);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Ym+300-qn(),10<y)){if(Zr(d,o,jn,!Qr),Go(d,0,!0)!==0)break e;d.timeoutHandle=QT(ET.bind(null,d,l,xn,Rf,Km,o,jn,go,Sa,Qr,_,2,-0,0),y);break e}ET(d,l,xn,Rf,Km,o,jn,go,Sa,Qr,_,0,-0,0)}}break}while(!0);Mi(s)}function ET(s,o,l,d,y,_,x,R,k,Q,te,re,W,X){if(s.timeoutHandle=-1,re=o.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(_u={stylesheets:null,count:0,unsuspend:zI},mT(o),re=HI(),re!==null)){s.cancelPendingCommit=re(IT.bind(null,s,o,_,l,d,y,x,R,k,te,1,W,X)),Zr(s,_,x,!Q);return}IT(s,o,_,l,d,y,x,R,k)}function aI(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],_=y.getSnapshot;y=y.value;try{if(!Nn(_(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Zr(s,o,l,d){o&=~$m,o&=~go,s.suspendedLanes|=o,s.pingedLanes&=~o,d&&(s.warmLanes|=o),d=s.expirationTimes;for(var y=o;0<y;){var _=31-un(y),x=1<<_;d[_]=-1,y&=~x}l!==0&&gi(s,l,o)}function If(){return(rt&6)===0?(hu(0),!1):!0}function Xm(){if(qe!==null){if(st===0)var s=qe.return;else s=qe,lr=uo=null,mm(s),va=null,iu=0,s=qe;for(;s!==null;)eT(s.alternate,s),s=s.return;qe=null}}function wa(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,xI(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Xm(),ht=s,qe=l=sr(s.current,null),Je=o,st=0,kn=null,Qr=!1,Ca=qs(s,o),Hm=!1,Sa=jn=$m=go=Wr=St=0,xn=fu=null,Km=!1,(o&8)!==0&&(o|=o&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=o;0<d;){var y=31-un(d),_=1<<y;o|=s[y],d&=~_}return gr=o,Qc(),l}function CT(s,o){Ue=null,Z.H=pf,o===Jl||o===sf?(o=Fv(),st=3):o===Lv?(o=Fv(),st=4):st=o===B_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,kn=o,qe===null&&(St=1,Tf(s,Yn(o,s.current)))}function ST(){var s=Z.H;return Z.H=pf,s===null?pf:s}function AT(){var s=Z.A;return Z.A=sI,s}function jm(){St=4,Qr||(Je&4194048)!==Je&&Xn.current!==null||(Ca=!0),(Wr&134217727)===0&&(go&134217727)===0||ht===null||Zr(ht,Je,jn,!1)}function Zm(s,o,l){var d=rt;rt|=2;var y=ST(),_=AT();(ht!==s||Je!==o)&&(Rf=null,wa(s,o)),o=!1;var x=St;e:do try{if(st!==0&&qe!==null){var R=qe,k=kn;switch(st){case 8:Xm(),x=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(o=!0);var Q=st;if(st=0,kn=null,Ra(s,R,k,Q),l&&Ca){x=0;break e}break;default:Q=st,st=0,kn=null,Ra(s,R,k,Q)}}lI(),x=St;break}catch(te){CT(s,te)}while(!0);return o&&s.shellSuspendCounter++,lr=uo=null,rt=d,Z.H=y,Z.A=_,qe===null&&(ht=null,Je=0,Qc()),x}function lI(){for(;qe!==null;)xT(qe)}function uI(s,o){var l=rt;rt|=2;var d=ST(),y=AT();ht!==s||Je!==o?(Rf=null,wf=qn()+500,wa(s,o)):Ca=qs(s,o);e:do try{if(st!==0&&qe!==null){o=qe;var _=kn;t:switch(st){case 1:st=0,kn=null,Ra(s,o,_,1);break;case 2:case 9:if(Uv(_)){st=0,kn=null,wT(o);break}o=function(){st!==2&&st!==9||ht!==s||(st=7),Mi(s)},_.then(o,o);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Uv(_)?(st=0,kn=null,wT(o)):(st=0,kn=null,Ra(s,o,_,7));break;case 5:var x=null;switch(qe.tag){case 26:x=qe.memoizedState;case 5:case 27:var R=qe;if(!x||aE(x)){st=0,kn=null;var k=R.sibling;if(k!==null)qe=k;else{var Q=R.return;Q!==null?(qe=Q,bf(Q)):qe=null}break t}}st=0,kn=null,Ra(s,o,_,5);break;case 6:st=0,kn=null,Ra(s,o,_,6);break;case 8:Xm(),St=6;break e;default:throw Error(i(462))}}cI();break}catch(te){CT(s,te)}while(!0);return lr=uo=null,Z.H=d,Z.A=y,rt=l,qe!==null?0:(ht=null,Je=0,Qc(),St)}function cI(){for(;qe!==null&&!yl();)xT(qe)}function xT(s){var o=j_(s.alternate,s,gr);s.memoizedProps=s.pendingProps,o===null?bf(s):qe=o}function wT(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=K_(l,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=K_(l,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:mm(o);default:eT(l,o),o=qe=Rv(o,gr),o=j_(l,o,gr)}s.memoizedProps=s.pendingProps,o===null?bf(s):qe=o}function Ra(s,o,l,d){lr=uo=null,mm(o),va=null,iu=0;var y=o.return;try{if(ZR(s,y,o,l,Je)){St=1,Tf(s,Yn(l,s.current)),qe=null;return}}catch(_){if(y!==null)throw qe=y,_;St=1,Tf(s,Yn(l,s.current)),qe=null;return}o.flags&32768?(et||d===1?s=!0:Ca||(Je&536870912)!==0?s=!1:(Qr=s=!0,(d===2||d===9||d===3||d===6)&&(d=Xn.current,d!==null&&d.tag===13&&(d.flags|=16384))),RT(o,s)):bf(o)}function bf(s){var o=s;do{if((o.flags&32768)!==0){RT(o,Qr);return}s=o.return;var l=tI(o.alternate,o,gr);if(l!==null){qe=l;return}if(o=o.sibling,o!==null){qe=o;return}qe=o=s}while(o!==null);St===0&&(St=5)}function RT(s,o){do{var l=nI(s.alternate,s);if(l!==null){l.flags&=32767,qe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){qe=s;return}qe=s=l}while(s!==null);St=6,qe=null}function IT(s,o,l,d,y,_,x,R,k){s.cancelPendingCommit=null;do Nf();while(nn!==0);if((rt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Gh,Sl(s,l,_,x,R,k),s===ht&&(qe=ht=null,Je=0),Aa=o,jr=s,xa=l,Jm=_,Qm=y,vT=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mI(Us,function(){return PT(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,y=de.p,de.p=2,x=rt,rt|=4;try{iI(s,o,l)}finally{rt=x,de.p=y,Z.T=d}}nn=1,bT(),NT(),MT()}}function bT(){if(nn===1){nn=0;var s=jr,o=Aa,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var d=de.p;de.p=2;var y=rt;rt|=4;try{fT(o,s);var _=fp,x=yv(s.containerInfo),R=_.focusedElem,k=_.selectionRange;if(x!==R&&R&&R.ownerDocument&&gv(R.ownerDocument.documentElement,R)){if(k!==null&&Oh(R)){var Q=k.start,te=k.end;if(te===void 0&&(te=Q),"selectionStart"in R)R.selectionStart=Q,R.selectionEnd=Math.min(te,R.value.length);else{var re=R.ownerDocument||document,W=re&&re.defaultView||window;if(W.getSelection){var X=W.getSelection(),be=R.textContent.length,xe=Math.min(k.start,be),ct=k.end===void 0?xe:Math.min(k.end,be);!X.extend&&xe>ct&&(x=ct,ct=xe,xe=x);var $=pv(R,xe),B=pv(R,ct);if($&&B&&(X.rangeCount!==1||X.anchorNode!==$.node||X.anchorOffset!==$.offset||X.focusNode!==B.node||X.focusOffset!==B.offset)){var J=re.createRange();J.setStart($.node,$.offset),X.removeAllRanges(),xe>ct?(X.addRange(J),X.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),X.addRange(J))}}}}for(re=[],X=R;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<re.length;R++){var ie=re[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}zf=!!cp,fp=cp=null}finally{rt=y,de.p=d,Z.T=l}}s.current=o,nn=2}}function NT(){if(nn===2){nn=0;var s=jr,o=Aa,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var d=de.p;de.p=2;var y=rt;rt|=4;try{aT(s,o.alternate,o)}finally{rt=y,de.p=d,Z.T=l}}nn=3}}function MT(){if(nn===4||nn===3){nn=0,Ac();var s=jr,o=Aa,l=xa,d=vT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?nn=5:(nn=0,Aa=jr=null,DT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Xr=null),Ho(l),o=o.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Et,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=Z.T,y=de.p,de.p=2,Z.T=null;try{for(var _=s.onRecoverableError,x=0;x<d.length;x++){var R=d[x];_(R.value,{componentStack:R.stack})}}finally{Z.T=o,de.p=y}}(xa&3)!==0&&Nf(),Mi(s),y=s.pendingLanes,(l&4194090)!==0&&(y&42)!==0?s===Wm?du++:(du=0,Wm=s):du=0,hu(0)}}function DT(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Kl(o)))}function Nf(s){return bT(),NT(),MT(),PT()}function PT(){if(nn!==5)return!1;var s=jr,o=Jm;Jm=0;var l=Ho(xa),d=Z.T,y=de.p;try{de.p=32>l?32:l,Z.T=null,l=Qm,Qm=null;var _=jr,x=xa;if(nn=0,Aa=jr=null,xa=0,(rt&6)!==0)throw Error(i(331));var R=rt;if(rt|=4,gT(_.current),hT(_,_.current,x,l),rt=R,hu(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Et,_)}catch{}return!0}finally{de.p=y,Z.T=d,DT(s,o)}}function kT(s,o,l){o=Yn(l,o),o=Im(s.stateNode,o,2),s=zr(s,o,2),s!==null&&(Ji(s,2),Mi(s))}function ft(s,o,l){if(s.tag===3)kT(s,s,l);else for(;o!==null;){if(o.tag===3){kT(o,s,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Xr===null||!Xr.has(d))){s=Yn(l,s),l=O_(2),d=zr(o,l,2),d!==null&&(F_(l,d,o,s),Ji(d,2),Mi(d));break}}o=o.return}}function ep(s,o,l){var d=s.pingCache;if(d===null){d=s.pingCache=new oI;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(l)||(Hm=!0,y.add(l),s=fI.bind(null,s,o,l),o.then(s,s))}function fI(s,o,l){var d=s.pingCache;d!==null&&d.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ht===s&&(Je&l)===l&&(St===4||St===3&&(Je&62914560)===Je&&300>qn()-Ym?(rt&2)===0&&wa(s,0):$m|=l,Sa===Je&&(Sa=0)),Mi(s)}function VT(s,o){o===0&&(o=Cl()),s=la(s,o),s!==null&&(Ji(s,o),Mi(s))}function dI(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),VT(s,l)}function hI(s,o){var l=0;switch(s.tag){case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),VT(s,l)}function mI(s,o){return Vs(s,o)}var Mf=null,Ia=null,tp=!1,Df=!1,np=!1,yo=0;function Mi(s){s!==Ia&&s.next===null&&(Ia===null?Mf=Ia=s:Ia=Ia.next=s),Df=!0,tp||(tp=!0,gI())}function hu(s,o){if(!np&&Df){np=!0;do for(var l=!1,d=Mf;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var x=d.suspendedLanes,R=d.pingedLanes;_=(1<<31-un(42|s)+1)-1,_&=y&~(x&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,FT(d,_))}else _=Je,_=Go(d,d===ht?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||qs(d,_)||(l=!0,FT(d,_));d=d.next}while(l);np=!1}}function pI(){LT()}function LT(){Df=tp=!1;var s=0;yo!==0&&(AI()&&(s=yo),yo=0);for(var o=qn(),l=null,d=Mf;d!==null;){var y=d.next,_=UT(d,o);_===0?(d.next=null,l===null?Mf=y:l.next=y,y===null&&(Ia=l)):(l=d,(s!==0||(_&3)!==0)&&(Df=!0)),d=y}hu(s)}function UT(s,o){for(var l=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var x=31-un(_),R=1<<x,k=y[x];k===-1?((R&l)===0||(R&d)!==0)&&(y[x]=Tl(R,o)):k<=o&&(s.expiredLanes|=R),_&=~R}if(o=ht,l=Je,l=Go(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===o&&(st===2||st===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Ls(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||qs(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(d!==null&&Ls(d),Ho(l)){case 2:case 8:l=qo;break;case 32:l=Us;break;case 268435456:l=zo;break;default:l=Us}return d=OT.bind(null,s),l=Vs(l,d),s.callbackPriority=o,s.callbackNode=l,o}return d!==null&&d!==null&&Ls(d),s.callbackPriority=2,s.callbackNode=null,2}function OT(s,o){if(nn!==0&&nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Nf()&&s.callbackNode!==l)return null;var d=Je;return d=Go(s,s===ht?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(TT(s,d,o),UT(s,qn()),s.callbackNode!=null&&s.callbackNode===l?OT.bind(null,s):null)}function FT(s,o){if(Nf())return null;TT(s,o,!0)}function gI(){wI(function(){(rt&6)!==0?Vs(vl,pI):LT()})}function ip(){return yo===0&&(yo=El()),yo}function BT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wo(""+s)}function qT(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function yI(s,o,l,d,y){if(o==="submit"&&l&&l.stateNode===y){var _=BT((y[Pt]||null).action),x=d.submitter;x&&(o=(o=x[Pt]||null)?BT(o.formAction):x.getAttribute("formAction"),o!==null&&(_=o,x=null));var R=new Xo("action","action",null,d,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(yo!==0){var k=x?qT(y,x):new FormData(y);Sm(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=x?qT(y,x):new FormData(y),Sm(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var rp=0;rp<zh.length;rp++){var sp=zh[rp],vI=sp.toLowerCase(),_I=sp[0].toUpperCase()+sp.slice(1);si(vI,"on"+_I)}si(Tv,"onAnimationEnd"),si(Ev,"onAnimationIteration"),si(Cv,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(LR,"onTransitionRun"),si(UR,"onTransitionStart"),si(OR,"onTransitionCancel"),si(Sv,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function zT(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],y=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var x=d.length-1;0<=x;x--){var R=d[x],k=R.instance,Q=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Q;try{_(y)}catch(te){_f(te)}y.currentTarget=null,_=k}else for(x=0;x<d.length;x++){if(R=d[x],k=R.instance,Q=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Q;try{_(y)}catch(te){_f(te)}y.currentTarget=null,_=k}}}}function ze(s,o){var l=o[xl];l===void 0&&(l=o[xl]=new Set);var d=s+"__bubble";l.has(d)||(GT(o,s,2,!1),l.add(d))}function op(s,o,l){var d=0;o&&(d|=4),GT(l,s,d,o)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function ap(s){if(!s[Pf]){s[Pf]=!0,wl.forEach(function(l){l!=="selectionchange"&&(TI.has(l)||op(l,!1,s),op(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Pf]||(o[Pf]=!0,op("selectionchange",!1,o))}}function GT(s,o,l,d){switch(hE(o)){case 2:var y=YI;break;case 8:y=JI;break;default:y=Ep}l=y.bind(null,o,l,s),y=void 0,!$n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(o,l,{capture:!0,passive:y}):s.addEventListener(o,l,!0):y!==void 0?s.addEventListener(o,l,{passive:y}):s.addEventListener(o,l,!1)}function lp(s,o,l,d,y){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var R=d.stateNode.containerInfo;if(R===y)break;if(x===4)for(x=d.return;x!==null;){var k=x.tag;if((k===3||k===4)&&x.stateNode.containerInfo===y)return;x=x.return}for(;R!==null;){if(x=Qi(R),x===null)return;if(k=x.tag,k===5||k===6||k===26||k===27){d=_=x;continue e}R=R.parentNode}}d=d.return}kc(function(){var Q=_,te=Hn(l),re=[];e:{var W=Av.get(s);if(W!==void 0){var X=Xo,be=s;switch(s){case"keypress":if(Ci(l)===0)break e;case"keydown":case"keyup":X=ia;break;case"focusin":be="focus",X=ea;break;case"focusout":be="blur",X=ea;break;case"beforeblur":case"afterblur":X=ea;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=zc;break;case Tv:case Ev:case Cv:X=ta;break;case Sv:X=Hc;break;case"scroll":case"scrollend":X=Vc;break;case"wheel":X=ra;break;case"copy":case"cut":case"paste":X=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ol;break;case"toggle":case"beforetoggle":X=Kc}var xe=(o&4)!==0,ct=!xe&&(s==="scroll"||s==="scrollend"),$=xe?W!==null?W+"Capture":null:W;xe=[];for(var B=Q,J;B!==null;){var ie=B;if(J=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||J===null||$===null||(ie=Qs(B,$),ie!=null&&xe.push(pu(B,ie,J))),ct)break;B=B.return}0<xe.length&&(W=new X(W,be,null,l,te),re.push({event:W,listeners:xe}))}}if((o&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",W&&l!==Zi&&(be=l.relatedTarget||l.fromElement)&&(Qi(be)||be[zn]))break e;if((X||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,X?(be=l.relatedTarget||l.toElement,X=Q,be=be?Qi(be):null,be!==null&&(ct=a(be),xe=be.tag,be!==ct||xe!==5&&xe!==27&&xe!==6)&&(be=null)):(X=null,be=Q),X!==be)){if(xe=Kn,ie="onMouseLeave",$="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(xe=Ol,ie="onPointerLeave",$="onPointerEnter",B="pointer"),ct=X==null?W:vi(X),J=be==null?W:vi(be),W=new xe(ie,B+"leave",X,l,te),W.target=ct,W.relatedTarget=J,ie=null,Qi(te)===Q&&(xe=new xe($,B+"enter",be,l,te),xe.target=J,xe.relatedTarget=ct,ie=xe),ct=ie,X&&be)t:{for(xe=X,$=be,B=0,J=xe;J;J=ba(J))B++;for(J=0,ie=$;ie;ie=ba(ie))J++;for(;0<B-J;)xe=ba(xe),B--;for(;0<J-B;)$=ba($),J--;for(;B--;){if(xe===$||$!==null&&xe===$.alternate)break t;xe=ba(xe),$=ba($)}xe=null}else xe=null;X!==null&&HT(re,W,X,xe,!1),be!==null&&ct!==null&&HT(re,ct,be,xe,!0)}}e:{if(W=Q?vi(Q):window,X=W.nodeName&&W.nodeName.toLowerCase(),X==="select"||X==="input"&&W.type==="file")var ye=uv;else if(zt(W))if(cv)ye=PR;else{ye=MR;var Be=NR}else X=W.nodeName,!X||X.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Q&&Ml(Q.elementType)&&(ye=uv):ye=DR;if(ye&&(ye=ye(s,Q))){rr(re,ye,l,te);break e}Be&&Be(s,W,Q),s==="focusout"&&Q&&W.type==="number"&&Q.memoizedProps.value!=null&&Ur(W,"number",W.value)}switch(Be=Q?vi(Q):window,s){case"focusin":(zt(Be)||Be.contentEditable==="true")&&(sa=Be,Fh=Q,ql=null);break;case"focusout":ql=Fh=sa=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,vv(re,l,te);break;case"selectionchange":if(VR)break;case"keydown":case"keyup":vv(re,l,te)}var Te;if(xi)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ke?j(s,l)&&(we="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(A&&l.locale!=="ko"&&(Ke||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ke&&(Te=Pl()):(Ei=te,Or="value"in Ei?Ei.value:Ei.textContent,Ke=!0)),Be=kf(Q,we),0<Be.length&&(we=new Ll(we,s,null,l,te),re.push({event:we,listeners:Be}),Te?we.data=Te:(Te=ce(l),Te!==null&&(we.data=Te)))),(Te=T?qt(s,l):Ye(s,l))&&(we=kf(Q,"onBeforeInput"),0<we.length&&(Be=new Ll("onBeforeInput","beforeinput",null,l,te),re.push({event:Be,listeners:we}),Be.data=Te)),yI(re,s,Q,l,te)}zT(re,o)})}function pu(s,o,l){return{instance:s,listener:o,currentTarget:l}}function kf(s,o){for(var l=o+"Capture",d=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Qs(s,l),y!=null&&d.unshift(pu(s,y,_)),y=Qs(s,o),y!=null&&d.push(pu(s,y,_))),s.tag===3)return d;s=s.return}return[]}function ba(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function HT(s,o,l,d,y){for(var _=o._reactName,x=[];l!==null&&l!==d;){var R=l,k=R.alternate,Q=R.stateNode;if(R=R.tag,k!==null&&k===d)break;R!==5&&R!==26&&R!==27||Q===null||(k=Q,y?(Q=Qs(l,_),Q!=null&&x.unshift(pu(l,Q,k))):y||(Q=Qs(l,_),Q!=null&&x.push(pu(l,Q,k)))),l=l.return}x.length!==0&&s.push({event:o,listeners:x})}var EI=/\r\n?/g,CI=/\u0000|\uFFFD/g;function $T(s){return(typeof s=="string"?s:""+s).replace(EI,`
`).replace(CI,"")}function KT(s,o){return o=$T(o),$T(s)===o}function Vf(){}function ut(s,o,l,d,y,_){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Gn(s,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Gn(s,""+d);break;case"className":_i(s,"class",d);break;case"tabIndex":_i(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(s,l,d);break;case"style":Nl(s,d,_);break;case"data":if(o!=="object"){_i(s,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Wo(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&ut(s,o,"name",y.name,y,null),ut(s,o,"formEncType",y.formEncType,y,null),ut(s,o,"formMethod",y.formMethod,y,null),ut(s,o,"formTarget",y.formTarget,y,null)):(ut(s,o,"encType",y.encType,y,null),ut(s,o,"method",y.method,y,null),ut(s,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Wo(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=Vf);break;case"onScroll":d!=null&&ze("scroll",s);break;case"onScrollEnd":d!=null&&ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=Wo(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":ze("beforetoggle",s),ze("toggle",s),Lr(s,"popover",d);break;case"xlinkActuate":Zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zt(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zt(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zt(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zt(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Lr(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Dh.get(l)||l,Lr(s,l,d))}}function up(s,o,l,d,y,_){switch(l){case"style":Nl(s,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof d=="string"?Gn(s,d):(typeof d=="number"||typeof d=="bigint")&&Gn(s,""+d);break;case"onScroll":d!=null&&ze("scroll",s);break;case"onScrollEnd":d!=null&&ze("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),_=s[Pt]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(o,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,d,y);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):Lr(s,l,d)}}}function rn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",s),ze("load",s);var d=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var x=l[_];if(x!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ut(s,o,_,x,l,null)}}y&&ut(s,o,"srcSet",l.srcSet,l,null),d&&ut(s,o,"src",l.src,l,null);return;case"input":ze("invalid",s);var R=_=x=y=null,k=null,Q=null;for(d in l)if(l.hasOwnProperty(d)){var te=l[d];if(te!=null)switch(d){case"name":y=te;break;case"type":x=te;break;case"checked":k=te;break;case"defaultChecked":Q=te;break;case"value":_=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:ut(s,o,d,te,l,null)}}Ks(s,_,R,k,Q,x,y,!1),Qo(s);return;case"select":ze("invalid",s),d=x=_=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":x=R;break;case"multiple":d=R;default:ut(s,o,y,R,l,null)}o=_,l=x,s.multiple=!!d,o!=null?ji(s,!!d,o,!1):l!=null&&ji(s,!!d,l,!0);return;case"textarea":ze("invalid",s),_=y=d=null;for(x in l)if(l.hasOwnProperty(x)&&(R=l[x],R!=null))switch(x){case"value":d=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:ut(s,o,x,R,l,null)}Ys(s,d,y,_),Qo(s);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(d=l[k],d!=null))switch(k){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ut(s,o,k,d,l,null)}return;case"dialog":ze("beforetoggle",s),ze("toggle",s),ze("cancel",s),ze("close",s);break;case"iframe":case"object":ze("load",s);break;case"video":case"audio":for(d=0;d<mu.length;d++)ze(mu[d],s);break;case"image":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"embed":case"source":case"link":ze("error",s),ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(d=l[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ut(s,o,Q,d,l,null)}return;default:if(Ml(o)){for(te in l)l.hasOwnProperty(te)&&(d=l[te],d!==void 0&&up(s,o,te,d,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(d=l[R],d!=null&&ut(s,o,R,d,l,null))}function SI(s,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,x=null,R=null,k=null,Q=null,te=null;for(X in l){var re=l[X];if(l.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=re;default:d.hasOwnProperty(X)||ut(s,o,X,null,d,re)}}for(var W in d){var X=d[W];if(re=l[W],d.hasOwnProperty(W)&&(X!=null||re!=null))switch(W){case"type":_=X;break;case"name":y=X;break;case"checked":Q=X;break;case"defaultChecked":te=X;break;case"value":x=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:X!==re&&ut(s,o,W,X,d,re)}}bn(s,x,R,k,Q,te,_,y);return;case"select":X=x=R=W=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:d.hasOwnProperty(_)||ut(s,o,_,null,d,k)}for(y in d)if(_=d[y],k=l[y],d.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":W=_;break;case"defaultValue":R=_;break;case"multiple":x=_;default:_!==k&&ut(s,o,y,_,d,k)}o=R,l=x,d=X,W!=null?ji(s,!!l,W,!1):!!d!=!!l&&(o!=null?ji(s,!!l,o,!0):ji(s,!!l,l?[]:"",!1));return;case"textarea":X=W=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ut(s,o,R,null,d,y)}for(x in d)if(y=d[x],_=l[x],d.hasOwnProperty(x)&&(y!=null||_!=null))switch(x){case"value":W=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&ut(s,o,x,y,d,_)}at(s,W,X);return;case"option":for(var be in l)if(W=l[be],l.hasOwnProperty(be)&&W!=null&&!d.hasOwnProperty(be))switch(be){case"selected":s.selected=!1;break;default:ut(s,o,be,null,d,W)}for(k in d)if(W=d[k],X=l[k],d.hasOwnProperty(k)&&W!==X&&(W!=null||X!=null))switch(k){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ut(s,o,k,W,d,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in l)W=l[xe],l.hasOwnProperty(xe)&&W!=null&&!d.hasOwnProperty(xe)&&ut(s,o,xe,null,d,W);for(Q in d)if(W=d[Q],X=l[Q],d.hasOwnProperty(Q)&&W!==X&&(W!=null||X!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,o));break;default:ut(s,o,Q,W,d,X)}return;default:if(Ml(o)){for(var ct in l)W=l[ct],l.hasOwnProperty(ct)&&W!==void 0&&!d.hasOwnProperty(ct)&&up(s,o,ct,void 0,d,W);for(te in d)W=d[te],X=l[te],!d.hasOwnProperty(te)||W===X||W===void 0&&X===void 0||up(s,o,te,W,d,X);return}}for(var $ in l)W=l[$],l.hasOwnProperty($)&&W!=null&&!d.hasOwnProperty($)&&ut(s,o,$,null,d,W);for(re in d)W=d[re],X=l[re],!d.hasOwnProperty(re)||W===X||W==null&&X==null||ut(s,o,re,W,d,X)}var cp=null,fp=null;function Lf(s){return s.nodeType===9?s:s.ownerDocument}function YT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JT(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function dp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hp=null;function AI(){var s=window.event;return s&&s.type==="popstate"?s===hp?!1:(hp=s,!0):(hp=null,!1)}var QT=typeof setTimeout=="function"?setTimeout:void 0,xI=typeof clearTimeout=="function"?clearTimeout:void 0,WT=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof WT<"u"?function(s){return WT.resolve(null).then(s).catch(RI)}:QT;function RI(s){setTimeout(function(){throw s})}function es(s){return s==="head"}function XT(s,o){var l=o,d=0,y=0;do{var _=l.nextSibling;if(s.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<d&&8>d){l=d;var x=s.ownerDocument;if(l&1&&gu(x.documentElement),l&2&&gu(x.body),l&4)for(l=x.head,gu(l),x=l.firstChild;x;){var R=x.nextSibling,k=x.nodeName;x[zs]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=R}}if(y===0){s.removeChild(_),Au(o);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:d=l.charCodeAt(0)-48;else d=0;l=_}while(l);Au(o)}function mp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mp(l),Vr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function II(s,o,l,d){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[zs])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=ai(s.nextSibling),s===null)break}return null}function bI(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ai(s.nextSibling),s===null))return null;return s}function pp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function NI(s,o){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function ai(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var gp=null;function jT(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function ZT(s,o,l){switch(o=Lf(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function gu(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Vr(s)}var Zn=new Map,eE=new Set;function Uf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var yr=de.d;de.d={f:MI,r:DI,D:PI,C:kI,L:VI,m:LI,X:OI,S:UI,M:FI};function MI(){var s=yr.f(),o=If();return s||o}function DI(s){var o=yi(s);o!==null&&o.tag===5&&o.type==="form"?T_(o):yr.r(s)}var Na=typeof document>"u"?null:document;function tE(s,o,l){var d=Na;if(d&&typeof o=="string"&&o){var y=kt(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),eE.has(y)||(eE.add(y),s={rel:s,crossOrigin:l,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),rn(o,"link",s),wt(o),d.head.appendChild(o)))}}function PI(s){yr.D(s),tE("dns-prefetch",s,null)}function kI(s,o){yr.C(s,o),tE("preconnect",s,o)}function VI(s,o,l){yr.L(s,o,l);var d=Na;if(d&&s&&o){var y='link[rel="preload"][as="'+kt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+kt(l.imageSizes)+'"]')):y+='[href="'+kt(s)+'"]';var _=y;switch(o){case"style":_=Ma(s);break;case"script":_=Da(s)}Zn.has(_)||(s=v({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Zn.set(_,s),d.querySelector(y)!==null||o==="style"&&d.querySelector(yu(_))||o==="script"&&d.querySelector(vu(_))||(o=d.createElement("link"),rn(o,"link",s),wt(o),d.head.appendChild(o)))}}function LI(s,o){yr.m(s,o);var l=Na;if(l&&s){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+kt(d)+'"][href="'+kt(s)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Da(s)}if(!Zn.has(_)&&(s=v({rel:"modulepreload",href:s},o),Zn.set(_,s),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vu(_)))return}d=l.createElement("link"),rn(d,"link",s),wt(d),l.head.appendChild(d)}}}function UI(s,o,l){yr.S(s,o,l);var d=Na;if(d&&s){var y=yn(d).hoistableStyles,_=Ma(s);o=o||"default";var x=y.get(_);if(!x){var R={loading:0,preload:null};if(x=d.querySelector(yu(_)))R.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Zn.get(_))&&yp(s,l);var k=x=d.createElement("link");wt(k),rn(k,"link",s),k._p=new Promise(function(Q,te){k.onload=Q,k.onerror=te}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Of(x,o,d)}x={type:"stylesheet",instance:x,count:1,state:R},y.set(_,x)}}}function OI(s,o){yr.X(s,o);var l=Na;if(l&&s){var d=yn(l).hoistableScripts,y=Da(s),_=d.get(y);_||(_=l.querySelector(vu(y)),_||(s=v({src:s,async:!0},o),(o=Zn.get(y))&&vp(s,o),_=l.createElement("script"),wt(_),rn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function FI(s,o){yr.M(s,o);var l=Na;if(l&&s){var d=yn(l).hoistableScripts,y=Da(s),_=d.get(y);_||(_=l.querySelector(vu(y)),_||(s=v({src:s,async:!0,type:"module"},o),(o=Zn.get(y))&&vp(s,o),_=l.createElement("script"),wt(_),rn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function nE(s,o,l,d){var y=(y=Ne.current)?Uf(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ma(l.href),l=yn(y).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ma(l.href);var _=yn(y).hoistableStyles,x=_.get(s);if(x||(y=y.ownerDocument||y,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,x),(_=y.querySelector(yu(s)))&&!_._p&&(x.instance=_,x.state.loading=5),Zn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(s,l),_||BI(y,s,l,x.state))),o&&d===null)throw Error(i(528,""));return x}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Da(l),l=yn(y).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ma(s){return'href="'+kt(s)+'"'}function yu(s){return'link[rel="stylesheet"]['+s+"]"}function iE(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function BI(s,o,l,d){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=s.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),rn(o,"link",l),wt(o),s.head.appendChild(o))}function Da(s){return'[src="'+kt(s)+'"]'}function vu(s){return"script[async]"+s}function rE(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=s.querySelector('style[data-href~="'+kt(l.href)+'"]');if(d)return o.instance=d,wt(d),d;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),wt(d),rn(d,"style",y),Of(d,l.precedence,s),o.instance=d;case"stylesheet":y=Ma(l.href);var _=s.querySelector(yu(y));if(_)return o.state.loading|=4,o.instance=_,wt(_),_;d=iE(l),(y=Zn.get(y))&&yp(d,y),_=(s.ownerDocument||s).createElement("link"),wt(_);var x=_;return x._p=new Promise(function(R,k){x.onload=R,x.onerror=k}),rn(_,"link",d),o.state.loading|=4,Of(_,l.precedence,s),o.instance=_;case"script":return _=Da(l.src),(y=s.querySelector(vu(_)))?(o.instance=y,wt(y),y):(d=l,(y=Zn.get(_))&&(d=v({},l),vp(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),wt(y),rn(y,"link",d),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Of(d,l.precedence,s));return o.instance}function Of(s,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,x=0;x<d.length;x++){var R=d[x];if(R.dataset.precedence===o)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function yp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function vp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Ff=null;function sE(s,o,l){if(Ff===null){var d=new Map,y=Ff=new Map;y.set(l,d)}else y=Ff,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[zs]||_[Bt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(o)||"";x=s+x;var R=d.get(x);R?R.push(_):d.set(x,[_])}}return d}function oE(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function qI(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function aE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var _u=null;function zI(){}function GI(s,o,l){if(_u===null)throw Error(i(475));var d=_u;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Ma(l.href),_=s.querySelector(yu(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=Bf.bind(d),s.then(d,d)),o.state.loading|=4,o.instance=_,wt(_);return}_=s.ownerDocument||s,l=iE(l),(y=Zn.get(y))&&yp(l,y),_=_.createElement("link"),wt(_);var x=_;x._p=new Promise(function(R,k){x.onload=R,x.onerror=k}),rn(_,"link",l),o.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Bf.bind(d),s.addEventListener("load",o),s.addEventListener("error",o))}}function HI(){if(_u===null)throw Error(i(475));var s=_u;return s.stylesheets&&s.count===0&&_p(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&_p(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Bf(){if(this.count--,this.count===0){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qf=null;function _p(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qf=new Map,o.forEach($I,s),qf=null,Bf.call(s))}function $I(s,o){if(!(o.state.loading&4)){var l=qf.get(s);if(l)var d=l.get(null);else{l=new Map,qf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var x=y[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),d=x)}d&&l.set(null,d)}y=o.instance,x=y.getAttribute("data-precedence"),_=l.get(x)||d,_===d&&l.set(null,y),l.set(x,y),this.count++,d=Bf.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Tu={$$typeof:G,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function KI(s,o,l,d,y,_,x,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function lE(s,o,l,d,y,_,x,R,k,Q,te,re){return s=new KI(s,o,l,x,R,k,Q,re),o=1,_===!0&&(o|=24),_=Mn(3,null,null,o),s.current=_,_.stateNode=s,o=em(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:d,isDehydrated:l,cache:o},rm(_),s}function uE(s){return s?(s=ua,s):ua}function cE(s,o,l,d,y,_){y=uE(y),d.context===null?d.context=y:d.pendingContext=y,d=qr(o),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=zr(s,d,o),l!==null&&(Ln(l,s,o),Wl(l,s,o))}function fE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Tp(s,o){fE(s,o),(s=s.alternate)&&fE(s,o)}function dE(s){if(s.tag===13){var o=la(s,67108864);o!==null&&Ln(o,s,67108864),Tp(s,67108864)}}var zf=!0;function YI(s,o,l,d){var y=Z.T;Z.T=null;var _=de.p;try{de.p=2,Ep(s,o,l,d)}finally{de.p=_,Z.T=y}}function JI(s,o,l,d){var y=Z.T;Z.T=null;var _=de.p;try{de.p=8,Ep(s,o,l,d)}finally{de.p=_,Z.T=y}}function Ep(s,o,l,d){if(zf){var y=Cp(d);if(y===null)lp(s,o,d,Gf,l),mE(s,d);else if(WI(y,s,o,l,d))d.stopPropagation();else if(mE(s,d),o&4&&-1<QI.indexOf(s)){for(;y!==null;){var _=yi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=ni(_.pendingLanes);if(x!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;x;){var k=1<<31-un(x);R.entanglements[1]|=k,x&=~k}Mi(_),(rt&6)===0&&(wf=qn()+500,hu(0))}}break;case 13:R=la(_,2),R!==null&&Ln(R,_,2),If(),Tp(_,2)}if(_=Cp(d),_===null&&lp(s,o,d,Gf,l),_===y)break;y=_}y!==null&&d.stopPropagation()}else lp(s,o,d,null,l)}}function Cp(s){return s=Hn(s),Sp(s)}var Gf=null;function Sp(s){if(Gf=null,s=Qi(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=u(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Gf=s,null}function hE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wh()){case vl:return 2;case qo:return 8;case Us:case Rh:return 32;case zo:return 268435456;default:return 32}default:return 32}}var Ap=!1,ts=null,ns=null,is=null,Eu=new Map,Cu=new Map,rs=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mE(s,o){switch(s){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Eu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(o.pointerId)}}function Su(s,o,l,d,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},o!==null&&(o=yi(o),o!==null&&dE(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function WI(s,o,l,d,y){switch(o){case"focusin":return ts=Su(ts,s,o,l,d,y),!0;case"dragenter":return ns=Su(ns,s,o,l,d,y),!0;case"mouseover":return is=Su(is,s,o,l,d,y),!0;case"pointerover":var _=y.pointerId;return Eu.set(_,Su(Eu.get(_)||null,s,o,l,d,y)),!0;case"gotpointercapture":return _=y.pointerId,Cu.set(_,Su(Cu.get(_)||null,s,o,l,d,y)),!0}return!1}function pE(s){var o=Qi(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){s.blockedOn=o,Rc(s.priority,function(){if(l.tag===13){var d=Vn();d=Dr(d);var y=la(l,d);y!==null&&Ln(y,l,d),Tp(l,d)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Hf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Cp(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Zi=d,l.target.dispatchEvent(d),Zi=null}else return o=yi(l),o!==null&&dE(o),s.blockedOn=l,!1;o.shift()}return!0}function gE(s,o,l){Hf(s)&&l.delete(o)}function XI(){Ap=!1,ts!==null&&Hf(ts)&&(ts=null),ns!==null&&Hf(ns)&&(ns=null),is!==null&&Hf(is)&&(is=null),Eu.forEach(gE),Cu.forEach(gE)}function $f(s,o){s.blockedOn===o&&(s.blockedOn=null,Ap||(Ap=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,XI)))}var Kf=null;function yE(s){Kf!==s&&(Kf=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Kf===s&&(Kf=null);for(var o=0;o<s.length;o+=3){var l=s[o],d=s[o+1],y=s[o+2];if(typeof d!="function"){if(Sp(d||l)===null)continue;break}var _=yi(l);_!==null&&(s.splice(o,3),o-=3,Sm(_,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Au(s){function o(k){return $f(k,s)}ts!==null&&$f(ts,s),ns!==null&&$f(ns,s),is!==null&&$f(is,s),Eu.forEach(o),Cu.forEach(o);for(var l=0;l<rs.length;l++){var d=rs[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<rs.length&&(l=rs[0],l.blockedOn===null);)pE(l),l.blockedOn===null&&rs.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],_=l[d+1],x=y[Pt]||null;if(typeof _=="function")x||yE(l);else if(x){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,x=_[Pt]||null)R=x.formAction;else if(Sp(y)!==null)continue}else R=x.action;typeof R=="function"?l[d+1]=R:(l.splice(d,3),d-=3),yE(l)}}}function xp(s){this._internalRoot=s}Yf.prototype.render=xp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,d=Vn();cE(l,d,s,o,null,null)},Yf.prototype.unmount=xp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;cE(s.current,2,null,s,null,null),If(),o[zn]=null}};function Yf(s){this._internalRoot=s}Yf.prototype.unstable_scheduleHydration=function(s){if(s){var o=Pr();s={blockedOn:null,target:s,priority:o};for(var l=0;l<rs.length&&o!==0&&o<rs[l].priority;l++);rs.splice(l,0,s),l===0&&pE(s)}};var vE=e.version;if(vE!=="19.1.0")throw Error(i(527,vE,"19.1.0"));de.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(o),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var jI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jf.isDisabled&&Jf.supportsFiber)try{Et=Jf.inject(jI),it=Jf}catch{}}return wu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,d="",y=k_,_=V_,x=L_,R=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=lE(s,1,!1,null,null,l,d,y,_,x,R,null),s[zn]=o.current,ap(s),new xp(o)},wu.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var d=!1,y="",_=k_,x=V_,R=L_,k=null,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(Q=l.formState)),o=lE(s,1,!0,o,l??null,d,y,_,x,R,k,Q),o.context=uE(null),l=o.current,d=Vn(),d=Dr(d),y=qr(d),y.callback=null,zr(l,y,d),l=d,o.current.lanes=l,Ji(o,l),Mi(o),s[zn]=o.current,ap(s),new Yf(o)},wu.version="19.1.0",wu}var IE;function ub(){if(IE)return Ip.exports;IE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ip.exports=lb(),Ip.exports}var cb=ub();const fb=QS(cb);var Ru={},bE;function db(){if(bE)return Ru;bE=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.parse=u,Ru.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function u(C,w){const I=new a,D=C.length;if(D<2)return I;const V=(w==null?void 0:w.decode)||v;let H=0;do{const z=C.indexOf("=",H);if(z===-1)break;const G=C.indexOf(";",H),ee=G===-1?D:G;if(z>ee){H=C.lastIndexOf(";",z-1)+1;continue}const ne=h(C,H,z),fe=p(C,z,ne),U=C.slice(ne,fe);if(I[U]===void 0){let M=h(C,z+1,ee),N=p(C,ee,M);const P=V(C.slice(M,N));I[U]=P}H=ee+1}while(H<D);return I}function h(C,w,I){do{const D=C.charCodeAt(w);if(D!==32&&D!==9)return w}while(++w<I);return I}function p(C,w,I){for(;w>I;){const D=C.charCodeAt(--w);if(D!==32&&D!==9)return w+1}return I}function m(C,w,I){const D=(I==null?void 0:I.encode)||encodeURIComponent;if(!t.test(C))throw new TypeError(`argument name is invalid: ${C}`);const V=D(w);if(!e.test(V))throw new TypeError(`argument val is invalid: ${w}`);let H=C+"="+V;if(!I)return H;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);H+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);H+="; Domain="+I.domain}if(I.path){if(!i.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);H+="; Path="+I.path}if(I.expires){if(!E(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);H+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(H+="; HttpOnly"),I.secure&&(H+="; Secure"),I.partitioned&&(H+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return H}function v(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function E(C){return r.call(C)==="[object Date]"}return Ru}db();var NE="popstate";function hb(t={}){function e(i,r){let{pathname:a,search:u,hash:h}=i.location;return jp("",{pathname:a,search:u,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Ju(r)}return pb(e,n,null,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mb(){return Math.random().toString(36).substring(2,10)}function ME(t,e){return{usr:t.state,key:t.key,idx:e}}function jp(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sl(e):e,state:n,key:e&&e.key||i||mb()}}function Ju({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function pb(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,u=r.history,h="POP",p=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function E(){h="POP";let V=v(),H=V==null?null:V-m;m=V,p&&p({action:h,location:D.location,delta:H})}function C(V,H){h="PUSH";let z=jp(D.location,V,H);m=v()+1;let G=ME(z,m),ee=D.createHref(z);try{u.pushState(G,"",ee)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;r.location.assign(ee)}a&&p&&p({action:h,location:D.location,delta:1})}function w(V,H){h="REPLACE";let z=jp(D.location,V,H);m=v();let G=ME(z,m),ee=D.createHref(z);u.replaceState(G,"",ee),a&&p&&p({action:h,location:D.location,delta:0})}function I(V){return gb(V)}let D={get action(){return h},get location(){return t(r,u)},listen(V){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(NE,E),p=V,()=>{r.removeEventListener(NE,E),p=null}},createHref(V){return e(r,V)},createURL:I,encodeLocation(V){let H=I(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:C,replace:w,go(V){return u.go(V)}};return D}function gb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),vt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Ju(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function WS(t,e,n="/"){return yb(t,e,n,!1)}function yb(t,e,n,i){let r=typeof e=="string"?sl(e):e,a=Cr(r.pathname||"/",n);if(a==null)return null;let u=XS(t);vb(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let m=bb(a);h=Rb(u[p],m,i)}return h}function XS(t,e=[],n=[],i=""){let r=(a,u,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=Tr([i,p.relativePath]),v=n.concat(p);a.children&&a.children.length>0&&(vt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),XS(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:xb(m,a.index),routesMeta:v})};return t.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))r(a,u);else for(let p of jS(a.path))r(a,u,p)}),e}function jS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let u=jS(i.join("/")),h=[];return h.push(...u.map(p=>p===""?a:[a,p].join("/"))),r&&h.push(...u),h.map(p=>t.startsWith("/")&&p===""?"/":p)}function vb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var _b=/^:[\w-]+$/,Tb=3,Eb=2,Cb=1,Sb=10,Ab=-2,DE=t=>t==="*";function xb(t,e){let n=t.split("/"),i=n.length;return n.some(DE)&&(i+=Ab),e&&(i+=Eb),n.filter(r=>!DE(r)).reduce((r,a)=>r+(_b.test(a)?Tb:a===""?Cb:Sb),i)}function wb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Rb(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",u=[];for(let h=0;h<i.length;++h){let p=i[h],m=h===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=Cd({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),C=p.route;if(!E&&m&&n&&!i[i.length-1].route.index&&(E=Cd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(r,E.params),u.push({params:r,pathname:Tr([a,E.pathname]),pathnameBase:Pb(Tr([a,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(a=Tr([a,E.pathnameBase]))}return u}function Cd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Ib(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],u=a.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:E},C)=>{if(v==="*"){let I=h[C]||"";u=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const w=h[C];return E&&!w?m[v]=void 0:m[v]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:t}}function Ib(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function bb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Cr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Nb(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?sl(t):t;return{pathname:n?n.startsWith("/")?n:Mb(n,e):e,search:kb(i),hash:Vb(r)}}function Mb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Dp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Db(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qg(t){let e=Db(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Wg(t,e,n,i=!1){let r;typeof t=="string"?r=sl(t):(r={...t},vt(!r.pathname||!r.pathname.includes("?"),Dp("?","pathname","search",r)),vt(!r.pathname||!r.pathname.includes("#"),Dp("#","pathname","hash",r)),vt(!r.search||!r.search.includes("#"),Dp("#","search","hash",r)));let a=t===""||r.pathname==="",u=a?"/":r.pathname,h;if(u==null)h=n;else{let E=e.length-1;if(!i&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),E-=1;r.pathname=C.join("/")}h=E>=0?e[E]:"/"}let p=Nb(r,h),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}var Tr=t=>t.join("/").replace(/\/\/+/g,"/"),Pb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Lb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ZS=["POST","PUT","PATCH","DELETE"];new Set(ZS);var Ub=["GET",...ZS];new Set(Ub);var ol=Y.createContext(null);ol.displayName="DataRouter";var Xd=Y.createContext(null);Xd.displayName="DataRouterState";var eA=Y.createContext({isTransitioning:!1});eA.displayName="ViewTransition";var Ob=Y.createContext(new Map);Ob.displayName="Fetchers";var Fb=Y.createContext(null);Fb.displayName="Await";var mi=Y.createContext(null);mi.displayName="Navigation";var uc=Y.createContext(null);uc.displayName="Location";var Hi=Y.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var Xg=Y.createContext(null);Xg.displayName="RouteError";function Bb(t,{relative:e}={}){vt(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=Y.useContext(mi),{hash:r,pathname:a,search:u}=cc(t,{relative:e}),h=a;return n!=="/"&&(h=a==="/"?n:Tr([n,a])),i.createHref({pathname:h,search:u,hash:r})}function al(){return Y.useContext(uc)!=null}function Ir(){return vt(al(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(uc).location}var tA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nA(t){Y.useContext(mi).static||Y.useLayoutEffect(t)}function jg(){let{isDataRoute:t}=Y.useContext(Hi);return t?Zb():qb()}function qb(){vt(al(),"useNavigate() may be used only in the context of a <Router> component.");let t=Y.useContext(ol),{basename:e,navigator:n}=Y.useContext(mi),{matches:i}=Y.useContext(Hi),{pathname:r}=Ir(),a=JSON.stringify(Qg(i)),u=Y.useRef(!1);return nA(()=>{u.current=!0}),Y.useCallback((p,m={})=>{if(fi(u.current,tA),!u.current)return;if(typeof p=="number"){n.go(p);return}let v=Wg(p,JSON.parse(a),r,m.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Tr([e,v.pathname])),(m.replace?n.replace:n.push)(v,m.state,m)},[e,n,a,r,t])}Y.createContext(null);function cc(t,{relative:e}={}){let{matches:n}=Y.useContext(Hi),{pathname:i}=Ir(),r=JSON.stringify(Qg(n));return Y.useMemo(()=>Wg(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function zb(t,e){return iA(t,e)}function iA(t,e,n,i){var H;vt(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=Y.useContext(mi),{matches:a}=Y.useContext(Hi),u=a[a.length-1],h=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",v=u&&u.route;{let z=v&&v.path||"";rA(p,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Ir(),C;if(e){let z=typeof e=="string"?sl(e):e;vt(m==="/"||((H=z.pathname)==null?void 0:H.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${z.pathname}" was given in the \`location\` prop.`),C=z}else C=E;let w=C.pathname||"/",I=w;if(m!=="/"){let z=m.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=WS(t,{pathname:I});fi(v||D!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),fi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Yb(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Tr([m,r.encodeLocation?r.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?m:Tr([m,r.encodeLocation?r.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),a,n,i);return e&&V?Y.createElement(uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},V):V}function Gb(){let t=jb(),e=Lb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=Y.createElement(Y.Fragment,null,Y.createElement("p",null,"💿 Hey developer 👋"),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:a},"ErrorBoundary")," or"," ",Y.createElement("code",{style:a},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:r},n):null,u)}var Hb=Y.createElement(Gb,null),$b=class extends Y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Y.createElement(Hi.Provider,{value:this.props.routeContext},Y.createElement(Xg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kb({routeContext:t,match:e,children:n}){let i=Y.useContext(ol);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(Hi.Provider,{value:t},n)}function Yb(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n==null?void 0:n.errors;if(a!=null){let p=r.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,p+1))}let u=!1,h=-1;if(n)for(let p=0;p<r.length;p++){let m=r[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:E}=n,C=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||C){u=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}return r.reduceRight((p,m,v)=>{let E,C=!1,w=null,I=null;n&&(E=a&&m.route.id?a[m.route.id]:void 0,w=m.route.errorElement||Hb,u&&(h<0&&v===0?(rA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,I=null):h===v&&(C=!0,I=m.route.hydrateFallbackElement||null)));let D=e.concat(r.slice(0,v+1)),V=()=>{let H;return E?H=w:C?H=I:m.route.Component?H=Y.createElement(m.route.Component,null):m.route.element?H=m.route.element:H=p,Y.createElement(Kb,{match:m,routeContext:{outlet:p,matches:D,isDataRoute:n!=null},children:H})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?Y.createElement($b,{location:n.location,revalidation:n.revalidation,component:w,error:E,children:V(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):V()},null)}function Zg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jb(t){let e=Y.useContext(ol);return vt(e,Zg(t)),e}function Qb(t){let e=Y.useContext(Xd);return vt(e,Zg(t)),e}function Wb(t){let e=Y.useContext(Hi);return vt(e,Zg(t)),e}function ey(t){let e=Wb(t),n=e.matches[e.matches.length-1];return vt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Xb(){return ey("useRouteId")}function jb(){var i;let t=Y.useContext(Xg),e=Qb("useRouteError"),n=ey("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Zb(){let{router:t}=Jb("useNavigate"),e=ey("useNavigate"),n=Y.useRef(!1);return nA(()=>{n.current=!0}),Y.useCallback(async(r,a={})=>{fi(n.current,tA),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var PE={};function rA(t,e,n){!e&&!PE[t]&&(PE[t]=!0,fi(!1,n))}Y.memo(eN);function eN({routes:t,future:e,state:n}){return iA(t,void 0,n,e)}function tN({to:t,replace:e,state:n,relative:i}){vt(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=Y.useContext(mi);fi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Y.useContext(Hi),{pathname:u}=Ir(),h=jg(),p=Wg(t,Qg(a),u,i==="path"),m=JSON.stringify(p);return Y.useEffect(()=>{h(JSON.parse(m),{replace:e,state:n,relative:i})},[h,m,i,e,n]),null}function as(t){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nN({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){vt(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=Y.useMemo(()=>({basename:u,navigator:r,static:a,future:{}}),[u,r,a]);typeof n=="string"&&(n=sl(n));let{pathname:p="/",search:m="",hash:v="",state:E=null,key:C="default"}=n,w=Y.useMemo(()=>{let I=Cr(p,u);return I==null?null:{location:{pathname:I,search:m,hash:v,state:E,key:C},navigationType:i}},[u,p,m,v,E,C,i]);return fi(w!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:Y.createElement(mi.Provider,{value:h},Y.createElement(uc.Provider,{children:e,value:w}))}function iN({children:t,location:e}){return zb(Zp(t),e)}function Zp(t,e=[]){let n=[];return Y.Children.forEach(t,(i,r)=>{if(!Y.isValidElement(i))return;let a=[...e,r];if(i.type===Y.Fragment){n.push.apply(n,Zp(i.props.children,a));return}vt(i.type===as,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Zp(i.props.children,a)),n.push(u)}),n}var ad="get",ld="application/x-www-form-urlencoded";function jd(t){return t!=null&&typeof t.tagName=="string"}function rN(t){return jd(t)&&t.tagName.toLowerCase()==="button"}function sN(t){return jd(t)&&t.tagName.toLowerCase()==="form"}function oN(t){return jd(t)&&t.tagName.toLowerCase()==="input"}function aN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lN(t,e){return t.button===0&&(!e||e==="_self")&&!aN(t)}var Qf=null;function uN(){if(Qf===null)try{new FormData(document.createElement("form"),0),Qf=!1}catch{Qf=!0}return Qf}var cN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pp(t){return t!=null&&!cN.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):t}function fN(t,e){let n,i,r,a,u;if(sN(t)){let h=t.getAttribute("action");i=h?Cr(h,e):null,n=t.getAttribute("method")||ad,r=Pp(t.getAttribute("enctype"))||ld,a=new FormData(t)}else if(rN(t)||oN(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||h.getAttribute("action");if(i=p?Cr(p,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||ad,r=Pp(t.getAttribute("formenctype"))||Pp(h.getAttribute("enctype"))||ld,a=new FormData(h,t),!uN()){let{name:m,type:v,value:E}=t;if(v==="image"){let C=m?`${m}.`:"";a.append(`${C}x`,"0"),a.append(`${C}y`,"0")}else m&&a.append(m,E)}}else{if(jd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ad,i=null,r=ld,u=t}return a&&r==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:u}}function ty(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function dN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mN(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let u=await dN(a,n);return u.links?u.links():[]}return[]}));return vN(i.flat(1).filter(hN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function kE(t,e,n,i,r,a){let u=(p,m)=>n[m]?p.route.id!==n[m].route.id:!0,h=(p,m)=>{var v;return n[m].pathname!==p.pathname||((v=n[m].route.path)==null?void 0:v.endsWith("*"))&&n[m].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,m)=>u(p,m)||h(p,m)):a==="data"?e.filter((p,m)=>{var E;let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function pN(t,e,{includeHydrateFallback:n}={}){return gN(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function gN(t){return[...new Set(t)]}function yN(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function vN(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(yN(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _N=new Set([100,101,204,205]);function TN(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Cr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function sA(){let t=Y.useContext(ol);return ty(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function EN(){let t=Y.useContext(Xd);return ty(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ny=Y.createContext(void 0);ny.displayName="FrameworkContext";function oA(){let t=Y.useContext(ny);return ty(t,"You must render this element inside a <HydratedRouter> element"),t}function CN(t,e){let n=Y.useContext(ny),[i,r]=Y.useState(!1),[a,u]=Y.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:v,onTouchStart:E}=e,C=Y.useRef(null);Y.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let D=H=>{H.forEach(z=>{u(z.isIntersecting)})},V=new IntersectionObserver(D,{threshold:.5});return C.current&&V.observe(C.current),()=>{V.disconnect()}}},[t]),Y.useEffect(()=>{if(i){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[i]);let w=()=>{r(!0)},I=()=>{r(!1),u(!1)};return n?t!=="intent"?[a,C,{}]:[a,C,{onFocus:Iu(h,w),onBlur:Iu(p,I),onMouseEnter:Iu(m,w),onMouseLeave:Iu(v,I),onTouchStart:Iu(E,w)}]:[!1,C,{}]}function Iu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SN({page:t,...e}){let{router:n}=sA(),i=Y.useMemo(()=>WS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?Y.createElement(xN,{page:t,matches:i,...e}):null}function AN(t){let{manifest:e,routeModules:n}=oA(),[i,r]=Y.useState([]);return Y.useEffect(()=>{let a=!1;return mN(t,e,n).then(u=>{a||r(u)}),()=>{a=!0}},[t,e,n]),i}function xN({page:t,matches:e,...n}){let i=Ir(),{manifest:r,routeModules:a}=oA(),{basename:u}=sA(),{loaderData:h,matches:p}=EN(),m=Y.useMemo(()=>kE(t,e,p,r,i,"data"),[t,e,p,r,i]),v=Y.useMemo(()=>kE(t,e,p,r,i,"assets"),[t,e,p,r,i]),E=Y.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let I=new Set,D=!1;if(e.forEach(H=>{var G;let z=r.routes[H.route.id];!z||!z.hasLoader||(!m.some(ee=>ee.route.id===H.route.id)&&H.route.id in h&&((G=a[H.route.id])!=null&&G.shouldRevalidate)||z.hasClientLoader?D=!0:I.add(H.route.id))}),I.size===0)return[];let V=TN(t,u);return D&&I.size>0&&V.searchParams.set("_routes",e.filter(H=>I.has(H.route.id)).map(H=>H.route.id).join(",")),[V.pathname+V.search]},[u,h,i,r,m,e,t,a]),C=Y.useMemo(()=>pN(v,r),[v,r]),w=AN(v);return Y.createElement(Y.Fragment,null,E.map(I=>Y.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),C.map(I=>Y.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),w.map(({key:I,link:D})=>Y.createElement("link",{key:I,...D})))}function wN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aA&&(window.__reactRouterVersion="7.6.3")}catch{}function RN({basename:t,children:e,window:n}){let i=Y.useRef();i.current==null&&(i.current=hb({window:n,v5Compat:!0}));let r=i.current,[a,u]=Y.useState({action:r.action,location:r.location}),h=Y.useCallback(p=>{Y.startTransition(()=>u(p))},[u]);return Y.useLayoutEffect(()=>r.listen(h),[r,h]),Y.createElement(nN,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var lA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fu=Y.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:u,state:h,target:p,to:m,preventScrollReset:v,viewTransition:E,...C},w){let{basename:I}=Y.useContext(mi),D=typeof m=="string"&&lA.test(m),V,H=!1;if(typeof m=="string"&&D&&(V=m,aA))try{let N=new URL(window.location.href),P=m.startsWith("//")?new URL(N.protocol+m):new URL(m),O=Cr(P.pathname,I);P.origin===N.origin&&O!=null?m=O+P.search+P.hash:H=!0}catch{fi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=Bb(m,{relative:r}),[G,ee,ne]=CN(i,C),fe=MN(m,{replace:u,state:h,target:p,preventScrollReset:v,relative:r,viewTransition:E});function U(N){e&&e(N),N.defaultPrevented||fe(N)}let M=Y.createElement("a",{...C,...ne,href:V||z,onClick:H||a?e:U,ref:wN(w,ee),target:p,"data-discover":!D&&n==="render"?"true":void 0});return G&&!D?Y.createElement(Y.Fragment,null,M,Y.createElement(SN,{page:z})):M});Fu.displayName="Link";var IN=Y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:u,viewTransition:h,children:p,...m},v){let E=cc(u,{relative:m.relative}),C=Ir(),w=Y.useContext(Xd),{navigator:I,basename:D}=Y.useContext(mi),V=w!=null&&LN(E)&&h===!0,H=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,z=C.pathname,G=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(z=z.toLowerCase(),G=G?G.toLowerCase():null,H=H.toLowerCase()),G&&D&&(G=Cr(G,D)||G);const ee=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ne=z===H||!r&&z.startsWith(H)&&z.charAt(ee)==="/",fe=G!=null&&(G===H||!r&&G.startsWith(H)&&G.charAt(H.length)==="/"),U={isActive:ne,isPending:fe,isTransitioning:V},M=ne?e:void 0,N;typeof i=="function"?N=i(U):N=[i,ne?"active":null,fe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(U):a;return Y.createElement(Fu,{...m,"aria-current":M,className:N,ref:v,style:P,to:u,viewTransition:h},typeof p=="function"?p(U):p)});IN.displayName="NavLink";var bN=Y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:u=ad,action:h,onSubmit:p,relative:m,preventScrollReset:v,viewTransition:E,...C},w)=>{let I=kN(),D=VN(h,{relative:m}),V=u.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&lA.test(h),z=G=>{if(p&&p(G),G.defaultPrevented)return;G.preventDefault();let ee=G.nativeEvent.submitter,ne=(ee==null?void 0:ee.getAttribute("formmethod"))||u;I(ee||G.currentTarget,{fetcherKey:e,method:ne,navigate:n,replace:r,state:a,relative:m,preventScrollReset:v,viewTransition:E})};return Y.createElement("form",{ref:w,method:V,action:D,onSubmit:i?p:z,...C,"data-discover":!H&&t==="render"?"true":void 0})});bN.displayName="Form";function NN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uA(t){let e=Y.useContext(ol);return vt(e,NN(t)),e}function MN(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:u}={}){let h=jg(),p=Ir(),m=cc(t,{relative:a});return Y.useCallback(v=>{if(lN(v,e)){v.preventDefault();let E=n!==void 0?n:Ju(p)===Ju(m);h(t,{replace:E,state:i,preventScrollReset:r,relative:a,viewTransition:u})}},[p,h,m,n,i,e,t,r,a,u])}var DN=0,PN=()=>`__${String(++DN)}__`;function kN(){let{router:t}=uA("useSubmit"),{basename:e}=Y.useContext(mi),n=Xb();return Y.useCallback(async(i,r={})=>{let{action:a,method:u,encType:h,formData:p,body:m}=fN(i,e);if(r.navigate===!1){let v=r.fetcherKey||PN();await t.fetch(v,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:p,body:m,formMethod:r.method||u,formEncType:r.encType||h,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:p,body:m,formMethod:r.method||u,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function VN(t,{relative:e}={}){let{basename:n}=Y.useContext(mi),i=Y.useContext(Hi);vt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...cc(t||".",{relative:e})},u=Ir();if(t==null){a.search=u.search;let h=new URLSearchParams(a.search),p=h.getAll("index");if(p.some(v=>v==="")){h.delete("index"),p.filter(E=>E).forEach(E=>h.append("index",E));let v=h.toString();a.search=v?`?${v}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Tr([n,a.pathname])),Ju(a)}function LN(t,e={}){let n=Y.useContext(eA);vt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=uA("useViewTransitionState"),r=cc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Cr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Cr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Cd(r.pathname,u)!=null||Cd(r.pathname,a)!=null}[..._N];const UN=()=>{};var VE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ON=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],u=t[n++],h=t[n++],p=((r&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},fA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],u=r+1<t.length,h=u?t[r+1]:0,p=r+2<t.length,m=p?t[r+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let C=(h&15)<<2|m>>6,w=m&63;p||(w=64,u||(C=64)),i.push(n[v],n[E],n[C],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ON(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const m=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||m==null||E==null)throw new FN;const C=a<<2|h>>4;if(i.push(C),m!==64){const w=h<<4&240|m>>2;if(i.push(w),E!==64){const I=m<<6&192|E;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BN=function(t){const e=cA(t);return fA.encodeByteArray(e,!0)},Sd=function(t){return BN(t).replace(/\./g,"")},dA=function(t){try{return fA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=()=>qN().__FIREBASE_DEFAULTS__,GN=()=>{if(typeof process>"u"||typeof VE>"u")return;const t=VE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dA(t[1]);return e&&JSON.parse(e)},Zd=()=>{try{return UN()||zN()||GN()||HN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hA=t=>{var e,n;return(n=(e=Zd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mA=t=>{const e=hA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pA=()=>{var t;return(t=Zd())===null||t===void 0?void 0:t.config},gA=t=>{var e;return(e=Zd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){return t.endsWith(".cloudworkstations.dev")}async function iy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sd(JSON.stringify(n)),Sd(JSON.stringify(u)),""].join(".")}const Bu={};function KN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?t.emulator.push(e):t.prod.push(e);return t}function YN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let LE=!1;function ry(t,e){if(typeof window>"u"||typeof document>"u"||!bs(window.location.host)||Bu[t]===e||Bu[t]||LE)return;Bu[t]=e;function n(C){return`__firebase__banner__${C}`}const i="__firebase__banner",a=KN().prod.length>0;function u(){const C=document.getElementById(i);C&&C.remove()}function h(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,w){C.setAttribute("width","24"),C.setAttribute("id",w),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function m(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{LE=!0,u()},C}function v(C,w){C.setAttribute("id",w),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=YN(i),w=n("text"),I=document.getElementById(w)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),H=n("preprendIcon"),z=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const G=C.element;h(G),v(V,D);const ee=m();p(z,H),G.append(z,I,V,ee),document.body.appendChild(G)}a?(I.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function QN(){var t;const e=(t=Zd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZN(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function e1(){return!QN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t1(){try{return typeof indexedDB=="object"}catch{return!1}}function n1(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="FirebaseError";class $i extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=i1,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?r1(a,i):"Error",h=`${this.serviceName}: ${u} (${r}).`;return new $i(r,h,i)}}function r1(t,e){return t.replace(s1,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const s1=/\{\$([^}]+)}/g;function o1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function So(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],u=e[r];if(UE(a)&&UE(u)){if(!So(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function UE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Pu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function a1(t,e){const n=new l1(t,e);return n.subscribe.bind(n)}class l1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");u1(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=kp),r.error===void 0&&(r.error=kp),r.complete===void 0&&(r.complete=kp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new $N;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d1(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const u=this.instances.get(r);return u&&e(u,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:f1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f1(t){return t===_o?void 0:t}function d1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const m1={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},p1=Ge.INFO,g1={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},y1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=g1[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sy{constructor(e){this.name=e,this._logLevel=p1,this._logHandler=y1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const v1=(t,e)=>e.some(n=>t instanceof n);let OE,FE;function _1(){return OE||(OE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T1(){return FE||(FE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vA=new WeakMap,eg=new WeakMap,_A=new WeakMap,Vp=new WeakMap,oy=new WeakMap;function E1(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(ps(t.result)),r()},u=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&vA.set(n,t)}).catch(()=>{}),oy.set(e,t),e}function C1(t){if(eg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});eg.set(t,e)}let tg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_A.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S1(t){tg=t(tg)}function A1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lp(this),e,...n);return _A.set(i,e.sort?e.sort():[e]),ps(i)}:T1().includes(t)?function(...e){return t.apply(Lp(this),e),ps(vA.get(this))}:function(...e){return ps(t.apply(Lp(this),e))}}function x1(t){return typeof t=="function"?A1(t):(t instanceof IDBTransaction&&C1(t),v1(t,_1())?new Proxy(t,tg):t)}function ps(t){if(t instanceof IDBRequest)return E1(t);if(Vp.has(t))return Vp.get(t);const e=x1(t);return e!==t&&(Vp.set(t,e),oy.set(e,t)),e}const Lp=t=>oy.get(t);function w1(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),h=ps(u);return i&&u.addEventListener("upgradeneeded",p=>{i(ps(u.result),p.oldVersion,p.newVersion,ps(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const R1=["get","getKey","getAll","getAllKeys","count"],I1=["put","add","delete","clear"],Up=new Map;function BE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=I1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||R1.includes(n)))return;const a=async function(u,...h){const p=this.transaction(u,r?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),r&&p.done]))[0]};return Up.set(e,a),a}S1(t=>({...t,get:(e,n,i)=>BE(e,n)||t.get(e,n,i),has:(e,n)=>!!BE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function N1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ng="@firebase/app",qE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new sy("@firebase/app"),M1="@firebase/app-compat",D1="@firebase/analytics-compat",P1="@firebase/analytics",k1="@firebase/app-check-compat",V1="@firebase/app-check",L1="@firebase/auth",U1="@firebase/auth-compat",O1="@firebase/database",F1="@firebase/data-connect",B1="@firebase/database-compat",q1="@firebase/functions",z1="@firebase/functions-compat",G1="@firebase/installations",H1="@firebase/installations-compat",$1="@firebase/messaging",K1="@firebase/messaging-compat",Y1="@firebase/performance",J1="@firebase/performance-compat",Q1="@firebase/remote-config",W1="@firebase/remote-config-compat",X1="@firebase/storage",j1="@firebase/storage-compat",Z1="@firebase/firestore",eM="@firebase/ai",tM="@firebase/firestore-compat",nM="firebase",iM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",rM={[ng]:"fire-core",[M1]:"fire-core-compat",[P1]:"fire-analytics",[D1]:"fire-analytics-compat",[V1]:"fire-app-check",[k1]:"fire-app-check-compat",[L1]:"fire-auth",[U1]:"fire-auth-compat",[O1]:"fire-rtdb",[F1]:"fire-data-connect",[B1]:"fire-rtdb-compat",[q1]:"fire-fn",[z1]:"fire-fn-compat",[G1]:"fire-iid",[H1]:"fire-iid-compat",[$1]:"fire-fcm",[K1]:"fire-fcm-compat",[Y1]:"fire-perf",[J1]:"fire-perf-compat",[Q1]:"fire-rc",[W1]:"fire-rc-compat",[X1]:"fire-gcs",[j1]:"fire-gcs-compat",[Z1]:"fire-fst",[tM]:"fire-fst-compat",[eM]:"fire-vertex","fire-js":"fire-js",[nM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,sM=new Map,rg=new Map;function zE(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ao(t){const e=t.name;if(rg.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;rg.set(e,t);for(const n of Ad.values())zE(n,t);for(const n of sM.values())zE(n,t);return!0}function eh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new fc("app","Firebase",oM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=iM;function TA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ig,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw gs.create("bad-app-name",{appName:String(r)});if(n||(n=pA()),!n)throw gs.create("no-options");const a=Ad.get(r);if(a){if(So(n,a.options)&&So(i,a.config))return a;throw gs.create("duplicate-app",{appName:r})}const u=new h1(r);for(const p of rg.values())u.addComponent(p);const h=new aM(n,i,u);return Ad.set(r,h),h}function ay(t=ig){const e=Ad.get(t);if(!e&&t===ig&&pA())return TA();if(!e)throw gs.create("no-app",{appName:t});return e}function Li(t,e,n){var i;let r=(i=rM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(h.join(" "));return}Ao(new Es(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="firebase-heartbeat-database",uM=1,Qu="firebase-heartbeat-store";let Op=null;function EA(){return Op||(Op=w1(lM,uM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),Op}async function cM(t){try{const n=(await EA()).transaction(Qu),i=await n.objectStore(Qu).get(CA(t));return await n.done,i}catch(e){if(e instanceof $i)Sr.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function GE(t,e){try{const i=(await EA()).transaction(Qu,"readwrite");await i.objectStore(Qu).put(e,CA(t)),await i.done}catch(n){if(n instanceof $i)Sr.warn(n.message);else{const i=gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(i.message)}}}function CA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=1024,dM=30;class hM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=HE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>dM){const u=gM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Sr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=HE(),{heartbeatsToSend:i,unsentEntries:r}=mM(this._heartbeatsCache.heartbeats),a=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Sr.warn(n),""}}}function HE(){return new Date().toISOString().substring(0,10)}function mM(t,e=fM){const n=[];let i=t.slice();for(const r of t){const a=n.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),$E(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$E(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class pM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t1()?n1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return GE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return GE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $E(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}function gM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){Ao(new Es("platform-logger",e=>new b1(e),"PRIVATE")),Ao(new Es("heartbeat",e=>new hM(e),"PRIVATE")),Li(ng,qE,t),Li(ng,qE,"esm2017"),Li("fire-js","")}yM("");function ly(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function SA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vM=SA,AA=new fc("auth","Firebase",SA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new sy("@firebase/auth");function _M(t,...e){xd.logLevel<=Ge.WARN&&xd.warn(`Auth (${Vo}): ${t}`,...e)}function ud(t,...e){xd.logLevel<=Ge.ERROR&&xd.error(`Auth (${Vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,...e){throw uy(t,...e)}function Ui(t,...e){return uy(t,...e)}function xA(t,e,n){const i=Object.assign(Object.assign({},vM()),{[e]:n});return new fc("auth","Firebase",i).create(e,{appName:t.name})}function Er(t){return xA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return AA.create(t,...e)}function Re(t,e,...n){if(!t)throw uy(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ud(e),new Error(e)}function Ar(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TM(){return KE()==="http:"||KE()==="https:"}function KE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TM()||XN()||"connection"in navigator)?navigator.onLine:!0}function CM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=JN()||jN()}get(){return EM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xM=new hc(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ms(t,e,n,i,r={}){return RA(t,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const h=dc(Object.assign({key:t.config.apiKey},u)).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:p},a);return WN()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&bs(t.emulatorConfig.host)&&(m.credentials="include"),wA.fetch()(await IA(t,t.config.apiHost,n,h),m)})}async function RA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},SM),e);try{const r=new RM(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Wf(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wf(t,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Wf(t,"email-already-in-use",u);if(p==="USER_DISABLED")throw Wf(t,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xA(t,v,m);di(t,v)}}catch(r){if(r instanceof $i)throw r;di(t,"network-request-failed",{message:String(r)})}}async function mc(t,e,n,i,r={}){const a=await Ms(t,e,n,i,r);return"mfaPendingCredential"in a&&di(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function IA(t,e,n,i){const r=`${e}${n}?${i}`,a=t,u=a.config.emulator?cy(t.config,r):`${t.config.apiScheme}://${r}`;return AM.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function wM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ui(this.auth,"network-request-failed")),xM.get())})}}function Wf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ui(t,e,i);return r.customData._tokenResponse=n,r}function YE(t){return t!==void 0&&t.enterprise!==void 0}class IM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bM(t,e){return Ms(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e){return Ms(t,"POST","/v1/accounts:delete",e)}async function wd(t,e){return Ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MM(t,e=!1){const n=Mt(t),i=await n.getIdToken(e),r=fy(i);Re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:qu(Fp(r.auth_time)),issuedAtTime:qu(Fp(r.iat)),expirationTime:qu(Fp(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fp(t){return Number(t)*1e3}function fy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const r=dA(n);return r?JSON.parse(r):(ud("Failed to decode base64 JWT payload"),null)}catch(r){return ud("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function JE(t){const e=fy(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof $i&&DM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function DM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Wu(t,wd(n,{idToken:i}));Re(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?bA(a.providerUserInfo):[],h=VM(t.providerData,u),p=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=p?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new og(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function kM(t){const e=Mt(t);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bA(t){return t.map(e=>{var{providerId:n}=e,i=ly(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e){const n=await RA(t,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,u=await IA(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return t.emulatorConfig&&bs(t.emulatorConfig.host)&&(p.credentials="include"),wA.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UM(t,e){return Ms(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=JE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await LM(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,u=new qa;return i&&(Re(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Re(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(Re(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new og(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MM(this,e)}reload(){return kM(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await Wu(this,NM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,u,h,p,m,v;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,C=(r=n.email)!==null&&r!==void 0?r:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,I=(u=n.photoURL)!==null&&u!==void 0?u:void 0,D=(h=n.tenantId)!==null&&h!==void 0?h:void 0,V=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,H=(m=n.createdAt)!==null&&m!==void 0?m:void 0,z=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:G,emailVerified:ee,isAnonymous:ne,providerData:fe,stsTokenManager:U}=n;Re(G&&U,e,"internal-error");const M=qa.fromJSON(this.name,U);Re(typeof G=="string",e,"internal-error"),os(E,e.name),os(C,e.name),Re(typeof ee=="boolean",e,"internal-error"),Re(typeof ne=="boolean",e,"internal-error"),os(w,e.name),os(I,e.name),os(D,e.name),os(V,e.name),os(H,e.name),os(z,e.name);const N=new ui({uid:G,auth:e,email:C,emailVerified:ee,displayName:E,isAnonymous:ne,photoURL:I,phoneNumber:w,tenantId:D,stsTokenManager:M,createdAt:H,lastLoginAt:z});return fe&&Array.isArray(fe)&&(N.providerData=fe.map(P=>Object.assign({},P))),V&&(N._redirectEventId=V),N}static async _fromIdTokenResponse(e,n,i=!1){const r=new qa;r.updateFromServerResponse(n);const a=new ui({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Rd(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Re(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?bA(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new qa;h.updateFromIdToken(i);const p=new ui({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new og(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;function _r(t){Ar(t instanceof Function,"Expected a class definition");let e=QE.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NA.type="NONE";const WE=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t,e,n){return`firebase:${t}:${e}:${n}`}class za{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=cd(this.userKey,r.apiKey,a),this.fullPersistenceKey=cd("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wd(this.auth,{idToken:e}).catch(()=>{});return n?ui._fromGetAccountInfoResponse(this.auth,n,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new za(_r(WE),e,i);const r=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=r[0]||_r(WE);const u=cd(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(u);if(v){let E;if(typeof v=="string"){const C=await wd(e,{idToken:v}).catch(()=>{});if(!C)break;E=await ui._fromGetAccountInfoResponse(e,C,v)}else E=ui._fromJSON(e,v);m!==a&&(h=E),a=m;break}}catch{}const p=r.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new za(a,e,i):(a=p[0],h&&await a._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new za(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LA(e))return"Blackberry";if(UA(e))return"Webos";if(DA(e))return"Safari";if((e.includes("chrome/")||PA(e))&&!e.includes("edge/"))return"Chrome";if(VA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function MA(t=gn()){return/firefox\//i.test(t)}function DA(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PA(t=gn()){return/crios\//i.test(t)}function kA(t=gn()){return/iemobile/i.test(t)}function VA(t=gn()){return/android/i.test(t)}function LA(t=gn()){return/blackberry/i.test(t)}function UA(t=gn()){return/webos/i.test(t)}function dy(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OM(t=gn()){var e;return dy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FM(){return ZN()&&document.documentMode===10}function OA(t=gn()){return dy(t)||VA(t)||UA(t)||LA(t)||/windows phone/i.test(t)||kA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e=[]){let n;switch(t){case"Browser":n=XE(gn());break;case"Worker":n=`${XE(gn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,h)=>{try{const p=e(a);u(p)}catch(p){h(p)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e={}){return Ms(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=6;class GM{constructor(e){var n,i,r,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:zM,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,u,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(r=p.containsLowercaseLetter)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jE(this),this.idTokenSubscription=new jE(this),this.beforeStateQueue=new BM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wd(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Un(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(r=p.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Er(this));const n=e?Mt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qM(this),n=new GM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await UM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,r);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_M(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lo(t){return Mt(t)}class jE{constructor(e){this.auth=e,this.observer=null,this.addObserver=a1(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $M(t){th=t}function BA(t){return th.loadJS(t)}function KM(){return th.recaptchaEnterpriseScript}function YM(){return th.gapiScript}function JM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QM{constructor(){this.enterprise=new WM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XM="recaptcha-enterprise",qA="NO_RECAPTCHA";class jM{constructor(e){this.type=XM,this.auth=Lo(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{bM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new IM(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function r(a,u,h){const p=window.grecaptcha;YE(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(qA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QM().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(h=>{if(!n&&YE(window.grecaptcha))r(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=KM();p.length!==0&&(p+=h),BA(p).then(()=>{r(h,a,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function ZE(t,e,n,i=!1,r=!1){const a=new jM(t);let u;if(r)u=qA;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const h=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ag(t,e,n,i,r){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ZE(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ZE(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e){const n=eh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(So(a,e??{}))return r;di(r,"already-initialized")}return n.initialize({options:e})}function eD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tD(t,e,n){const i=Lo(t);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=zA(e),{host:u,port:h}=nD(e),p=h===null?"":`:${h}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(So(m,i.config.emulator)&&So(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,bs(u)?(iy(`${a}//${u}${p}`),ry("Auth",!0)):iD()}function zA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nD(t){const e=zA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:e0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:e0(u)}}}function e0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function rD(t,e){return Ms(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return mc(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){return mc(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function aD(t,e){return mc(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends hy{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Xu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Xu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,n,"signInWithPassword",sD);case"emailLink":return oD(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,i,"signUpPassword",rD);case"emailLink":return aD(e,{idToken:n,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e){return mc(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="http://localhost";class xo extends hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=ly(n,["providerId","signInMethod"]);if(!i||!r)return null;const u=new xo(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ga(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:lD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cD(t){const e=Du(Pu(t)).link,n=e?Du(Pu(e)).deep_link_id:null,i=Du(Pu(t)).deep_link_id;return(i?Du(Pu(i)).link:null)||i||n||e||t}class my{constructor(e){var n,i,r,a,u,h;const p=Du(Pu(e)),m=(n=p.apiKey)!==null&&n!==void 0?n:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,E=uD((r=p.mode)!==null&&r!==void 0?r:null);Re(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=cD(e);try{return new my(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,n){return Xu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=my.parseLink(n);return Re(i,"argument-error"),Xu._fromEmailAndCode(e,i.code,i.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends GA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends pc{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return cs.credential(n,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends pc{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends pc{constructor(){super("twitter.com")}static credential(e,n){return xo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ds.credential(n,i)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e){return mc(t,"POST","/v1/accounts:signUp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await ui._fromIdTokenResponse(e,i,r),u=t0(i);return new wo({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=t0(i);return new wo({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function t0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends $i{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Id(e,n,i,r)}}function HA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(t,a,e,i):a})}async function dD(t,e,n=!1){const i=await Wu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e,n=!1){const{auth:i}=t;if(Un(i.app))return Promise.reject(Er(i));const r="reauthenticate";try{const a=await Wu(t,HA(i,r,e,t),n);Re(a.idToken,i,"internal-error");const u=fy(a.idToken);Re(u,i,"internal-error");const{sub:h}=u;return Re(t.uid===h,i,"user-mismatch"),wo._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&di(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e,n=!1){if(Un(t.app))return Promise.reject(Er(t));const i="signIn",r=await HA(t,i,e),a=await wo._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}async function mD(t,e){return $A(Lo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t){const e=Lo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pD(t,e,n){if(Un(t.app))return Promise.reject(Er(t));const i=Lo(t),u=await ag(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&KA(t),p}),h=await wo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function gD(t,e,n){return Un(t.app)?Promise.reject(Er(t)):mD(Mt(t),ll.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&KA(t),i})}function yD(t,e,n,i){return Mt(t).onIdTokenChanged(e,n,i)}function vD(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function _D(t,e,n,i){return Mt(t).onAuthStateChanged(e,n,i)}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=1e3,ED=10;class JA extends YA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);FM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ED):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JA.type="LOCAL";const CD=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends YA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QA.type="SESSION";const WA=QA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new nh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(u).map(async m=>m(n.origin,a)),p=await SD(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((h,p)=>{const m=py("",20);r.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(E){const C=E;if(C.data.eventId===m)switch(C.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(C.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function xD(t){Oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function wD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ID(){return XA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebaseLocalStorageDb",bD=1,Nd="firebaseLocalStorage",ZA="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(t,e){return t.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function ND(){const t=indexedDB.deleteDatabase(jA);return new gc(t).toPromise()}function lg(){const t=indexedDB.open(jA,bD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Nd,{keyPath:ZA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Nd)?e(i):(i.close(),await ND(),e(await lg()))})})}async function n0(t,e,n){const i=ih(t,!0).put({[ZA]:e,value:n});return new gc(i).toPromise()}async function MD(t,e){const n=ih(t,!1).get(e),i=await new gc(n).toPromise();return i===void 0?null:i.value}function i0(t,e){const n=ih(t,!0).delete(e);return new gc(n).toPromise()}const DD=800,PD=3;class ex{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>PD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(ID()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wD(),!this.activeServiceWorker)return;this.sender=new AD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await n0(e,bd,"1"),await i0(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>n0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=ih(r,!1).getAll();return new gc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ex.type="LOCAL";const kD=ex;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e){return e?_r(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LD(t){return $A(t.auth,new gy(t),t.bypassAuthState)}function UD(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),hD(n,new gy(t),t.bypassAuthState)}async function OD(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),dD(n,new gy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LD;case"linkViaPopup":case"linkViaRedirect":return OD;case"reauthViaPopup":case"reauthViaRedirect":return UD;default:di(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new hc(2e3,1e4);class Fa extends tx{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=py();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FD.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="pendingRedirect",fd=new Map;class qD extends tx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=fd.get(this.auth._key());if(!e){try{const i=await zD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zD(t,e){const n=$D(e),i=HD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function GD(t,e){fd.set(t._key(),e)}function HD(t){return _r(t._redirectPersistence)}function $D(t){return cd(BD,t.config.apiKey,t.name)}async function KD(t,e,n=!1){if(Un(t.app))return Promise.reject(Er(t));const i=Lo(t),r=VD(i,e),u=await new qD(i,r,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=10*60*1e3;class JD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!nx(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ui(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YD&&this.cachedEventUids.clear(),this.cachedEventUids.has(r0(e))}saveEventToCache(e){this.cachedEventUids.add(r0(e)),this.lastProcessedEventTime=Date.now()}}function r0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e={}){return Ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jD=/^https?/;async function ZD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WD(t);for(const n of e)try{if(eP(n))return}catch{}di(t,"unauthorized-domain")}function eP(t){const e=sg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!jD.test(n))return!1;if(XD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new hc(3e4,6e4);function s0(){const t=Oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nP(t){return new Promise((e,n)=>{var i,r,a;function u(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),n(Ui(t,"network-request-failed"))},timeout:tP.get()})}if(!((r=(i=Oi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Oi().gapi)===null||a===void 0)&&a.load)u();else{const h=JM("iframefcb");return Oi()[h]=()=>{gapi.load?u():n(Ui(t,"network-request-failed"))},BA(`${YM()}?onload=${h}`).catch(p=>n(p))}}).catch(e=>{throw dd=null,e})}let dd=null;function iP(t){return dd=dd||nP(t),dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new hc(5e3,15e3),sP="__/auth/iframe",oP="emulator/auth/iframe",aP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uP(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cy(e,oP):`https://${t.config.authDomain}/${sP}`,i={apiKey:e.apiKey,appName:t.name,v:Vo},r=lP.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${dc(i).slice(1)}`}async function cP(t){const e=await iP(t),n=Oi().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:uP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aP,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ui(t,"network-request-failed"),h=Oi().setTimeout(()=>{a(u)},rP.get());function p(){Oi().clearTimeout(h),r(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dP=500,hP=600,mP="_blank",pP="http://localhost";class o0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gP(t,e,n,i=dP,r=hP){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},fP),{width:i.toString(),height:r.toString(),top:a,left:u}),m=gn().toLowerCase();n&&(h=PA(m)?mP:n),MA(m)&&(e=e||pP,p.scrollbars="yes");const v=Object.entries(p).reduce((C,[w,I])=>`${C}${w}=${I},`,"");if(OM(m)&&h!=="_self")return yP(e||"",h),new o0(null);const E=window.open(e||"",h,v);Re(E,t,"popup-blocked");try{E.focus()}catch{}return new o0(E)}function yP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="__/auth/handler",_P="emulator/auth/handler",TP=encodeURIComponent("fac");async function a0(t,e,n,i,r,a){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vo,eventId:r};if(e instanceof GA){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",o1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof pc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await t._getAppCheckToken(),m=p?`#${TP}=${encodeURIComponent(p)}`:"";return`${EP(t)}?${dc(h).slice(1)}${m}`}function EP({config:t}){return t.emulator?cy(t,_P):`https://${t.authDomain}/${vP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="webStorageSupport";class CP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WA,this._completeRedirectFn=KD,this._overrideRedirectResult=GD}async _openPopup(e,n,i,r){var a;Ar((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await a0(e,n,i,sg(),r);return gP(e,u,py())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await a0(e,n,i,sg(),r);return xD(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Ar(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cP(e),i=new JD(e);return n.register("authEvent",r=>(Re(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},r=>{var a;const u=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Bp];u!==void 0&&n(!!u),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OA()||DA()||dy()}}const SP=CP;var l0="@firebase/auth",u0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wP(t){Ao(new Es("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(t)},m=new HM(i,r,a,p);return eD(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new Es("auth-internal",e=>{const n=Lo(e.getProvider("auth").getImmediate());return(i=>new AP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(l0,u0,xP(t)),Li(l0,u0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=5*60,IP=gA("authIdTokenMaxAge")||RP;let c0=null;const bP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>IP)return;const r=n==null?void 0:n.token;c0!==r&&(c0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function NP(t=ay()){const e=eh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZM(t,{popupRedirectResolver:SP,persistence:[kD,CD,WA]}),i=gA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=bP(a.toString());vD(n,u,()=>u(n.currentUser)),yD(n,h=>u(h))}}const r=hA("auth");return r&&tD(n,`http://${r}`),n}function MP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$M({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Ui("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",MP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wP("Browser");var DP="firebase",PP="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(DP,PP,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,ix;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,M){function N(){}N.prototype=M.prototype,U.D=M.prototype,U.prototype=new N,U.prototype.constructor=U,U.C=function(P,O,q){for(var L=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)L[Dt-2]=arguments[Dt];return M.prototype[O].apply(P,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(U,M,N){N||(N=0);var P=Array(16);if(typeof M=="string")for(var O=0;16>O;++O)P[O]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(O=0;16>O;++O)P[O]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=U.g[0],N=U.g[1],O=U.g[2];var q=U.g[3],L=M+(q^N&(O^q))+P[0]+3614090360&4294967295;M=N+(L<<7&4294967295|L>>>25),L=q+(O^M&(N^O))+P[1]+3905402710&4294967295,q=M+(L<<12&4294967295|L>>>20),L=O+(N^q&(M^N))+P[2]+606105819&4294967295,O=q+(L<<17&4294967295|L>>>15),L=N+(M^O&(q^M))+P[3]+3250441966&4294967295,N=O+(L<<22&4294967295|L>>>10),L=M+(q^N&(O^q))+P[4]+4118548399&4294967295,M=N+(L<<7&4294967295|L>>>25),L=q+(O^M&(N^O))+P[5]+1200080426&4294967295,q=M+(L<<12&4294967295|L>>>20),L=O+(N^q&(M^N))+P[6]+2821735955&4294967295,O=q+(L<<17&4294967295|L>>>15),L=N+(M^O&(q^M))+P[7]+4249261313&4294967295,N=O+(L<<22&4294967295|L>>>10),L=M+(q^N&(O^q))+P[8]+1770035416&4294967295,M=N+(L<<7&4294967295|L>>>25),L=q+(O^M&(N^O))+P[9]+2336552879&4294967295,q=M+(L<<12&4294967295|L>>>20),L=O+(N^q&(M^N))+P[10]+4294925233&4294967295,O=q+(L<<17&4294967295|L>>>15),L=N+(M^O&(q^M))+P[11]+2304563134&4294967295,N=O+(L<<22&4294967295|L>>>10),L=M+(q^N&(O^q))+P[12]+1804603682&4294967295,M=N+(L<<7&4294967295|L>>>25),L=q+(O^M&(N^O))+P[13]+4254626195&4294967295,q=M+(L<<12&4294967295|L>>>20),L=O+(N^q&(M^N))+P[14]+2792965006&4294967295,O=q+(L<<17&4294967295|L>>>15),L=N+(M^O&(q^M))+P[15]+1236535329&4294967295,N=O+(L<<22&4294967295|L>>>10),L=M+(O^q&(N^O))+P[1]+4129170786&4294967295,M=N+(L<<5&4294967295|L>>>27),L=q+(N^O&(M^N))+P[6]+3225465664&4294967295,q=M+(L<<9&4294967295|L>>>23),L=O+(M^N&(q^M))+P[11]+643717713&4294967295,O=q+(L<<14&4294967295|L>>>18),L=N+(q^M&(O^q))+P[0]+3921069994&4294967295,N=O+(L<<20&4294967295|L>>>12),L=M+(O^q&(N^O))+P[5]+3593408605&4294967295,M=N+(L<<5&4294967295|L>>>27),L=q+(N^O&(M^N))+P[10]+38016083&4294967295,q=M+(L<<9&4294967295|L>>>23),L=O+(M^N&(q^M))+P[15]+3634488961&4294967295,O=q+(L<<14&4294967295|L>>>18),L=N+(q^M&(O^q))+P[4]+3889429448&4294967295,N=O+(L<<20&4294967295|L>>>12),L=M+(O^q&(N^O))+P[9]+568446438&4294967295,M=N+(L<<5&4294967295|L>>>27),L=q+(N^O&(M^N))+P[14]+3275163606&4294967295,q=M+(L<<9&4294967295|L>>>23),L=O+(M^N&(q^M))+P[3]+4107603335&4294967295,O=q+(L<<14&4294967295|L>>>18),L=N+(q^M&(O^q))+P[8]+1163531501&4294967295,N=O+(L<<20&4294967295|L>>>12),L=M+(O^q&(N^O))+P[13]+2850285829&4294967295,M=N+(L<<5&4294967295|L>>>27),L=q+(N^O&(M^N))+P[2]+4243563512&4294967295,q=M+(L<<9&4294967295|L>>>23),L=O+(M^N&(q^M))+P[7]+1735328473&4294967295,O=q+(L<<14&4294967295|L>>>18),L=N+(q^M&(O^q))+P[12]+2368359562&4294967295,N=O+(L<<20&4294967295|L>>>12),L=M+(N^O^q)+P[5]+4294588738&4294967295,M=N+(L<<4&4294967295|L>>>28),L=q+(M^N^O)+P[8]+2272392833&4294967295,q=M+(L<<11&4294967295|L>>>21),L=O+(q^M^N)+P[11]+1839030562&4294967295,O=q+(L<<16&4294967295|L>>>16),L=N+(O^q^M)+P[14]+4259657740&4294967295,N=O+(L<<23&4294967295|L>>>9),L=M+(N^O^q)+P[1]+2763975236&4294967295,M=N+(L<<4&4294967295|L>>>28),L=q+(M^N^O)+P[4]+1272893353&4294967295,q=M+(L<<11&4294967295|L>>>21),L=O+(q^M^N)+P[7]+4139469664&4294967295,O=q+(L<<16&4294967295|L>>>16),L=N+(O^q^M)+P[10]+3200236656&4294967295,N=O+(L<<23&4294967295|L>>>9),L=M+(N^O^q)+P[13]+681279174&4294967295,M=N+(L<<4&4294967295|L>>>28),L=q+(M^N^O)+P[0]+3936430074&4294967295,q=M+(L<<11&4294967295|L>>>21),L=O+(q^M^N)+P[3]+3572445317&4294967295,O=q+(L<<16&4294967295|L>>>16),L=N+(O^q^M)+P[6]+76029189&4294967295,N=O+(L<<23&4294967295|L>>>9),L=M+(N^O^q)+P[9]+3654602809&4294967295,M=N+(L<<4&4294967295|L>>>28),L=q+(M^N^O)+P[12]+3873151461&4294967295,q=M+(L<<11&4294967295|L>>>21),L=O+(q^M^N)+P[15]+530742520&4294967295,O=q+(L<<16&4294967295|L>>>16),L=N+(O^q^M)+P[2]+3299628645&4294967295,N=O+(L<<23&4294967295|L>>>9),L=M+(O^(N|~q))+P[0]+4096336452&4294967295,M=N+(L<<6&4294967295|L>>>26),L=q+(N^(M|~O))+P[7]+1126891415&4294967295,q=M+(L<<10&4294967295|L>>>22),L=O+(M^(q|~N))+P[14]+2878612391&4294967295,O=q+(L<<15&4294967295|L>>>17),L=N+(q^(O|~M))+P[5]+4237533241&4294967295,N=O+(L<<21&4294967295|L>>>11),L=M+(O^(N|~q))+P[12]+1700485571&4294967295,M=N+(L<<6&4294967295|L>>>26),L=q+(N^(M|~O))+P[3]+2399980690&4294967295,q=M+(L<<10&4294967295|L>>>22),L=O+(M^(q|~N))+P[10]+4293915773&4294967295,O=q+(L<<15&4294967295|L>>>17),L=N+(q^(O|~M))+P[1]+2240044497&4294967295,N=O+(L<<21&4294967295|L>>>11),L=M+(O^(N|~q))+P[8]+1873313359&4294967295,M=N+(L<<6&4294967295|L>>>26),L=q+(N^(M|~O))+P[15]+4264355552&4294967295,q=M+(L<<10&4294967295|L>>>22),L=O+(M^(q|~N))+P[6]+2734768916&4294967295,O=q+(L<<15&4294967295|L>>>17),L=N+(q^(O|~M))+P[13]+1309151649&4294967295,N=O+(L<<21&4294967295|L>>>11),L=M+(O^(N|~q))+P[4]+4149444226&4294967295,M=N+(L<<6&4294967295|L>>>26),L=q+(N^(M|~O))+P[11]+3174756917&4294967295,q=M+(L<<10&4294967295|L>>>22),L=O+(M^(q|~N))+P[2]+718787259&4294967295,O=q+(L<<15&4294967295|L>>>17),L=N+(q^(O|~M))+P[9]+3951481745&4294967295,U.g[0]=U.g[0]+M&4294967295,U.g[1]=U.g[1]+(O+(L<<21&4294967295|L>>>11))&4294967295,U.g[2]=U.g[2]+O&4294967295,U.g[3]=U.g[3]+q&4294967295}i.prototype.u=function(U,M){M===void 0&&(M=U.length);for(var N=M-this.blockSize,P=this.B,O=this.h,q=0;q<M;){if(O==0)for(;q<=N;)r(this,U,q),q+=this.blockSize;if(typeof U=="string"){for(;q<M;)if(P[O++]=U.charCodeAt(q++),O==this.blockSize){r(this,P),O=0;break}}else for(;q<M;)if(P[O++]=U[q++],O==this.blockSize){r(this,P),O=0;break}}this.h=O,this.o+=M},i.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var M=1;M<U.length-8;++M)U[M]=0;var N=8*this.o;for(M=U.length-8;M<U.length;++M)U[M]=N&255,N/=256;for(this.u(U),U=Array(16),M=N=0;4>M;++M)for(var P=0;32>P;P+=8)U[N++]=this.g[M]>>>P&255;return U};function a(U,M){var N=h;return Object.prototype.hasOwnProperty.call(N,U)?N[U]:N[U]=M(U)}function u(U,M){this.h=M;for(var N=[],P=!0,O=U.length-1;0<=O;O--){var q=U[O]|0;P&&q==M||(N[O]=q,P=!1)}this.g=N}var h={};function p(U){return-128<=U&&128>U?a(U,function(M){return new u([M|0],0>M?-1:0)}):new u([U|0],0>U?-1:0)}function m(U){if(isNaN(U)||!isFinite(U))return E;if(0>U)return V(m(-U));for(var M=[],N=1,P=0;U>=N;P++)M[P]=U/N|0,N*=4294967296;return new u(M,0)}function v(U,M){if(U.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(U.charAt(0)=="-")return V(v(U.substring(1),M));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(M,8)),P=E,O=0;O<U.length;O+=8){var q=Math.min(8,U.length-O),L=parseInt(U.substring(O,O+q),M);8>q?(q=m(Math.pow(M,q)),P=P.j(q).add(m(L))):(P=P.j(N),P=P.add(m(L)))}return P}var E=p(0),C=p(1),w=p(16777216);t=u.prototype,t.m=function(){if(D(this))return-V(this).m();for(var U=0,M=1,N=0;N<this.g.length;N++){var P=this.i(N);U+=(0<=P?P:4294967296+P)*M,M*=4294967296}return U},t.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(I(this))return"0";if(D(this))return"-"+V(this).toString(U);for(var M=m(Math.pow(U,6)),N=this,P="";;){var O=ee(N,M).g;N=H(N,O.j(M));var q=((0<N.g.length?N.g[0]:N.h)>>>0).toString(U);if(N=O,I(N))return q+P;for(;6>q.length;)q="0"+q;P=q+P}},t.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function I(U){if(U.h!=0)return!1;for(var M=0;M<U.g.length;M++)if(U.g[M]!=0)return!1;return!0}function D(U){return U.h==-1}t.l=function(U){return U=H(this,U),D(U)?-1:I(U)?0:1};function V(U){for(var M=U.g.length,N=[],P=0;P<M;P++)N[P]=~U.g[P];return new u(N,~U.h).add(C)}t.abs=function(){return D(this)?V(this):this},t.add=function(U){for(var M=Math.max(this.g.length,U.g.length),N=[],P=0,O=0;O<=M;O++){var q=P+(this.i(O)&65535)+(U.i(O)&65535),L=(q>>>16)+(this.i(O)>>>16)+(U.i(O)>>>16);P=L>>>16,q&=65535,L&=65535,N[O]=L<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function H(U,M){return U.add(V(M))}t.j=function(U){if(I(this)||I(U))return E;if(D(this))return D(U)?V(this).j(V(U)):V(V(this).j(U));if(D(U))return V(this.j(V(U)));if(0>this.l(w)&&0>U.l(w))return m(this.m()*U.m());for(var M=this.g.length+U.g.length,N=[],P=0;P<2*M;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<U.g.length;O++){var q=this.i(P)>>>16,L=this.i(P)&65535,Dt=U.i(O)>>>16,We=U.i(O)&65535;N[2*P+2*O]+=L*We,z(N,2*P+2*O),N[2*P+2*O+1]+=q*We,z(N,2*P+2*O+1),N[2*P+2*O+1]+=L*Dt,z(N,2*P+2*O+1),N[2*P+2*O+2]+=q*Dt,z(N,2*P+2*O+2)}for(P=0;P<M;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=M;P<2*M;P++)N[P]=0;return new u(N,0)};function z(U,M){for(;(U[M]&65535)!=U[M];)U[M+1]+=U[M]>>>16,U[M]&=65535,M++}function G(U,M){this.g=U,this.h=M}function ee(U,M){if(I(M))throw Error("division by zero");if(I(U))return new G(E,E);if(D(U))return M=ee(V(U),M),new G(V(M.g),V(M.h));if(D(M))return M=ee(U,V(M)),new G(V(M.g),M.h);if(30<U.g.length){if(D(U)||D(M))throw Error("slowDivide_ only works with positive integers.");for(var N=C,P=M;0>=P.l(U);)N=ne(N),P=ne(P);var O=fe(N,1),q=fe(P,1);for(P=fe(P,2),N=fe(N,2);!I(P);){var L=q.add(P);0>=L.l(U)&&(O=O.add(N),q=L),P=fe(P,1),N=fe(N,1)}return M=H(U,O.j(M)),new G(O,M)}for(O=E;0<=U.l(M);){for(N=Math.max(1,Math.floor(U.m()/M.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),q=m(N),L=q.j(M);D(L)||0<L.l(U);)N-=P,q=m(N),L=q.j(M);I(q)&&(q=C),O=O.add(q),U=H(U,L)}return new G(O,U)}t.A=function(U){return ee(this,U).h},t.and=function(U){for(var M=Math.max(this.g.length,U.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)&U.i(P);return new u(N,this.h&U.h)},t.or=function(U){for(var M=Math.max(this.g.length,U.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)|U.i(P);return new u(N,this.h|U.h)},t.xor=function(U){for(var M=Math.max(this.g.length,U.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)^U.i(P);return new u(N,this.h^U.h)};function ne(U){for(var M=U.g.length+1,N=[],P=0;P<M;P++)N[P]=U.i(P)<<1|U.i(P-1)>>>31;return new u(N,U.h)}function fe(U,M){var N=M>>5;M%=32;for(var P=U.g.length-N,O=[],q=0;q<P;q++)O[q]=0<M?U.i(q+N)>>>M|U.i(q+N+1)<<32-M:U.i(q+N);return new u(O,U.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ix=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,ys=u}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rx,ku,sx,hd,ug,ox,ax,lx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,A){return g==Array.prototype||g==Object.prototype||(g[T]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var T=0;T<g.length;++T){var A=g[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,T){if(T)e:{var A=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var K=g[b];if(!(K in A))break e;A=A[K]}g=g[g.length-1],b=A[g],T=T(b),T!=b&&T!=null&&e(A,g,{configurable:!0,writable:!0,value:T})}}function a(g,T){g instanceof String&&(g+="");var A=0,b=!1,K={next:function(){if(!b&&A<g.length){var j=A++;return{value:T(j,g[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}r("Array.prototype.values",function(g){return g||function(){return a(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function m(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function v(g,T,A){return g.call.apply(g.bind,arguments)}function E(g,T,A){if(!g)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,b),g.apply(T,K)}}return function(){return g.apply(T,arguments)}}function C(g,T,A){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,C.apply(null,arguments)}function w(g,T){var A=Array.prototype.slice.call(arguments,1);return function(){var b=A.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function I(g,T){function A(){}A.prototype=T.prototype,g.aa=T.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(b,K,j){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return T.prototype[K].apply(b,ce)}}function D(g){const T=g.length;if(0<T){const A=Array(T);for(let b=0;b<T;b++)A[b]=g[b];return A}return[]}function V(g,T){for(let A=1;A<arguments.length;A++){const b=arguments[A];if(p(b)){const K=g.length||0,j=b.length||0;g.length=K+j;for(let ce=0;ce<j;ce++)g[K+ce]=b[ce]}else g.push(b)}}class H{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function z(g){return/^[\s\xa0]*$/.test(g)}function G(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function ee(g){return ee[" "](g),g}ee[" "]=function(){};var ne=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function fe(g,T,A){for(const b in g)T.call(A,g[b],b,g)}function U(g,T){for(const A in g)T.call(void 0,g[A],A,g)}function M(g){const T={};for(const A in g)T[A]=g[A];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(g,T){let A,b;for(let K=1;K<arguments.length;K++){b=arguments[K];for(A in b)g[A]=b[A];for(let j=0;j<N.length;j++)A=N[j],Object.prototype.hasOwnProperty.call(b,A)&&(g[A]=b[A])}}function O(g){var T=1;g=g.split(":");const A=[];for(;0<T&&g.length;)A.push(g.shift()),T--;return g.length&&A.push(g.join(":")),A}function q(g){h.setTimeout(()=>{throw g},0)}function L(){var g=Ze;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class Dt{constructor(){this.h=this.g=null}add(T,A){const b=We.get();b.set(T,A),this.h?this.h.next=b:this.g=b,this.h=b}}var We=new H(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ce=!1,Ze=new Dt,F=()=>{const g=h.Promise.resolve(void 0);de=()=>{g.then(ae)}};var ae=()=>{for(var g;g=L();){try{g.h.call(g.g)}catch(A){q(A)}var T=We;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}Ce=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};h.addEventListener("test",A,T),h.removeEventListener("test",A,T)}catch{}return g}();function Fe(g,T){if(le.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(ne){e:{try{ee(T.nodeName);var K=!0;break e}catch{}K=!1}K||(T=null)}}else A=="mouseover"?T=g.fromElement:A=="mouseout"&&(T=g.toElement);this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ne[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Fe.aa.h.call(this)}}I(Fe,le);var Ne={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),dt=0;function pi(g,T,A,b,K){this.listener=g,this.proxy=null,this.src=T,this.type=A,this.capture=!!b,this.ha=K,this.key=++dt,this.da=this.fa=!1}function Mr(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ki(g){this.src=g,this.g={},this.h=0}Ki.prototype.add=function(g,T,A,b,K){var j=g.toString();g=this.g[j],g||(g=this.g[j]=[],this.h++);var ce=Vs(g,T,b,K);return-1<ce?(T=g[ce],A||(T.fa=!1)):(T=new pi(T,this.src,j,!!b,K),T.fa=A,g.push(T)),T};function ks(g,T){var A=T.type;if(A in g.g){var b=g.g[A],K=Array.prototype.indexOf.call(b,T,void 0),j;(j=0<=K)&&Array.prototype.splice.call(b,K,1),j&&(Mr(T),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Vs(g,T,A,b){for(var K=0;K<g.length;++K){var j=g[K];if(!j.da&&j.listener==T&&j.capture==!!A&&j.ha==b)return K}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),yl={};function Ac(g,T,A,b,K){if(Array.isArray(T)){for(var j=0;j<T.length;j++)Ac(g,T[j],A,b,K);return null}return A=xc(A),g&&g[Kt]?g.K(T,A,m(b)?!!b.capture:!1,K):qn(g,T,A,!1,b,K)}function qn(g,T,A,b,K,j){if(!T)throw Error("Invalid event type");var ce=m(K)?!!K.capture:!!K,Ke=zo(g);if(Ke||(g[Ls]=Ke=new Ki(g)),A=Ke.add(T,A,b,ce,j),A.proxy)return A;if(b=wh(),A.proxy=b,b.src=g,b.listener=A,g.addEventListener)Ae||(K=ce),K===void 0&&(K=!1),g.addEventListener(T.toString(),b,K);else if(g.attachEvent)g.attachEvent(Us(T.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return A}function wh(){function g(A){return T.call(g.src,g.listener,A)}const T=Rh;return g}function vl(g,T,A,b,K){if(Array.isArray(T))for(var j=0;j<T.length;j++)vl(g,T[j],A,b,K);else b=m(b)?!!b.capture:!!b,A=xc(A),g&&g[Kt]?(g=g.i,T=String(T).toString(),T in g.g&&(j=g.g[T],A=Vs(j,A,b,K),-1<A&&(Mr(j[A]),Array.prototype.splice.call(j,A,1),j.length==0&&(delete g.g[T],g.h--)))):g&&(g=zo(g))&&(T=g.g[T.toString()],g=-1,T&&(g=Vs(T,A,b,K)),(A=-1<g?T[g]:null)&&qo(A))}function qo(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[Kt])ks(T.i,g);else{var A=g.type,b=g.proxy;T.removeEventListener?T.removeEventListener(A,b,g.capture):T.detachEvent?T.detachEvent(Us(A),b):T.addListener&&T.removeListener&&T.removeListener(b),(A=zo(T))?(ks(A,g),A.h==0&&(A.src=null,T[Ls]=null)):Mr(g)}}}function Us(g){return g in yl?yl[g]:yl[g]="on"+g}function Rh(g,T){if(g.da)g=!0;else{T=new Fe(T,this);var A=g.listener,b=g.ha||g.src;g.fa&&qo(g),g=A.call(b,T)}return g}function zo(g){return g=g[Ls],g instanceof Ki?g:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function xc(g){return typeof g=="function"?g:(g[_l]||(g[_l]=function(T){return g.handleEvent(T)}),g[_l])}function Et(){he.call(this),this.i=new Ki(this),this.M=this,this.F=null}I(Et,he),Et.prototype[Kt]=!0,Et.prototype.removeEventListener=function(g,T,A,b){vl(this,g,T,A,b)};function it(g,T){var A,b=g.F;if(b)for(A=[];b;b=b.F)A.push(b);if(g=g.M,b=T.type||T,typeof T=="string")T=new le(T,g);else if(T instanceof le)T.target=T.target||g;else{var K=T;T=new le(b,g),P(T,K)}if(K=!0,A)for(var j=A.length-1;0<=j;j--){var ce=T.g=A[j];K=In(ce,b,!0,T)&&K}if(ce=T.g=g,K=In(ce,b,!0,T)&&K,K=In(ce,b,!1,T)&&K,A)for(j=0;j<A.length;j++)ce=T.g=A[j],K=In(ce,b,!1,T)&&K}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var A=g.g[T],b=0;b<A.length;b++)Mr(A[b]);delete g.g[T],g.h--}}this.F=null},Et.prototype.K=function(g,T,A,b){return this.i.add(String(g),T,!1,A,b)},Et.prototype.L=function(g,T,A,b){return this.i.add(String(g),T,!0,A,b)};function In(g,T,A,b){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,j=0;j<T.length;++j){var ce=T[j];if(ce&&!ce.da&&ce.capture==A){var Ke=ce.listener,qt=ce.ha||ce.src;ce.fa&&ks(g.i,ce),K=Ke.call(qt,b)!==!1&&K}}return K&&!b.defaultPrevented}function un(g,T,A){if(typeof g=="function")A&&(g=C(g,A));else if(g&&typeof g.handleEvent=="function")g=C(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(g,T||0)}function wc(g){g.g=un(()=>{g.g=null,g.i&&(g.i=!1,wc(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class Ih extends he{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:wc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(g){he.call(this),this.h=g,this.g={}}I(Os,he);var Fs=[];function Bs(g){fe(g.g,function(T,A){this.g.hasOwnProperty(A)&&qo(T)},g),g.g={}}Os.prototype.N=function(){Os.aa.N.call(this),Bs(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ni=h.JSON.stringify,Go=h.JSON.parse,qs=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function Tl(){}Tl.prototype.h=null;function El(g){return g.h||(g.h=g.i())}function Cl(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ji(){le.call(this,"d")}I(Ji,le);function Sl(){le.call(this,"c")}I(Sl,le);var gi={},Al=null;function Dr(){return Al=Al||new Et}gi.La="serverreachability";function Ho(g){le.call(this,gi.La,g)}I(Ho,le);function Pr(g){const T=Dr();it(T,new Ho(T))}gi.STAT_EVENT="statevent";function Rc(g,T){le.call(this,gi.STAT_EVENT,g),this.stat=T}I(Rc,le);function gt(g){const T=Dr();it(T,new Rc(T,g))}gi.Ma="timingevent";function Bt(g,T){le.call(this,gi.Ma,g),this.size=T}I(Bt,le);function Pt(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},T)}function zn(){this.g=!0}zn.prototype.xa=function(){this.g=!1};function xl(g,T,A,b,K,j){g.info(function(){if(g.g)if(j)for(var ce="",Ke=j.split("&"),qt=0;qt<Ke.length;qt++){var Ye=Ke[qt].split("=");if(1<Ye.length){var Jt=Ye[0];Ye=Ye[1];var zt=Jt.split("_");ce=2<=zt.length&&zt[1]=="type"?ce+(Jt+"="+Ye+"&"):ce+(Jt+"=redacted&")}}else ce=null;else ce=j;return"XMLHTTP REQ ("+b+") [attempt "+K+"]: "+T+`
`+A+`
`+ce})}function bh(g,T,A,b,K,j,ce){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+K+"]: "+T+`
`+A+`
`+j+" "+ce})}function kr(g,T,A,b){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+zs(g,A)+(b?" "+b:"")})}function Ic(g,T){g.info(function(){return"TIMEOUT: "+T})}zn.prototype.info=function(){};function zs(g,T){if(!g.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var b=A[g];if(!(2>b.length)){var K=b[1];if(Array.isArray(K)&&!(1>K.length)){var j=K[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ce=1;ce<K.length;ce++)K[ce]=""}}}}return ni(A)}catch{return T}}var Vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yi;function vi(){}I(vi,Tl),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},yi=new vi;function yn(g,T,A,b){this.j=g,this.i=T,this.l=A,this.R=b||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var wl={},$o={};function ii(g,T,A){g.L=1,g.v=Ys(bn(T)),g.m=A,g.P=!0,Wi(g,null)}function Wi(g,T){g.F=Date.now(),Gs(g),g.A=bn(g.v);var A=g.A,b=g.R;Array.isArray(b)||(b=[String(b)]),Dl(A.i,"t",b),g.C=0,A=g.j.J,g.h=new wt,g.g=Hc(g.j,A?T:null,!g.m),0<g.O&&(g.M=new Ih(C(g.Y,g,g.g),g.O)),T=g.U,A=g.g,b=g.ca;var K="readystatechange";Array.isArray(K)||(K&&(Fs[0]=K.toString()),K=Fs);for(var j=0;j<K.length;j++){var ce=Ac(A,K[j],b||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=g.H?M(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),Pr(),xl(g.i,g.u,g.A,g.l,g.R,g.m)}yn.prototype.ca=function(g){g=g.target;const T=this.M;T&&Kn(g)==3?T.j():this.Y(g)},yn.prototype.Y=function(g){try{if(g==this.g)e:{const zt=Kn(this.g);var T=this.g.Ba();const rr=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Lc(this.g)))){this.J||zt!=4||T==7||(T==8||0>=rr?Pr(3):Pr(2)),Lr(this);var A=this.g.Z();this.X=A;t:if(bc(this)){var b=Lc(this.g);g="";var K=b.length,j=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),_i(this);var ce="";break t}this.h.i=new h.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,g+=this.h.i.decode(b[T],{stream:!(j&&T==K-1)});b.length=0,this.h.g+=g,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=A==200,bh(this.i,this.u,this.A,this.l,this.R,zt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,qt=this.g;if((Ke=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ke)){var Ye=Ke;break t}}Ye=null}if(A=Ye)kr(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,A);else{this.o=!1,this.s=3,gt(12),Zt(this),_i(this);break e}}if(this.P){A=!0;let en;for(;!this.J&&this.C<ce.length;)if(en=Nc(this,ce),en==$o){zt==4&&(this.s=4,gt(14),A=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(en==wl){this.s=4,gt(15),kr(this.i,this.l,ce,"[Invalid Chunk]"),A=!1;break}else kr(this.i,this.l,en,null),Hs(this,en);if(bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ce.length!=0||this.h.h||(this.s=1,gt(16),A=!1),this.o=this.o&&A,!A)kr(this.i,this.l,ce,"[Invalid Chunked Response]"),Zt(this),_i(this);else if(0<ce.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),to(Jt),Jt.M=!0,gt(11))}}else kr(this.i,this.l,ce,null),Hs(this,ce);zt==4&&Zt(this),this.o&&!this.J&&(zt==4?qc(this.j,this):(this.o=!1,Gs(this)))}else kh(this.g),A==400&&0<ce.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Zt(this),_i(this)}}}catch{}finally{}};function bc(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Nc(g,T){var A=g.C,b=T.indexOf(`
`,A);return b==-1?$o:(A=Number(T.substring(A,b)),isNaN(A)?wl:(b+=1,b+A>T.length?$o:(T=T.slice(b,b+A),g.C=b+A,T)))}yn.prototype.cancel=function(){this.J=!0,Zt(this)};function Gs(g){g.S=Date.now()+g.I,Mc(g,g.I)}function Mc(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Pt(C(g.ba,g),T)}function Lr(g){g.B&&(h.clearTimeout(g.B),g.B=null)}yn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Ic(this.i,this.A),this.L!=2&&(Pr(),gt(17)),Zt(this),this.s=2,_i(this)):Mc(this,this.S-g)};function _i(g){g.j.G==0||g.J||qc(g.j,g)}function Zt(g){Lr(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,Bs(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function Hs(g,T){try{var A=g.j;if(A.G!=0&&(A.g==g||Rl(A.h,g))){if(!g.K&&Rl(A.h,g)&&A.G==3){try{var b=A.Da.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var K=b;if(K[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)ia(A),ta(A);else break e;Ul(A),gt(18)}}else A.za=K[1],0<A.za-A.T&&37500>K[2]&&A.F&&A.v==0&&!A.C&&(A.C=Pt(C(A.Za,A),6e3));if(1>=Yo(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ir(A,11)}else if((g.K||A.g==g)&&ia(A),!z(T))for(K=A.Da.g.parse(T),T=0;T<K.length;T++){let Ye=K[T];if(A.T=Ye[0],Ye=Ye[1],A.G==2)if(Ye[0]=="c"){A.K=Ye[1],A.ia=Ye[2];const Jt=Ye[3];Jt!=null&&(A.la=Jt,A.j.info("VER="+A.la));const zt=Ye[4];zt!=null&&(A.Aa=zt,A.j.info("SVER="+A.Aa));const rr=Ye[5];rr!=null&&typeof rr=="number"&&0<rr&&(b=1.5*rr,A.L=b,A.j.info("backChannelRequestTimeoutMs_="+b)),b=A;const en=g.g;if(en){const wi=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var j=b.h;j.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Jo(j,j.h),j.h=null))}if(b.D){const Fl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(b.ya=Fl,at(b.I,b.D,Fl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),b=A;var ce=g;if(b.qa=Gc(b,b.J?b.ia:null,b.W),ce.K){vn(b.h,ce);var Ke=ce,qt=b.L;qt&&(Ke.I=qt),Ke.B&&(Lr(Ke),Gs(Ke)),b.g=ce}else Fc(b);0<A.i.length&&na(A)}else Ye[0]!="stop"&&Ye[0]!="close"||ir(A,7);else A.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ir(A,7):Vl(A):Ye[0]!="noop"&&A.l&&A.l.ta(Ye),A.v=0)}}Pr(4)}catch{}}var Dc=class{constructor(g,T){this.g=g,this.map=T}};function Xi(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ko(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Yo(g){return g.h?1:g.g?g.g.size:0}function Rl(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Jo(g,T){g.g?g.g.add(T):g.h=T}function vn(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}Xi.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Il(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const A of g.g.values())T=T.concat(A.D);return T}return D(g.i)}function Nh(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(p(g)){for(var T=[],A=g.length,b=0;b<A;b++)T.push(g[b]);return T}T=[],A=0;for(b in g)T[A++]=g[b];return T}function Qo(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(p(g)||typeof g=="string"){var T=[];g=g.length;for(var A=0;A<g;A++)T.push(A);return T}T=[],A=0;for(const b in g)T[A++]=b;return T}}}function bl(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(p(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var A=Qo(g),b=Nh(g),K=b.length,j=0;j<K;j++)T.call(void 0,b[j],A&&A[j],g)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mh(g,T){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var b=g[A].indexOf("="),K=null;if(0<=b){var j=g[A].substring(0,b);K=g[A].substring(b+1)}else j=g[A];T(j,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function kt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof kt){this.h=g.h,Ks(this,g.j),this.o=g.o,this.g=g.g,Ur(this,g.s),this.l=g.l;var T=g.i,A=new Zi;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),ji(this,A),this.m=g.m}else g&&(T=String(g).match($s))?(this.h=!1,Ks(this,T[1]||"",!0),this.o=Gn(T[2]||""),this.g=Gn(T[3]||"",!0),Ur(this,T[4]),this.l=Gn(T[5]||"",!0),ji(this,T[6]||"",!0),this.m=Gn(T[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}kt.prototype.toString=function(){var g=[],T=this.j;T&&g.push(Js(T,Nl,!0),":");var A=this.g;return(A||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Js(T,Nl,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Js(A,A.charAt(0)=="/"?Dh:Ml,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Js(A,Wo)),g.join("")};function bn(g){return new kt(g)}function Ks(g,T,A){g.j=A?Gn(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Ur(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function ji(g,T,A){T instanceof Zi?(g.i=T,kc(g.i,g.h)):(A||(T=Js(T,Ph)),g.i=new Zi(T,g.h))}function at(g,T,A){g.i.set(T,A)}function Ys(g){return at(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Gn(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Js(g,T,A){return typeof g=="string"?(g=encodeURI(g).replace(T,Pc),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Pc(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Nl=/[#\/\?@]/g,Ml=/[#\?:]/g,Dh=/[#\?]/g,Ph=/[#\?@]/g,Wo=/#/g;function Zi(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function Hn(g){g.g||(g.g=new Map,g.h=0,g.i&&Mh(g.i,function(T,A){g.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=Zi.prototype,t.add=function(g,T){Hn(this),this.i=null,g=Ti(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(T),this.h+=1,this};function er(g,T){Hn(g),T=Ti(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function tr(g,T){return Hn(g),T=Ti(g,T),g.g.has(T)}t.forEach=function(g,T){Hn(this),this.g.forEach(function(A,b){A.forEach(function(K){g.call(T,K,b,this)},this)},this)},t.na=function(){Hn(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let b=0;b<T.length;b++){const K=g[b];for(let j=0;j<K.length;j++)A.push(T[b])}return A},t.V=function(g){Hn(this);let T=[];if(typeof g=="string")tr(this,g)&&(T=T.concat(this.g.get(Ti(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)T=T.concat(g[A])}return T},t.set=function(g,T){return Hn(this),this.i=null,g=Ti(this,g),tr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},t.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function Dl(g,T,A){er(g,T),0<A.length&&(g.i=null,g.g.set(Ti(g,T),D(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var b=T[A];const j=encodeURIComponent(String(b)),ce=this.V(b);for(b=0;b<ce.length;b++){var K=j;ce[b]!==""&&(K+="="+encodeURIComponent(String(ce[b]))),g.push(K)}}return this.i=g.join("&")};function Ti(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function kc(g,T){T&&!g.j&&(Hn(g),g.i=null,g.g.forEach(function(A,b){var K=b.toLowerCase();b!=K&&(er(this,b),Dl(this,K,A))},g)),g.j=T}function Qs(g,T){const A=new zn;if(h.Image){const b=new Image;b.onload=w($n,A,"TestLoadImage: loaded",!0,T,b),b.onerror=w($n,A,"TestLoadImage: error",!1,T,b),b.onabort=w($n,A,"TestLoadImage: abort",!1,T,b),b.ontimeout=w($n,A,"TestLoadImage: timeout",!1,T,b),h.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else T(!1)}function ri(g,T){const A=new zn,b=new AbortController,K=setTimeout(()=>{b.abort(),$n(A,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:b.signal}).then(j=>{clearTimeout(K),j.ok?$n(A,"TestPingServer: ok",!0,T):$n(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),$n(A,"TestPingServer: error",!1,T)})}function $n(g,T,A,b,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),b(A)}catch{}}function Ws(){this.g=new qs}function Ei(g,T,A){const b=A||"";try{bl(g,function(K,j){let ce=K;m(K)&&(ce=ni(K)),T.push(b+j+"="+encodeURIComponent(ce))})}catch(K){throw T.push(b+"type="+encodeURIComponent("_badmap")),K}}function Or(g){this.l=g.Ub||null,this.j=g.eb||!1}I(Or,Tl),Or.prototype.g=function(){return new nr(this.l,this.j)},Or.prototype.i=function(g){return function(){return g}}({});function nr(g,T){Et.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(nr,Et),t=nr.prototype,t.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Si(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Ci(this):Si(this),this.readyState==3&&Pl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Ci(this))},t.Qa=function(g){this.g&&(this.response=g,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Si(g)}t.setRequestHeader=function(g,T){this.u.append(g,T)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=T.next();return g.join(`\r
`)};function Si(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function kl(g){let T="";return fe(g,function(A,b){T+=b,T+=":",T+=A,T+=`\r
`}),T}function Yt(g,T,A){e:{for(b in A){var b=!1;break e}b=!0}b||(A=kl(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):at(g,T,A))}function tt(g){Et.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(tt,Et);var Xo=/^https?$/i,Xs=["POST","PUT"];t=tt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,T,A,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yi.g(),this.v=this.o?El(this.o):El(yi),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(j){Vc(this,j);return}if(g=A||"",A=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var K in b)A.set(K,b[K]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())A.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(A.keys()).find(j=>j.toLowerCase()=="content-type"),K=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Xs,T,void 0))||b||K||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ce]of A)this.g.setRequestHeader(j,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(g),this.u=!1}catch(j){Vc(this,j)}};function Vc(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,jo(g),Ai(g)}function jo(g){g.A||(g.A=!0,it(g,"complete"),it(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,it(this,"complete"),it(this,"abort"),Ai(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zo(this):this.bb())},t.bb=function(){Zo(this)};function Zo(g){if(g.h&&typeof u<"u"&&(!g.v[1]||Kn(g)!=4||g.Z()!=2)){if(g.u&&Kn(g)==4)un(g.Ea,0,g);else if(it(g,"readystatechange"),Kn(g)==4){g.h=!1;try{const ce=g.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var b;if(b=ce===0){var K=String(g.D).match($s)[1]||null;!K&&h.self&&h.self.location&&(K=h.self.location.protocol.slice(0,-1)),b=!Xo.test(K?K.toLowerCase():"")}A=b}if(A)it(g,"complete"),it(g,"success");else{g.m=6;try{var j=2<Kn(g)?g.g.statusText:""}catch{j=""}g.l=j+" ["+g.Z()+"]",jo(g)}}finally{Ai(g)}}}}function Ai(g,T){if(g.g){js(g);const A=g.g,b=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||it(g,"ready");try{A.onreadystatechange=b}catch{}}}function js(g){g.I&&(h.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Kn(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Go(T)}};function Lc(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function kh(g){const T={};g=(g.g&&2<=Kn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(z(g[b]))continue;var A=O(g[b]);const K=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const j=T[K]||[];T[K]=j,j.push(A)}U(T,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(g,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||T}function ea(g){this.Aa=0,this.i=[],this.j=new zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zs("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zs("baseRetryDelayMs",5e3,g),this.cb=Zs("retryDelaySeedMs",1e4,g),this.Wa=Zs("forwardChannelMaxRetries",2,g),this.wa=Zs("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(g&&g.concurrentRequestLimit),this.Da=new Ws,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ea.prototype,t.la=8,t.G=1,t.connect=function(g,T,A,b){gt(0),this.W=g,this.H=T||{},A&&b!==void 0&&(this.H.OSID=A,this.H.OAID=b),this.F=this.X,this.I=Gc(this,null,this.W),na(this)};function Vl(g){if(Uc(g),g.G==3){var T=g.U++,A=bn(g.I);if(at(A,"SID",g.K),at(A,"RID",T),at(A,"TYPE","terminate"),eo(g,A),T=new yn(g,g.j,T),T.L=2,T.v=Ys(bn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=T.v,A=!0),A||(T.g=Hc(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Gs(T)}zc(g)}function ta(g){g.g&&(to(g),g.g.cancel(),g.g=null)}function Uc(g){ta(g),g.u&&(h.clearTimeout(g.u),g.u=null),ia(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function na(g){if(!Ko(g.h)&&!g.s){g.s=!0;var T=g.Ga;de||F(),Ce||(de(),Ce=!0),Ze.add(T,g),g.B=0}}function Vh(g,T){return Yo(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Pt(C(g.Ga,g,T),Ol(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const K=new yn(this,this.j,g);let j=this.o;if(this.S&&(j?(j=M(j),P(j,this.S)):j=this.S),this.m!==null||this.O||(K.H=j,j=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var b=this.i[A];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=Oc(this,K,T),A=bn(this.I),at(A,"RID",g),at(A,"CVER",22),this.D&&at(A,"X-HTTP-Session-Id",this.D),eo(this,A),j&&(this.O?T="headers="+encodeURIComponent(String(kl(j)))+"&"+T:this.m&&Yt(A,this.m,j)),Jo(this.h,K),this.Ua&&at(A,"TYPE","init"),this.P?(at(A,"$req",T),at(A,"SID","null"),K.T=!0,ii(K,A,null)):ii(K,A,T),this.G=2}}else this.G==3&&(g?Ll(this,g):this.i.length==0||Ko(this.h)||Ll(this))};function Ll(g,T){var A;T?A=T.l:A=g.U++;const b=bn(g.I);at(b,"SID",g.K),at(b,"RID",A),at(b,"AID",g.T),eo(g,b),g.m&&g.o&&Yt(b,g.m,g.o),A=new yn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Oc(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Jo(g.h,A),ii(A,b,T)}function eo(g,T){g.H&&fe(g.H,function(A,b){at(T,b,A)}),g.l&&bl({},function(A,b){at(T,b,A)})}function Oc(g,T,A){A=Math.min(g.i.length,A);var b=g.l?C(g.l.Na,g.l,g):null;e:{var K=g.i;let j=-1;for(;;){const ce=["count="+A];j==-1?0<A?(j=K[0].g,ce.push("ofs="+j)):j=0:ce.push("ofs="+j);let Ke=!0;for(let qt=0;qt<A;qt++){let Ye=K[qt].g;const Jt=K[qt].map;if(Ye-=j,0>Ye)j=Math.max(0,K[qt].g-100),Ke=!1;else try{Ei(Jt,ce,"req"+Ye+"_")}catch{b&&b(Jt)}}if(Ke){b=ce.join("&");break e}}}return g=g.i.splice(0,A),T.D=g,b}function Fc(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;de||F(),Ce||(de(),Ce=!0),Ze.add(T,g),g.v=0}}function Ul(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Pt(C(g.Fa,g),Ol(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Pt(C(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ta(this),Bc(this))};function to(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Bc(g){g.g=new yn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=bn(g.qa);at(T,"RID","rpc"),at(T,"SID",g.K),at(T,"AID",g.T),at(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&at(T,"TO",g.ja),at(T,"TYPE","xmlhttp"),eo(g,T),g.m&&g.o&&Yt(T,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Ys(bn(T)),A.m=null,A.P=!0,Wi(A,g)}t.Za=function(){this.C!=null&&(this.C=null,ta(this),Ul(this),gt(19))};function ia(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function qc(g,T){var A=null;if(g.g==T){ia(g),to(g),g.g=null;var b=2}else if(Rl(g.h,T))A=T.D,vn(g.h,T),b=1;else return;if(g.G!=0){if(T.o)if(b==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var K=g.B;b=Dr(),it(b,new Bt(b,A)),na(g)}else Fc(g);else if(K=T.s,K==3||K==0&&0<T.X||!(b==1&&Vh(g,T)||b==2&&Ul(g)))switch(A&&0<A.length&&(T=g.h,T.i=T.i.concat(A)),K){case 1:ir(g,5);break;case 4:ir(g,10);break;case 3:ir(g,6);break;default:ir(g,2)}}}function Ol(g,T){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*T}function ir(g,T){if(g.j.info("Error code "+T),T==2){var A=C(g.fb,g),b=g.Xa;const K=!b;b=new kt(b||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ks(b,"https"),Ys(b),K?Qs(b.toString(),A):ri(b.toString(),A)}else gt(2);g.G=0,g.l&&g.l.sa(T),zc(g),Uc(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function zc(g){if(g.G=0,g.ka=[],g.l){const T=Il(g.h);(T.length!=0||g.i.length!=0)&&(V(g.ka,T),V(g.ka,g.i),g.h.i.length=0,D(g.i),g.i.length=0),g.l.ra()}}function Gc(g,T,A){var b=A instanceof kt?bn(A):new kt(A);if(b.g!="")T&&(b.g=T+"."+b.g),Ur(b,b.s);else{var K=h.location;b=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var j=new kt(null);b&&Ks(j,b),T&&(j.g=T),K&&Ur(j,K),A&&(j.l=A),b=j}return A=g.D,T=g.ya,A&&T&&at(b,A,T),at(b,"VER",g.la),eo(g,b),b}function Hc(g,T,A){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new tt(new Or({eb:A})):new tt(g.pa),T.Ha(g.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}t=$c.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ra(){}ra.prototype.g=function(g,T){return new _n(g,T)};function _n(g,T){Et.call(this),this.g=new ea(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!z(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!z(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new xi(this)}I(_n,Et),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Vl(this.g)},_n.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=ni(g),g=A);T.i.push(new Dc(T.Ya++,g)),T.G==3&&na(T)},_n.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,_n.aa.N.call(this)};function Kc(g){Ji.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const A in T){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}I(Kc,Ji);function Yc(){Sl.call(this),this.status=1}I(Yc,Sl);function xi(g){this.g=g}I(xi,$c),xi.prototype.ua=function(){it(this.g,"a")},xi.prototype.ta=function(g){it(this.g,new Kc(g))},xi.prototype.sa=function(g){it(this.g,new Yc)},xi.prototype.ra=function(){it(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,lx=function(){return new ra},ax=function(){return Dr()},ox=gi,ug={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,hd=Vr,Qi.COMPLETE="complete",sx=Qi,Cl.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,ku=Cl,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,rx=tt}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore",h0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new sy("@firebase/firestore");function ka(){return Ro.logLevel}function pe(t,...e){if(Ro.logLevel<=Ge.DEBUG){const n=e.map(yy);Ro.debug(`Firestore (${ul}): ${t}`,...n)}}function xr(t,...e){if(Ro.logLevel<=Ge.ERROR){const n=e.map(yy);Ro.error(`Firestore (${ul}): ${t}`,...n)}}function Ya(t,...e){if(Ro.logLevel<=Ge.WARN){const n=e.map(yy);Ro.warn(`Firestore (${ul}): ${t}`,...n)}}function yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,ux(t,i,n)}function ux(t,e,n){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw xr(i),new Error(i)}function nt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||ux(e,r,i)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class VP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LP{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let i=this.i;const r=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let a=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vs,e.enqueueRetryable(()=>r(this.currentUser))};const u=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await r(this.currentUser)})},h=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vs)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new cx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class UP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new UP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new m0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=BP(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%62))}return i}}function Oe(t,e){return t<e?-1:t>e?1:0}function cg(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Oe(i,r);{const a=fx(),u=qP(a.encode(p0(t,n)),a.encode(p0(e,n)));return u!==0?u:Oe(i,r)}}n+=i>65535?2:1}return Oe(t.length,e.length)}function p0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function qP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Oe(t[n],e[n]);return Oe(t.length,e.length)}function Ja(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=-62135596800,y0=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*y0);return new Nt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<g0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y0}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-g0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Nt(0,0))}static max(){return new De(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__name__";class Di{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ie(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=Di.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return Oe(e.length,n.length)}static compareSegments(e,n){const i=Di.isNumericId(e),r=Di.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Di.extractNumericId(e).compare(Di.extractNumericId(n)):cg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class pt extends Di{construct(e,n,i){return new pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const zP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Di{construct(e,n,i){return new an(e,n,i)}static isValidIdentifier(e){return zP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new an([v0])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else h==="`"?(u=!u,r++):h!=="."||u?(i+=h,r++):(a(),r++)}if(a(),u)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(n)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=-1;function GP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=De.fromTimestamp(i===1e9?new Nt(n+1,0):new Nt(n,i));return new Cs(r,Se.empty(),e)}function HP(t){return new Cs(t.readTime,t.key,ju)}class Cs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Cs(De.min(),Se.empty(),ju)}static max(){return new Cs(De.max(),Se.empty(),ju)}}function $P(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==KP)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,i)=>{n(e)})}static reject(e){return new se((n,i)=>{i(e)})}static waitFor(e){return new se((n,i)=>{let r=0,a=0,u=!1;e.forEach(h=>{++r,h.next(()=>{++a,u&&a===r&&n()},p=>i(p))}),u=!0,a===r&&n()})}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next(r=>r?se.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new se((i,r)=>{const a=e.length,u=new Array(a);let h=0;for(let p=0;p<a;p++){const m=p;n(e[m]).next(v=>{u[m]=v,++h,h===a&&i(u)},v=>r(v))}})}static doWhile(e,n){return new se((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function JP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}rh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-1;function sh(t){return t==null}function Md(t){return t===0&&1/t==-1/0}function QP(t){return typeof t=="number"&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="";function WP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_0(e)),e=XP(t.get(n),e);return _0(e)}function XP(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const a=t.charAt(r);switch(a){case"\0":n+="";break;case hx:n+="";break;default:n+=a}}return n}function _0(t){return t+hx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}}class jf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??on.RED,this.left=r??on.EMPTY,this.right=a??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new on(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return on.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,i,r,a){return this}insert(e,n,i){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new On([])}unionWith(e){let n=new $t(an.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new px("Invalid base64 string: "+a):a}}(e);return new ln(n)}static fromUint8Array(e){const n=function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a}(e);return new ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=jP.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?ln.fromBase64String(t):ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="server_timestamp",yx="__type__",vx="__previous_value__",_x="__local_write_time__";function _y(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yx])===null||n===void 0?void 0:n.stringValue)===gx}function oh(t){const e=t.mapValue.fields[vx];return _y(e)?oh(e):e}function Zu(t){const e=Ss(t.mapValue.fields[_x].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,i,r,a,u,h,p,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Dd="(default)";class ec{constructor(e,n){this.projectId=e,this.database=n||Dd}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__type__",ek="__max__",Zf={mapValue:{}},Ex="__vector__",Pd="value";function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_y(t)?4:nk(t)?9007199254740991:tk(t)?10:11:Ie(28295,{value:t})}function zi(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zu(t).isEqual(Zu(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=Ss(r.timestampValue),h=Ss(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return As(r.bytesValue).isEqual(As(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return bt(r.geoPointValue.latitude)===bt(a.geoPointValue.latitude)&&bt(r.geoPointValue.longitude)===bt(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return bt(r.integerValue)===bt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=bt(r.doubleValue),h=bt(a.doubleValue);return u===h?Md(u)===Md(h):isNaN(u)&&isNaN(h)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(r,a){const u=r.mapValue.fields||{},h=a.mapValue.fields||{};if(T0(u)!==T0(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!zi(u[p],h[p])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function tc(t,e){return(t.values||[]).find(n=>zi(n,e))!==void 0}function Qa(t,e){if(t===e)return 0;const n=xs(t),i=xs(e);if(n!==i)return Oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(a,u){const h=bt(a.integerValue||a.doubleValue),p=bt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(t,e);case 3:return C0(t.timestampValue,e.timestampValue);case 4:return C0(Zu(t),Zu(e));case 5:return cg(t.stringValue,e.stringValue);case 6:return function(a,u){const h=As(a),p=As(u);return h.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const v=Oe(h[m],p[m]);if(v!==0)return v}return Oe(h.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Oe(bt(a.latitude),bt(u.latitude));return h!==0?h:Oe(bt(a.longitude),bt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return S0(t.arrayValue,e.arrayValue);case 10:return function(a,u){var h,p,m,v;const E=a.fields||{},C=u.fields||{},w=(h=E[Pd])===null||h===void 0?void 0:h.arrayValue,I=(p=C[Pd])===null||p===void 0?void 0:p.arrayValue,D=Oe(((m=w==null?void 0:w.values)===null||m===void 0?void 0:m.length)||0,((v=I==null?void 0:I.values)===null||v===void 0?void 0:v.length)||0);return D!==0?D:S0(w,I)}(t.mapValue,e.mapValue);case 11:return function(a,u){if(a===Zf.mapValue&&u===Zf.mapValue)return 0;if(a===Zf.mapValue)return 1;if(u===Zf.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const C=cg(p[E],v[E]);if(C!==0)return C;const w=Qa(h[p[E]],m[v[E]]);if(w!==0)return w}return Oe(p.length,v.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{Pe:n})}}function C0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=Ss(t),i=Ss(e),r=Oe(n.seconds,i.seconds);return r!==0?r:Oe(n.nanos,i.nanos)}function S0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Qa(n[r],i[r]);if(a)return a}return Oe(n.length,i.length)}function Wa(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ss(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=fg(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${fg(n.fields[u])}`;return r+"}"}(t.mapValue):Ie(61005,{value:t})}function md(t){switch(xs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(t);return e?16+md(e):16;case 5:return 2*t.stringValue.length;case 6:return As(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,a)=>r+md(a),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ds(i.fields,(a,u)=>{r+=a.length+md(u)}),r}(t.mapValue);default:throw Ie(13486,{value:t})}}function A0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dg(t){return!!t&&"integerValue"in t}function Ty(t){return!!t&&"arrayValue"in t}function x0(t){return!!t&&"nullValue"in t}function w0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pd(t){return!!t&&"mapValue"in t}function tk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tx])===null||n===void 0?void 0:n.stringValue)===Ex}function zu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=zu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ek}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(n)}setAll(e){let n=an.emptyPath(),i={},r=[];e.forEach((u,h)=>{if(!n.isImmediateParentOf(h)){const p=this.getFieldsMap(n);this.applyChanges(p,i,r),i={},r=[],n=h.popLast()}u?i[h.lastSegment()]=zu(u):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];pd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ds(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new Rn(zu(this.value))}}function Cx(t){const e=[];return Ds(t.fields,(n,i)=>{const r=new an([n]);if(pd(i)){const a=Cx(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,i,r,a,u,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new mn(e,0,De.min(),De.min(),De.min(),Rn.empty(),0)}static newFoundDocument(e,n,i,r){return new mn(e,1,n,De.min(),i,r,0)}static newNoDocument(e,n){return new mn(e,2,n,De.min(),De.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,De.min(),De.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.position=e,this.inclusive=n}}function R0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],u=t.position[r];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),n.key):i=Qa(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function I0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function ik(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{}class Ft extends Sx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sk(e,n,i):n==="array-contains"?new lk(e,i):n==="in"?new uk(e,i):n==="not-in"?new ck(e,i):n==="array-contains-any"?new fk(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ok(e,i):new ak(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends Sx{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new hi(e,n)}matches(e){return Ax(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ax(t){return t.op==="and"}function xx(t){return rk(t)&&Ax(t)}function rk(t){for(const e of t.filters)if(e instanceof hi)return!1;return!0}function hg(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(xx(t))return t.filters.map(e=>hg(e)).join(",");{const e=t.filters.map(n=>hg(n)).join(",");return`${t.op}(${e})`}}function wx(t,e){return t instanceof Ft?function(i,r){return r instanceof Ft&&i.op===r.op&&i.field.isEqual(r.field)&&zi(i.value,r.value)}(t,e):t instanceof hi?function(i,r){return r instanceof hi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,u,h)=>a&&wx(u,r.filters[h]),!0):!1}(t,e):void Ie(19439)}function Rx(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(t):t instanceof hi?function(n){return n.op.toString()+" {"+n.getFilters().map(Rx).join(" ,")+"}"}(t):"Filter"}class sk extends Ft{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class ok extends Ft{constructor(e,n){super(e,"in",n),this.keys=Ix("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ak extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=Ix("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ix(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Se.fromName(i.referenceValue))}class lk extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ty(n)&&tc(n.arrayValue,this.value)}}class uk extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class ck extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tc(this.value.arrayValue,n)}}class fk extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>tc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n=null,i=[],r=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=h,this.Ie=null}}function b0(t,e=null,n=[],i=[],r=null,a=null,u=null){return new dk(t,e,n,i,r,a,u)}function Ey(t){const e=ke(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>hg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Wa(i)).join(",")),e.Ie=n}return e.Ie}function Cy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ik(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I0(t.startAt,e.startAt)&&I0(t.endAt,e.endAt)}function mg(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n=null,i=[],r=[],a=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function hk(t,e,n,i,r,a,u,h){return new dl(t,e,n,i,r,a,u,h)}function bx(t){return new dl(t)}function N0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nx(t){return t.collectionGroup!==null}function Gu(t){const e=ke(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new $t(an.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new nc(a,i))}),n.has(an.keyField().canonicalString())||e.Ee.push(new nc(an.keyField(),i))}return e.Ee}function Fi(t){const e=ke(t);return e.de||(e.de=mk(e,Gu(t))),e.de}function mk(t,e){if(t.limitType==="F")return b0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new nc(r.field,a)});const n=t.endAt?new kd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kd(t.startAt.position,t.startAt.inclusive):null;return b0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function pg(t,e){const n=t.filters.concat([e]);return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gg(t,e,n){return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ah(t,e){return Cy(Fi(t),Fi(e))&&t.limitType===e.limitType}function Mx(t){return`${Ey(Fi(t))}|lt:${t.limitType}`}function Va(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Rx(r)).join(", ")}]`),sh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Wa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Wa(r)).join(",")),`Target(${i})`}(Fi(t))}; limitType=${t.limitType})`}function lh(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of Gu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(u,h,p){const m=R0(u,h,p);return u.inclusive?m<=0:m<0}(i.startAt,Gu(i),r)||i.endAt&&!function(u,h,p){const m=R0(u,h,p);return u.inclusive?m>=0:m>0}(i.endAt,Gu(i),r))}(t,e)}function pk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dx(t){return(e,n)=>{let i=!1;for(const r of Gu(t)){const a=gk(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function gk(t,e,n){const i=t.field.isKeyField()?Se.comparator(e.key,n.key):function(a,u,h){const p=u.data.field(a),m=h.data.field(a);return p!==null&&m!==null?Qa(p,m):Ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return mx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Tt(Se.comparator);function wr(){return yk}const Px=new Tt(Se.comparator);function Vu(...t){let e=Px;for(const n of t)e=e.insert(n.key,n);return e}function kx(t){let e=Px;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function To(){return Hu()}function Vx(){return Hu()}function Hu(){return new Uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const vk=new Tt(Se.comparator),_k=new $t(Se.comparator);function He(...t){let e=_k;for(const n of t)e=e.add(n);return e}const Tk=new $t(Oe);function Ek(){return Tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function Lx(t){return{integerValue:""+t}}function Ck(t,e){return QP(e)?Lx(e):Sy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function Sk(t,e,n){return t instanceof Vd?function(r,a){const u={fields:{[yx]:{stringValue:gx},[_x]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&_y(a)&&(a=oh(a)),a&&(u.fields[vx]=a),{mapValue:u}}(n,e):t instanceof ic?Ox(t,e):t instanceof rc?Fx(t,e):function(r,a){const u=Ux(r,a),h=M0(u)+M0(r.Re);return dg(u)&&dg(r.Re)?Lx(h):Sy(r.serializer,h)}(t,e)}function Ak(t,e,n){return t instanceof ic?Ox(t,e):t instanceof rc?Fx(t,e):n}function Ux(t,e){return t instanceof Ld?function(i){return dg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Vd extends uh{}class ic extends uh{constructor(e){super(),this.elements=e}}function Ox(t,e){const n=Bx(e);for(const i of t.elements)n.some(r=>zi(r,i))||n.push(i);return{arrayValue:{values:n}}}class rc extends uh{constructor(e){super(),this.elements=e}}function Fx(t,e){let n=Bx(e);for(const i of t.elements)n=n.filter(r=>!zi(r,i));return{arrayValue:{values:n}}}class Ld extends uh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function M0(t){return bt(t.integerValue||t.doubleValue)}function Bx(t){return Ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xk(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ic&&r instanceof ic||i instanceof rc&&r instanceof rc?Ja(i.elements,r.elements,zi):i instanceof Ld&&r instanceof Ld?zi(i.Re,r.Re):i instanceof Vd&&r instanceof Vd}(t.transform,e.transform)}class wk{constructor(e,n){this.version=e,this.transformResults=n}}class ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ch{}function qx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ay(t.key,ci.none()):new yc(t.key,t.data,ci.none());{const n=t.data,i=Rn.empty();let r=new $t(an.comparator);for(let a of e.fields)if(!r.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new Ps(t.key,i,new On(r.toArray()),ci.none())}}function Rk(t,e,n){t instanceof yc?function(r,a,u){const h=r.value.clone(),p=P0(r.fieldTransforms,a,u.transformResults);h.setAll(p),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(r,a,u){if(!gd(r.precondition,a))return void a.convertToUnknownDocument(u.version);const h=P0(r.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(zx(r)),p.setAll(h),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(t,e,n):function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function $u(t,e,n,i){return t instanceof yc?function(a,u,h,p){if(!gd(a.precondition,u))return h;const m=a.value.clone(),v=k0(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ps?function(a,u,h,p){if(!gd(a.precondition,u))return h;const m=k0(a.fieldTransforms,p,u),v=u.data;return v.setAll(zx(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(t,e,n,i):function(a,u,h){return gd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(t,e,n)}function Ik(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=Ux(i.transform,r||null);a!=null&&(n===null&&(n=Rn.empty()),n.set(i.field,a))}return n||null}function D0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ja(i,r,(a,u)=>xk(a,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends ch{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ps extends ch{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function P0(t,e,n){const i=new Map;nt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const a=t[r],u=a.transform,h=e.data.field(a.field);i.set(a.field,Ak(u,h,n[r]))}return i}function k0(t,e,n){const i=new Map;for(const r of t){const a=r.transform,u=n.data.field(r.field);i.set(r.field,Sk(a,u,e))}return i}class Ay extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bk extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&Rk(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=$u(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=$u(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Vx();return this.mutations.forEach(r=>{const a=e.get(r.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(r.key)?null:h;const p=qx(u,h);p!==null&&i.set(r.key,p),u.isValidDocument()||u.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,i)=>D0(n,i))&&Ja(this.baseMutations,e.baseMutations,(n,i)=>D0(n,i))}}class xy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){nt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return vk}();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new xy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Qe;function Pk(t){switch(t){case oe.OK:return Ie(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function Gx(t){if(t===void 0)return xr("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Ut.OK:return oe.OK;case Ut.CANCELLED:return oe.CANCELLED;case Ut.UNKNOWN:return oe.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return oe.INTERNAL;case Ut.UNAVAILABLE:return oe.UNAVAILABLE;case Ut.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ut.NOT_FOUND:return oe.NOT_FOUND;case Ut.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ut.ABORTED:return oe.ABORTED;case Ut.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ut.DATA_LOSS:return oe.DATA_LOSS;default:return Ie(39323,{code:t})}}(Qe=Ut||(Ut={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new ys([4294967295,4294967295],0);function V0(t){const e=fx().encode(t),n=new ix;return n.update(e),new Uint8Array(n.digest())}function L0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ys([n,i],0),new ys([r,a],0)]}class wy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(i<0)throw new Lu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ys.fromNumber(this.pe)}we(e,n,i){let r=e.add(n.multiply(ys.fromNumber(i)));return r.compare(kk)===1&&(r=new ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=V0(e),[i,r]=L0(n);for(let a=0;a<this.hashCount;a++){const u=this.we(i,r,a);if(!this.be(u))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new wy(a,r,n);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.pe===0)return;const n=V0(e),[i,r]=L0(n);for(let a=0;a<this.hashCount;a++){const u=this.we(i,r,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fh(De.min(),r,new Tt(Oe),wr(),He())}}class vc{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vc(i,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i,r){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=r}}class Hx{constructor(e,n){this.targetId=e,this.Ce=n}}class $x{constructor(e,n,i=ln.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class U0{constructor(){this.Fe=0,this.Me=O0(),this.xe=ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=He(),n=He(),i=He();return this.Me.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ie(38017,{changeType:a})}}),new vc(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=O0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,nt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Vk{constructor(e){this.ze=e,this.je=new Map,this.He=wr(),this.Je=ed(),this.Ye=ed(),this.Ze=new Tt(Oe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,i=e.Ce.count,r=this._t(n);if(r){const a=r.target;if(mg(a))if(i===0){const u=new Se(a.path);this.tt(n,u,mn.newNoDocument(u,De.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this.ut(n);if(u!==i){const h=this.ct(e),p=h?this.lt(h,e,u):1;if(p!==0){this.st(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let u,h;try{u=As(i).toUint8Array()}catch(p){if(p instanceof px)return Ya("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new wy(u,r,a)}catch(p){return Ya(p instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.pe===0?null:h}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const u=this.ze.Pt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.tt(n,a,null),r++)}),r}It(e){const n=new Map;this.je.forEach((a,u)=>{const h=this._t(u);if(h){if(a.current&&mg(h.target)){const p=new Se(h.target.path);this.Et(p).has(u)||this.dt(u,p)||this.tt(u,p,mn.newNoDocument(p,e))}a.Le&&(n.set(u,a.qe()),a.Qe())}});let i=He();this.Ye.forEach((a,u)=>{let h=!0;u.forEachWhile(p=>{const m=this._t(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.He.forEach((a,u)=>u.setReadTime(e));const r=new fh(e,n,this.Ze,this.He,i);return this.He=wr(),this.Je=ed(),this.Ye=ed(),this.Ze=new Tt(Oe),r}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new U0,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $t(Oe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $t(Oe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new U0),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ed(){return new Tt(Se.comparator)}function O0(){return new Tt(Se.comparator)}const Lk={asc:"ASCENDING",desc:"DESCENDING"},Uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ok={and:"AND",or:"OR"};class Fk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yg(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function Ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bk(t,e){return Ud(t,e.toTimestamp())}function Bi(t){return nt(!!t,49232),De.fromTimestamp(function(n){const i=Ss(n);return new Nt(i.seconds,i.nanos)}(t))}function Ry(t,e){return vg(t,e).canonicalString()}function vg(t,e){const n=function(r){return new pt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yx(t){const e=pt.fromString(t);return nt(jx(e),10190,{key:e.toString()}),e}function _g(t,e){return Ry(t.databaseId,e.path)}function qp(t,e){const n=Yx(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(Qx(n))}function Jx(t,e){return Ry(t.databaseId,e)}function qk(t){const e=Yx(t);return e.length===4?pt.emptyPath():Qx(e)}function Tg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qx(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F0(t,e,n){return{name:_g(t,e),fields:n.value.mapValue.fields}}function zk(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(nt(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const v=m.code===void 0?oe.UNKNOWN:Gx(m.code);return new ge(v,m.message||"")}(u);n=new $x(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qp(t,i.document.name),a=Bi(i.document.updateTime),u=i.document.createTime?Bi(i.document.createTime):De.min(),h=new Rn({mapValue:{fields:i.document.fields}}),p=mn.newFoundDocument(r,a,u,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new yd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qp(t,i.document),a=i.readTime?Bi(i.readTime):De.min(),u=mn.newNoDocument(r,a),h=i.removedTargetIds||[];n=new yd([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qp(t,i.document),a=i.removedTargetIds||[];n=new yd([],a,r,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new Dk(r,a),h=i.targetId;n=new Hx(h,u)}}return n}function Gk(t,e){let n;if(e instanceof yc)n={update:F0(t,e.key,e.value)};else if(e instanceof Ay)n={delete:_g(t,e.key)};else if(e instanceof Ps)n={update:F0(t,e.key,e.data),updateMask:jk(e.fieldMask)};else{if(!(e instanceof bk))return Ie(16599,{ft:e.type});n={verify:_g(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,u){const h=u.transform;if(h instanceof Vd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ic)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof rc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ld)return{fieldPath:u.field.canonicalString(),increment:h.Re};throw Ie(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:Bk(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)}(t,e.precondition)),n}function Hk(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map(n=>function(r,a){let u=r.updateTime?Bi(r.updateTime):Bi(a);return u.isEqual(De.min())&&(u=Bi(a)),new wk(u,r.transformResults||[])}(n,e))):[]}function $k(t,e){return{documents:[Jx(t,e.path)]}}function Kk(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Jx(t,r);const a=function(m){if(m.length!==0)return Xx(hi.create(m,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(C){return{field:La(C.field),direction:Qk(C.dir)}}(v))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=yg(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:n,parent:r}}function Yk(t){let e=qk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){nt(i===1,65062);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(E){const C=Wx(E);return C instanceof hi&&xx(C)?C.getFilters():[C]}(n.where));let u=[];n.orderBy&&(u=function(E){return E.map(C=>function(I){return new nc(Ua(I.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(C))}(n.orderBy));let h=null;n.limit&&(h=function(E){let C;return C=typeof E=="object"?E.value:E,sh(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(E){const C=!!E.before,w=E.values||[];return new kd(w,C)}(n.startAt));let m=null;return n.endAt&&(m=function(E){const C=!E.before,w=E.values||[];return new kd(w,C)}(n.endAt)),hk(e,r,u,a,h,"F",p,m)}function Jk(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ua(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ua(n.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ua(n.unaryFilter.field);return Ft.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ua(n.unaryFilter.field);return Ft.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(Ua(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hi.create(n.compositeFilter.filters.map(i=>Wx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(n.compositeFilter.op))}(t):Ie(30097,{filter:t})}function Qk(t){return Lk[t]}function Wk(t){return Uk[t]}function Xk(t){return Ok[t]}function La(t){return{fieldPath:t.canonicalString()}}function Ua(t){return an.fromServerFormat(t.fieldPath)}function Xx(t){return t instanceof Ft?function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NAN"}};if(x0(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NAN"}};if(x0(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(n.field),op:Wk(n.op),value:n.value}}}(t):t instanceof hi?function(n){const i=n.getFilters().map(r=>Xx(r));return i.length===1?i[0]:{compositeFilter:{op:Xk(n.op),filters:i}}}(t):Ie(54877,{filter:t})}function jk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,i,r,a=De.min(),u=De.min(),h=ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.wt=e}}function e2(t){const e=Yk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.Cn=new n2}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Cs.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class n2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new $t(pt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new $t(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zx=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Zx,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Xa(0)}static lr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="LruGarbageCollector",i2=1048576;function z0([t,e],[n,i]){const r=Oe(t,n);return r===0?Oe(e,i):r}class r2{constructor(e){this.Er=e,this.buffer=new $t(z0),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();z0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class s2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){pe(q0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fl(n)?pe(q0,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.mr(3e5)})}}class o2{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return se.resolve(rh.le);const i=new r2(n);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(B0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,r,a,u,h,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,u=Date.now(),this.nthSequenceNumber(e,r))).next(E=>(i=E,h=Date.now(),this.removeTargets(e,i,n))).next(E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(m=Date.now(),ka()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(h-u)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:E})))}}function a2(t,e){return new o2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.changes=new Uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&$u(i.mutation,r,On.empty(),Nt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,n,i=He()){const r=To();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let u=Vu();return a.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const i=To();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,He()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((u,h)=>{n.set(u,h)})})}computeViews(e,n,i,r){let a=wr();const u=Hu(),h=function(){return Hu()}();return n.forEach((p,m)=>{const v=i.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Ps)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),$u(v.mutation,m,v.mutation.getFieldMask(),Nt.now())):u.set(m.key,On.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,v)=>u.set(m,v)),n.forEach((m,v)=>{var E;return h.set(m,new u2(v,(E=u.get(m))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const i=Hu();let r=new Tt((u,h)=>u-h),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const h of u)h.keys().forEach(p=>{const m=n.get(p);if(m===null)return;let v=i.get(p)||On.empty();v=h.applyToLocalView(m,v),i.set(p,v);const E=(r.get(h.batchId)||He()).add(p);r=r.insert(h.batchId,E)})}).next(()=>{const u=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,v=p.value,E=Vx();v.forEach(C=>{if(!a.has(C)){const w=qx(n.get(C),i.get(C));w!==null&&E.set(C,w),a=a.add(C)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):se.resolve(To());let h=ju,p=a;return u.next(m=>se.forEach(m,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next(C=>{p=p.insert(v,C)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,He())).next(v=>({batchId:h,changes:kx(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(i=>{let r=Vu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let u=Vu();return this.indexManager.getCollectionParents(e,a).next(h=>se.forEach(h,p=>{const m=function(E,C){return new dl(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,r).next(v=>{v.forEach((E,C)=>{u=u.insert(E,C)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(u=>{a.forEach((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,mn.newInvalidDocument(v)))});let h=Vu();return u.forEach((p,m)=>{const v=a.get(p);v!==void 0&&$u(v.mutation,m,On.empty(),Nt.now()),lh(n,m)&&(h=h.insert(p,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return se.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Bi(r.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:e2(r.bundledQuery),readTime:Bi(r.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.overlays=new Tt(Se.comparator),this.Qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=To();return se.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.St(e,n,a)}),se.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const r=To(),a=n.length+1,u=new Se(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&r.set(p.getKey(),p)}return se.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Tt((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=To(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=To(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=r)););return se.resolve(h)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Mk(n,i));let a=this.Qr.get(n);a===void 0&&(a=He(),this.Qr.set(n,a)),this.Qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.$r=new $t(jt.Ur),this.Kr=new $t(jt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new jt(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new jt(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Se(new pt([])),i=new jt(n,e),r=new jt(n,e+1),a=[];return this.Kr.forEachInRange([i,r],u=>{this.zr(u),a.push(u.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Se(new pt([])),i=new jt(n,e),r=new jt(n,e+1);let a=He();return this.Kr.forEachInRange([i,r],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new jt(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Se.comparator(e.key,n.key)||Oe(e.Zr,n.Zr)}static Wr(e,n){return Oe(e.Zr,n.Zr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $t(jt.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Nk(a,n,i,r);this.mutationQueue.push(u);for(const h of r)this.Xr=this.Xr.add(new jt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ti(i),a=r<0?0:r;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?vy:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jt(n,0),r=new jt(n,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,r],u=>{const h=this.ei(u.Zr);a.push(h)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new $t(Oe);return n.forEach(r=>{const a=new jt(r,0),u=new jt(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,u],h=>{i=i.add(h.Zr)})}),se.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new jt(new Se(a),0);let h=new $t(Oe);return this.Xr.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(h=h.add(p.Zr)),!0)},u),se.resolve(this.ni(h))}ni(e){const n=[];return e.forEach(i=>{const r=this.ei(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){nt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return se.forEach(n.mutations,r=>{const a=new jt(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new jt(n,0),r=this.Xr.firstAfterOrEqual(i);return se.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.ii=e,this.docs=function(){return new Tt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,u=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():mn.newInvalidDocument(r))}),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=wr();const u=n.path,h=new Se(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||$P(HP(v),i)<=0||(r.has(v.key)||lh(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,i,r){Ie(9500)}si(e,n){return se.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new g2(this)}getSize(e){return se.resolve(this.size)}}class g2 extends l2{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),se.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.persistence=e,this.oi=new Uo(n=>Ey(n),Cy),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this._i=0,this.ai=new Iy,this.targetCount=0,this.ui=Xa.cr()}forEachTarget(e,n){return this.oi.forEach((i,r)=>n(r)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),se.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Tr(n),se.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.oi.forEach((u,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),se.waitFor(a).next(()=>r)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(u=>{a.push(r.markPotentiallyOrphaned(e,u))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.ci={},this.overlays={},this.li=new rh(0),this.hi=!1,this.hi=!0,this.Pi=new h2,this.referenceDelegate=e(this),this.Ti=new y2(this),this.indexManager=new t2,this.remoteDocumentCache=function(r){return new p2(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new Zk(n),this.Ei=new f2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new m2(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){pe("MemoryPersistence","Starting transaction:",e);const r=new v2(this.li.next());return this.referenceDelegate.di(),i(r).next(a=>this.referenceDelegate.Ai(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Ri(e,n){return se.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class v2 extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.Vi=new Iy,this.mi=null}static fi(e){return new by(e)}get gi(){if(this.mi)return this.mi;throw Ie(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,i=>{const r=Se.fromPath(i);return this.pi(e,r).next(a=>{a||n.removeEntry(r,De.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return se.or([()=>se.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Od{constructor(e,n){this.persistence=e,this.yi=new Uo(i=>WP(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=a2(this,n)}static fi(e,n){return new Od(e,n)}di(){}Ai(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return se.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(a=>a?se.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.si(e,u=>this.Dr(e,u,n).next(h=>{h||(i++,a.removeEntry(u,De.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=md(e.data.value)),n}Dr(e,n,i){return se.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ds=i,this.As=r}static Rs(e,n){let i=He(),r=He();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Ny(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return e1()?8:JP(gn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.ws(e,n).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.bs(e,n,r,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new _2;return this.Ss(e,n,u).next(h=>{if(a.result=h,this.fs)return this.Ds(e,n,u,h.size)})}).next(()=>a.result)}Ds(e,n,i,r){return i.documentReadCount<this.gs?(ka()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(ka()<=Ge.DEBUG&&pe("QueryEngine","Query:",Va(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(ka()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(n))):se.resolve())}ws(e,n){if(N0(n))return se.resolve(null);let i=Fi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=gg(n,null,"F"),i=Fi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const u=He(...a);return this.ys.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const m=this.vs(n,h);return this.Cs(n,m,u,p.readTime)?this.ws(e,gg(n,null,"F")):this.Fs(e,m,n,p)}))})))}bs(e,n,i,r){return N0(n)||r.isEqual(De.min())?se.resolve(null):this.ys.getDocuments(e,i).next(a=>{const u=this.vs(n,a);return this.Cs(n,u,i,r)?se.resolve(null):(ka()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Va(n)),this.Fs(e,u,n,GP(r,ju)).next(h=>h))})}vs(e,n){let i=new $t(Dx(e));return n.forEach((r,a)=>{lh(e,a)&&(i=i.add(a))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,n,i){return ka()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Va(n)),this.ys.getDocumentsMatchingQuery(e,n,Cs.min(),i)}Fs(e,n,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="LocalStore",E2=3e8;class C2{constructor(e,n,i,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Tt(Oe),this.Os=new Uo(a=>Ey(a),Cy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function S2(t,e,n,i){return new C2(t,e,n,i)}async function tw(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],h=[];let p=He();for(const m of r){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(i,p).next(m=>({ks:m,removedBatchIds:u,addedBatchIds:h}))})})}function A2(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.Bs.newChangeBuffer({trackRemovals:!0});return function(h,p,m,v){const E=m.batch,C=E.keys();let w=se.resolve();return C.forEach(I=>{w=w.next(()=>v.getEntry(p,I)).next(D=>{const V=m.docVersions.get(I);nt(V!==null,48541),D.version.compareTo(V)<0&&(E.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))})}),w.next(()=>h.mutationQueue.removeMutationBatch(p,E))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=He();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function nw(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function x2(t,e){const n=ke(t),i=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const h=[];e.targetChanges.forEach((v,E)=>{const C=r.get(E);if(!C)return;h.push(n.Ti.removeMatchingKeys(a,v.removedDocuments,E).next(()=>n.Ti.addMatchingKeys(a,v.addedDocuments,E)));let w=C.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(ln.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),r=r.insert(E,w),function(D,V,H){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=E2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(C,w,v)&&h.push(n.Ti.updateTargetData(a,w))});let p=wr(),m=He();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(w2(a,u,e.documentUpdates).next(v=>{p=v.qs,m=v.Qs})),!i.isEqual(De.min())){const v=n.Ti.getLastRemoteSnapshotVersion(a).next(E=>n.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(v)}return se.waitFor(h).next(()=>u.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(n.xs=r,a))}function w2(t,e,n){let i=He(),r=He();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let u=wr();return n.forEach((h,p)=>{const m=a.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):pe(My,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{qs:u,Qs:r}})}function R2(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=vy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function I2(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ti.getTargetData(i,e).next(a=>a?(r=a,se.resolve(r)):n.Ti.allocateTargetId(i).next(u=>(r=new ms(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function Eg(t,e,n){const i=ke(t),r=i.xs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,r))}catch(u){if(!fl(u))throw u;pe(My,`Failed to update sequence numbers for target ${e}: ${u}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)}function G0(t,e,n){const i=ke(t);let r=De.min(),a=He();return i.persistence.runTransaction("Execute query","readwrite",u=>function(p,m,v){const E=ke(p),C=E.Os.get(v);return C!==void 0?se.resolve(E.xs.get(C)):E.Ti.getTargetData(m,v)}(i,u,Fi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(u,h.targetId).next(p=>{a=p})}).next(()=>i.Ms.getDocumentsMatchingQuery(u,e,n?r:De.min(),n?a:He())).next(h=>(b2(i,pk(e),h),{documents:h,$s:a})))}function b2(t,e,n){let i=t.Ns.get(e)||De.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Ns.set(e,i)}class H0{constructor(){this.activeTargetIds=Ek()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N2{constructor(){this.xo=new H0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new H0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="ConnectivityMonitor";class K0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pe($0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){pe($0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=null;function Cg(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="RestConnection",D2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,n,i,r,a){const u=Cg(),h=this.jo(e,n.toUriEncodedString());pe(zp,`Sending RPC '${e}' ${u}:`,h,i);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,r,a);const{host:m}=new URL(h),v=bs(m);return this.Jo(e,h,p,i,v).then(E=>(pe(zp,`Received RPC '${e}' ${u}: `,E),E),E=>{throw Ya(zp,`RPC '${e}' ${u} failed with error: `,E,"url: ",h,"request:",i),E})}Yo(e,n,i,r,a,u){return this.zo(e,n,i,r,a)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}jo(e,n){const i=D2[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class V2 extends P2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,a){const u=Cg();return new Promise((h,p)=>{const m=new rx;m.setWithCredentials(!0),m.listenOnce(sx.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case hd.NO_ERROR:const E=m.getResponseJson();pe(dn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case hd.TIMEOUT:pe(dn,`RPC '${e}' ${u} timed out`),p(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:const C=m.getStatus();if(pe(dn,`RPC '${e}' ${u} failed with status:`,C,"response text:",m.getResponseText()),C>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w==null?void 0:w.error;if(I&&I.status&&I.message){const D=function(H){const z=H.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(z)>=0?z:oe.UNKNOWN}(I.status);p(new ge(D,I.message))}else p(new ge(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{h_:e,streamId:u,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{pe(dn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(r);pe(dn,`RPC '${e}' ${u} sending request:`,r),m.send(n,"POST",v,i,15)})}I_(e,n,i){const r=Cg(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lx(),h=ax(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const v=a.join("");pe(dn,`Creating RPC '${e}' stream ${r}: ${v}`,p);const E=u.createWebChannel(v,p);this.E_(E);let C=!1,w=!1;const I=new k2({Zo:V=>{w?pe(dn,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(C||(pe(dn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),C=!0),pe(dn,`RPC '${e}' stream ${r} sending:`,V),E.send(V))},Xo:()=>E.close()}),D=(V,H,z)=>{V.listen(H,G=>{try{z(G)}catch(ee){setTimeout(()=>{throw ee},0)}})};return D(E,ku.EventType.OPEN,()=>{w||(pe(dn,`RPC '${e}' stream ${r} transport opened.`),I.__())}),D(E,ku.EventType.CLOSE,()=>{w||(w=!0,pe(dn,`RPC '${e}' stream ${r} transport closed`),I.u_(),this.d_(E))}),D(E,ku.EventType.ERROR,V=>{w||(w=!0,Ya(dn,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),I.u_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))}),D(E,ku.EventType.MESSAGE,V=>{var H;if(!w){const z=V.data[0];nt(!!z,16349);const G=z,ee=(G==null?void 0:G.error)||((H=G[0])===null||H===void 0?void 0:H.error);if(ee){pe(dn,`RPC '${e}' stream ${r} received error:`,ee);const ne=ee.status;let fe=function(N){const P=Ut[N];if(P!==void 0)return Gx(P)}(ne),U=ee.message;fe===void 0&&(fe=oe.INTERNAL,U="Unknown error status: "+ne+" with message "+ee.message),w=!0,I.u_(new ge(fe,U)),E.close()}else pe(dn,`RPC '${e}' stream ${r} received:`,z),I.c_(z)}}),D(h,ox.STAT_EVENT,V=>{V.stat===ug.PROXY?pe(dn,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===ug.NOPROXY&&pe(dn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){return new Fk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,i=1e3,r=1.5,a=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=r,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-i);r>0&&pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class rw{constructor(e,n,i,r,a,u,h,p){this.xi=e,this.S_=i,this.D_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new iw(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===n&&this.z_(i,r)},i=>{e(()=>{const r=new ge(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return pe(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(pe(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L2 extends rw{constructor(e,n,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=zk(this.serializer,e),i=function(a){if(!("targetChange"in a))return De.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Bi(u.readTime):De.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(a,u){let h;const p=u.target;if(h=mg(p)?{documents:$k(a,p)}:{query:Kk(a,p).gt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Kx(a,u.resumeToken);const m=yg(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(De.min())>0){h.readTime=Ud(a,u.snapshotVersion.toTimestamp());const m=yg(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=Jk(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.Q_(n)}}class U2 extends rw{constructor(e,n,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=Hk(e.writeResults,e.commitTime),i=Bi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=Tg(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Gk(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{}class F2 extends O2{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.zo(e,vg(n,i),r,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(oe.UNKNOWN,a.toString())})}Yo(e,n,i,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Yo(e,vg(n,i),r,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(oe.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class B2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(xr(n),this.ua=!1):pe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="RemoteStore";class q2{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(u=>{i.enqueueAndForget(async()=>{Oo(this)&&(pe(Io,"Restarting streams for network reachability change."),await async function(p){const m=ke(p);m.da.add(4),await _c(m),m.Va.set("Unknown"),m.da.delete(4),await hh(m)}(this))})}),this.Va=new B2(i,r)}}async function hh(t){if(Oo(t))for(const e of t.Aa)await e(!0)}async function _c(t){for(const e of t.Aa)await e(!1)}function sw(t,e){const n=ke(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Vy(n)?ky(n):hl(n).N_()&&Py(n,e))}function Dy(t,e){const n=ke(t),i=hl(n);n.Ea.delete(e),i.N_()&&ow(n,e),n.Ea.size===0&&(i.N_()?i.k_():Oo(n)&&n.Va.set("Unknown"))}function Py(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hl(t).Z_(e)}function ow(t,e){t.ma.Ke(e),hl(t).X_(e)}function ky(t){t.ma=new Vk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),hl(t).start(),t.Va.ca()}function Vy(t){return Oo(t)&&!hl(t).O_()&&t.Ea.size>0}function Oo(t){return ke(t).da.size===0}function aw(t){t.ma=void 0}async function z2(t){t.Va.set("Online")}async function G2(t){t.Ea.forEach((e,n)=>{Py(t,e)})}async function H2(t,e){aw(t),Vy(t)?(t.Va.Pa(e),ky(t)):t.Va.set("Unknown")}async function $2(t,e,n){if(t.Va.set("Online"),e instanceof $x&&e.state===2&&e.cause)try{await async function(r,a){const u=a.cause;for(const h of a.targetIds)r.Ea.has(h)&&(await r.remoteSyncer.rejectListen(h,u),r.Ea.delete(h),r.ma.removeTarget(h))}(t,e)}catch(i){pe(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(t,i)}else if(e instanceof yd?t.ma.Xe(e):e instanceof Hx?t.ma.ot(e):t.ma.nt(e),!n.isEqual(De.min()))try{const i=await nw(t.localStore);n.compareTo(i)>=0&&await function(a,u){const h=a.ma.It(u);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ea.get(m);v&&a.Ea.set(m,v.withResumeToken(p.resumeToken,u))}}),h.targetMismatches.forEach((p,m)=>{const v=a.Ea.get(p);if(!v)return;a.Ea.set(p,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),ow(a,p);const E=new ms(v.target,p,m,v.sequenceNumber);Py(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){pe(Io,"Failed to raise snapshot:",i),await Fd(t,i)}}async function Fd(t,e,n){if(!fl(e))throw e;t.da.add(1),await _c(t),t.Va.set("Offline"),n||(n=()=>nw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(Io,"Retrying IndexedDB access"),await n(),t.da.delete(1),await hh(t)})}function lw(t,e){return e().catch(n=>Fd(t,n,e))}async function mh(t){const e=ke(t),n=ws(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:vy;for(;K2(e);)try{const r=await R2(e.localStore,i);if(r===null){e.Ia.length===0&&n.k_();break}i=r.batchId,Y2(e,r)}catch(r){await Fd(e,r)}uw(e)&&cw(e)}function K2(t){return Oo(t)&&t.Ia.length<10}function Y2(t,e){t.Ia.push(e);const n=ws(t);n.N_()&&n.ea&&n.ta(e.mutations)}function uw(t){return Oo(t)&&!ws(t).O_()&&t.Ia.length>0}function cw(t){ws(t).start()}async function J2(t){ws(t).ia()}async function Q2(t){const e=ws(t);for(const n of t.Ia)e.ta(n.mutations)}async function W2(t,e,n){const i=t.Ia.shift(),r=xy.from(i,e,n);await lw(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await mh(t)}async function X2(t,e){e&&ws(t).ea&&await async function(i,r){if(function(u){return Pk(u)&&u!==oe.ABORTED}(r.code)){const a=i.Ia.shift();ws(i).L_(),await lw(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await mh(i)}}(t,e),uw(t)&&cw(t)}async function J0(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),pe(Io,"RemoteStore received new credentials");const i=Oo(n);n.da.add(3),await _c(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await hh(n)}async function j2(t,e){const n=ke(t);e?(n.da.delete(2),await hh(n)):e||(n.da.add(2),await _c(n),n.Va.set("Unknown"))}function hl(t){return t.fa||(t.fa=function(n,i,r){const a=ke(n);return a.oa(),new L2(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{e_:z2.bind(null,t),n_:G2.bind(null,t),i_:H2.bind(null,t),Y_:$2.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Vy(t)?ky(t):t.Va.set("Unknown")):(await t.fa.stop(),aw(t))})),t.fa}function ws(t){return t.ga||(t.ga=function(n,i,r){const a=ke(n);return a.oa(),new U2(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:J2.bind(null,t),i_:X2.bind(null,t),na:Q2.bind(null,t),ra:W2.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await mh(t)):(await t.ga.stop(),t.Ia.length>0&&(pe(Io,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const u=Date.now()+i,h=new Ly(e,n,u,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uy(t,e){if(xr("AsyncQueue",`${e}: ${t}`),fl(t))return new ge(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=Vu(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ha;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.pa=new Tt(Se.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ie(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class ja{constructor(e,n,i,r,a,u,h,p,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,r,a){const u=[];return n.forEach(h=>{u.push({type:0,doc:h})}),new ja(e,n,Ha.emptySet(n),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class eV{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=ke(n),a=r.queries;r.queries=W0(),a.forEach((u,h)=>{for(const p of h.Sa)p.onError(i)})})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function W0(){return new Uo(t=>Mx(t),ah)}async function tV(t,e){const n=ke(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.Da()&&e.va()&&(i=2):(a=new Z2,i=e.va()?0:1);try{switch(i){case 0:a.ba=await n.onListen(r,!0);break;case 1:a.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const h=Uy(u,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.Sa.push(e),e.Fa(n.onlineState),a.ba&&e.Ma(a.ba)&&Oy(n)}async function nV(t,e){const n=ke(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?r=e.va()?0:1:!a.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function iV(t,e){const n=ke(t);let i=!1;for(const r of e){const a=r.query,u=n.queries.get(a);if(u){for(const h of u.Sa)h.Ma(r)&&(i=!0);u.ba=r}}i&&Oy(n)}function rV(t,e,n){const i=ke(t),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(e)}function Oy(t){t.Ca.forEach(e=>{e.next()})}var Sg,X0;(X0=Sg||(Sg={})).xa="default",X0.Cache="cache";class sV{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.key=e}}class dw{constructor(e){this.key=e}}class oV{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.Za=Dx(e),this.Xa=new Ha(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new Q0,r=n?n.Xa:this.Xa;let a=n?n.mutatedKeys:this.mutatedKeys,u=r,h=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,E)=>{const C=r.get(v),w=lh(this.query,E)?E:null,I=!!C&&this.mutatedKeys.has(C.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;C&&w?C.data.isEqual(w.data)?I!==D&&(i.track({type:3,doc:w}),V=!0):this.ru(C,w)||(i.track({type:2,doc:w}),V=!0,(p&&this.Za(w,p)>0||m&&this.Za(w,m)<0)&&(h=!0)):!C&&w?(i.track({type:0,doc:w}),V=!0):C&&!w&&(i.track({type:1,doc:C}),V=!0,(p||m)&&(h=!0)),V&&(w?(u=u.add(w),a=D?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Xa:u,nu:i,Cs:h,mutatedKeys:a}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((v,E)=>function(w,I){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:V})}};return D(w)-D(I)}(v.type,E.type)||this.Za(v.doc,E.doc)),this.iu(i),r=r!=null&&r;const h=n&&!r?this.su():[],p=this.Ya.size===0&&this.current&&!r?1:0,m=p!==this.Ja;return this.Ja=p,u.length!==0||m?{snapshot:new ja(this.query,e.Xa,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:h}:{ou:h}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Q0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new dw(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new fw(i))}),n}au(e){this.Ha=e.$s,this.Ya=He();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ja.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Fy="SyncEngine";class aV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class lV{constructor(e){this.key=e,this.cu=!1}}class uV{constructor(e,n,i,r,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new Uo(h=>Mx(h),ah),this.Pu=new Map,this.Tu=new Set,this.Iu=new Tt(Se.comparator),this.Eu=new Map,this.du=new Iy,this.Au={},this.Ru=new Map,this.Vu=Xa.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function cV(t,e,n=!0){const i=vw(t);let r;const a=i.hu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.uu()):r=await hw(i,e,n,!0),r}async function fV(t,e){const n=vw(t);await hw(n,e,!0,!1)}async function hw(t,e,n,i){const r=await I2(t.localStore,Fi(e)),a=r.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await dV(t,e,a,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&sw(t.remoteStore,r),h}async function dV(t,e,n,i,r){t.fu=(E,C,w)=>async function(D,V,H,z){let G=V.view.tu(H);G.Cs&&(G=await G0(D.localStore,V.query,!1).then(({documents:U})=>V.view.tu(U,G)));const ee=z&&z.targetChanges.get(V.targetId),ne=z&&z.targetMismatches.get(V.targetId)!=null,fe=V.view.applyChanges(G,D.isPrimaryClient,ee,ne);return Z0(D,V.targetId,fe.ou),fe.snapshot}(t,E,C,w);const a=await G0(t.localStore,e,!0),u=new oV(e,a.$s),h=u.tu(a.documents),p=vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),m=u.applyChanges(h,t.isPrimaryClient,p);Z0(t,n,m.ou);const v=new aV(e,n,u);return t.hu.set(e,v),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),m.snapshot}async function hV(t,e,n){const i=ke(t),r=i.hu.get(e),a=i.Pu.get(r.targetId);if(a.length>1)return i.Pu.set(r.targetId,a.filter(u=>!ah(u,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Eg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Dy(i.remoteStore,r.targetId),Ag(i,r.targetId)}).catch(cl)):(Ag(i,r.targetId),await Eg(i.localStore,r.targetId,!0))}async function mV(t,e){const n=ke(t),i=n.hu.get(e),r=n.Pu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dy(n.remoteStore,i.targetId))}async function pV(t,e,n){const i=CV(t);try{const r=await function(u,h){const p=ke(u),m=Nt.now(),v=h.reduce((w,I)=>w.add(I.key),He());let E,C;return p.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=wr(),D=He();return p.Bs.getEntries(w,v).next(V=>{I=V,I.forEach((H,z)=>{z.isValidDocument()||(D=D.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(w,I)).next(V=>{E=V;const H=[];for(const z of h){const G=Ik(z,E.get(z.key).overlayedDocument);G!=null&&H.push(new Ps(z.key,G,Cx(G.value.mapValue),ci.exists(!0)))}return p.mutationQueue.addMutationBatch(w,m,H,h)}).next(V=>{C=V;const H=V.applyToLocalDocumentSet(E,D);return p.documentOverlayCache.saveOverlays(w,V.batchId,H)})}).then(()=>({batchId:C.batchId,changes:kx(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(u,h,p){let m=u.Au[u.currentUser.toKey()];m||(m=new Tt(Oe)),m=m.insert(h,p),u.Au[u.currentUser.toKey()]=m}(i,r.batchId,n),await Tc(i,r.changes),await mh(i.remoteStore)}catch(r){const a=Uy(r,"Failed to persist write");n.reject(a)}}async function mw(t,e){const n=ke(t);try{const i=await x2(n.localStore,e);e.targetChanges.forEach((r,a)=>{const u=n.Eu.get(a);u&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.cu=!0:r.modifiedDocuments.size>0?nt(u.cu,14607):r.removedDocuments.size>0&&(nt(u.cu,42227),u.cu=!1))}),await Tc(n,i,e)}catch(i){await cl(i)}}function j0(t,e,n){const i=ke(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.hu.forEach((a,u)=>{const h=u.view.Fa(e);h.snapshot&&r.push(h.snapshot)}),function(u,h){const p=ke(u);p.onlineState=h;let m=!1;p.queries.forEach((v,E)=>{for(const C of E.Sa)C.Fa(h)&&(m=!0)}),m&&Oy(p)}(i.eventManager,e),r.length&&i.lu.Y_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gV(t,e,n){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),a=r&&r.key;if(a){let u=new Tt(Se.comparator);u=u.insert(a,mn.newNoDocument(a,De.min()));const h=He().add(a),p=new fh(De.min(),new Map,new Tt(Oe),u,h);await mw(i,p),i.Iu=i.Iu.remove(a),i.Eu.delete(e),By(i)}else await Eg(i.localStore,e,!1).then(()=>Ag(i,e,n)).catch(cl)}async function yV(t,e){const n=ke(t),i=e.batch.batchId;try{const r=await A2(n.localStore,e);gw(n,i,null),pw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tc(n,r)}catch(r){await cl(r)}}async function vV(t,e,n){const i=ke(t);try{const r=await function(u,h){const p=ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return p.mutationQueue.lookupMutationBatch(m,h).next(E=>(nt(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>p.localDocuments.getDocuments(m,v))})}(i.localStore,e);gw(i,e,n),pw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Tc(i,r)}catch(r){await cl(r)}}function pw(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function gw(t,e,n){const i=ke(t);let r=i.Au[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Au[i.currentUser.toKey()]=r}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||yw(t,i)})}function yw(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Dy(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),By(t))}function Z0(t,e,n){for(const i of n)i instanceof fw?(t.du.addReference(i.key,e),_V(t,i)):i instanceof dw?(pe(Fy,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||yw(t,i.key)):Ie(19791,{pu:i})}function _V(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(pe(Fy,"New document in limbo: "+n),t.Tu.add(i),By(t))}function By(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Se(pt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new lV(n)),t.Iu=t.Iu.insert(n,i),sw(t.remoteStore,new ms(Fi(bx(n.path)),i,"TargetPurposeLimboResolution",rh.le))}}async function Tc(t,e,n){const i=ke(t),r=[],a=[],u=[];i.hu.isEmpty()||(i.hu.forEach((h,p)=>{u.push(i.fu(p,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const E=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){r.push(m);const E=Ny.Rs(p.targetId,m);a.push(E)}}))}),await Promise.all(u),i.lu.Y_(r),await async function(p,m){const v=ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>se.forEach(m,C=>se.forEach(C.ds,w=>v.persistence.referenceDelegate.addReference(E,C.targetId,w)).next(()=>se.forEach(C.As,w=>v.persistence.referenceDelegate.removeReference(E,C.targetId,w)))))}catch(E){if(!fl(E))throw E;pe(My,"Failed to update sequence numbers: "+E)}for(const E of m){const C=E.targetId;if(!E.fromCache){const w=v.xs.get(C),I=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(I);v.xs=v.xs.insert(C,D)}}}(i.localStore,a))}async function TV(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){pe(Fy,"User change. New user:",e.toKey());const i=await tw(n.localStore,e);n.currentUser=e,function(a,u){a.Ru.forEach(h=>{h.forEach(p=>{p.reject(new ge(oe.CANCELLED,u))})}),a.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tc(n,i.ks)}}function EV(t,e){const n=ke(t),i=n.Eu.get(e);if(i&&i.cu)return He().add(i.key);{let r=He();const a=n.Pu.get(e);if(!a)return r;for(const u of a){const h=n.hu.get(u);r=r.unionWith(h.view.eu)}return r}}function vw(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gV.bind(null,e),e.lu.Y_=iV.bind(null,e.eventManager),e.lu.gu=rV.bind(null,e.eventManager),e}function CV(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vV.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return S2(this.persistence,new T2,e.initialUser,this.serializer)}Su(e){return new ew(by.fi,this.serializer)}bu(e){return new N2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class SV extends Bd{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){nt(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new s2(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new ew(i=>Od.fi(i,n),this.serializer)}}class xg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>j0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TV.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eV}()}createDatastore(e){const n=dh(e.databaseInfo.databaseId),i=function(a){return new V2(a)}(e.databaseInfo);return function(a,u,h,p){return new F2(a,u,h,p)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,u,h){return new q2(i,r,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,n=>j0(this.syncEngine,n,0),function(){return K0.C()?new K0:new M2}())}createSyncEngine(e,n){return function(r,a,u,h,p,m,v){const E=new uV(r,a,u,h,p,m);return v&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=ke(r);pe(Io,"RemoteStore shutting down."),a.da.add(5),await _c(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xg.provider={build:()=>new xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class xV{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=hn.UNAUTHENTICATED,this.clientId=dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{pe(Rs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(pe(Rs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Uy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Hp(t,e){t.asyncQueue.verifyOperationInProgress(),pe(Rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await tw(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wV(t);pe(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>J0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>J0(e.remoteStore,r)),t._onlineComponents=e}async function wV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(Rs,"Using user provided OfflineComponentProvider");try{await Hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ya("Error using user provided cache. Falling back to memory cache: "+n),await Hp(t,new Bd)}}else pe(Rs,"Using default OfflineComponentProvider"),await Hp(t,new SV(void 0));return t._offlineComponents}async function _w(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(Rs,"Using user provided OnlineComponentProvider"),await eC(t,t._uninitializedComponentsProvider._online)):(pe(Rs,"Using default OnlineComponentProvider"),await eC(t,new xg))),t._onlineComponents}function RV(t){return _w(t).then(e=>e.syncEngine)}async function IV(t){const e=await _w(t),n=e.eventManager;return n.onListen=cV.bind(null,e.syncEngine),n.onUnlisten=hV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mV.bind(null,e.syncEngine),n}function bV(t,e,n={}){const i=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,h,p,m){const v=new AV({next:C=>{v.xu(),u.enqueueAndForget(()=>nV(a,E)),C.fromCache&&p.source==="server"?m.reject(new ge(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(C)},error:C=>m.reject(C)}),E=new sV(h,v,{includeMetadataChanges:!0,Qa:!0});return tV(a,E)}(await IV(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e,n){if(!n)throw new ge(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NV(t,e,n,i){if(e===!0&&i===!0)throw new ge(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nC(t){if(!Se.isDocumentKey(t))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iC(t){if(Se.isDocumentKey(t))throw new ge(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firestore.googleapis.com",rC=!0;class sC{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cw,this.ssl=rC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i2)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kP;switch(i.type){case"firstParty":return new OP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=tC.get(n);i&&(pe("ComponentProvider","Removing Datastore"),tC.delete(n),i.terminate())}(this),Promise.resolve()}}function MV(t,e,n,i={}){var r;t=bo(t,gh);const a=bs(e),u=t._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),p=`${e}:${n}`;a&&(iy(`https://${p}`),ry("Firestore",!0)),u.host!==Cw&&u.host!==p&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!So(m,h)&&(t._setSettings(m),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=hn.MOCK_USER;else{v=yA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new hn(C)}t._authCredentials=new VP(new cx(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class Bn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class _s extends Fo{constructor(e,n,i){super(e,n,bx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Se(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Eo(t,e,...n){if(t=Mt(t),Ew("collection","path",e),t instanceof gh){const i=pt.fromString(e,...n);return iC(i),new _s(t,null,i)}{if(!(t instanceof Bn||t instanceof _s))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...n));return iC(i),new _s(t.firestore,null,i)}}function sc(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=dx.newId()),Ew("doc","path",e),t instanceof gh){const i=pt.fromString(e,...n);return nC(i),new Bn(t,null,new Se(i))}{if(!(t instanceof Bn||t instanceof _s))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...n));return nC(i),new Bn(t.firestore,t instanceof _s?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="AsyncQueue";class aC{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new iw(this,"async_queue_retry"),this.rc=()=>{const i=Gp();i&&pe(oC,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new vs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!fl(e))throw e;pe(oC,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,xr("INTERNAL UNHANDLED ERROR: ",lC(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=Ly.createAndSchedule(this,e,n,i,a=>this.uc(a));return this.Zu.push(r),r}oc(){this.Xu&&Ie(47125,{cc:lC(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function lC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ec extends gh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new aC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aC(e),this._firestoreClient=void 0,await e}}}function DV(t,e){const n=typeof t=="object"?t:ay(),i=typeof t=="string"?t:Dd,r=eh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=mA("firestore");a&&MV(r,...a)}return r}function Sw(t){if(t._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PV(t),t._firestoreClient}function PV(t){var e,n,i;const r=t._freezeSettings(),a=function(h,p,m,v){return new ZP(h,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Tw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new xV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Za(ln.fromBase64String(e))}catch(n){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Za(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=/^__.*__$/;class VV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}class Aw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ic:t})}}class Hy{constructor(e,n,i,r,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Vc(e),r}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return qd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(xw(this.Ic)&&kV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class LV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dh(e)}bc(e,n,i,r=!1){return new Hy({Ic:e,methodName:n,wc:i,path:an.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $y(t){const e=t._freezeSettings(),n=dh(t._databaseId);return new LV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UV(t,e,n,i,r,a={}){const u=t.bc(a.merge||a.mergeFields?2:0,e,n,r);Ky("Data must be an object, but it was:",u,i);const h=ww(i,u);let p,m;if(a.merge)p=new On(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const C=wg(e,E,n);if(!u.contains(C))throw new ge(oe.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Iw(v,C)||v.push(C)}p=new On(v),m=u.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,m=u.fieldTransforms;return new VV(new Rn(h),p,m)}class vh extends qy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}function OV(t,e,n,i){const r=t.bc(1,e,n);Ky("Data must be an object, but it was:",r,i);const a=[],u=Rn.empty();Ds(i,(p,m)=>{const v=Yy(e,p,n);m=Mt(m);const E=r.mc(v);if(m instanceof vh)a.push(v);else{const C=Cc(m,E);C!=null&&(a.push(v),u.set(v,C))}});const h=new On(a);return new Aw(u,h,r.fieldTransforms)}function FV(t,e,n,i,r,a){const u=t.bc(1,e,n),h=[wg(e,i,n)],p=[r];if(a.length%2!=0)throw new ge(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<a.length;C+=2)h.push(wg(e,a[C])),p.push(a[C+1]);const m=[],v=Rn.empty();for(let C=h.length-1;C>=0;--C)if(!Iw(m,h[C])){const w=h[C];let I=p[C];I=Mt(I);const D=u.mc(w);if(I instanceof vh)m.push(w);else{const V=Cc(I,D);V!=null&&(m.push(w),v.set(w,V))}}const E=new On(m);return new Aw(v,E,u.fieldTransforms)}function BV(t,e,n,i=!1){return Cc(n,t.bc(i?4:3,e))}function Cc(t,e){if(Rw(t=Mt(t)))return Ky("Unsupported field value:",e,t),ww(t,e);if(t instanceof qy)return function(i,r){if(!xw(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,r){const a=[];let u=0;for(const h of i){let p=Cc(h,r.fc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=Mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ck(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Nt.fromDate(i);return{timestampValue:Ud(r.serializer,a)}}if(i instanceof Nt){const a=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ud(r.serializer,a)}}if(i instanceof zy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Za)return{bytesValue:Kx(r.serializer,i._byteString)};if(i instanceof Bn){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ry(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gy)return function(u,h){return{mapValue:{fields:{[Tx]:{stringValue:Ex},[Pd]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.gc("VectorValues must only contain numeric values.");return Sy(h.serializer,m)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${ph(i)}`)}(t,e)}function ww(t,e){const n={};return mx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(i,r)=>{const a=Cc(r,e.Ac(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function Rw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof zy||t instanceof Za||t instanceof Bn||t instanceof qy||t instanceof Gy)}function Ky(t,e,n){if(!Rw(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=ph(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function wg(t,e,n){if((e=Mt(e))instanceof yh)return e._internalPath;if(typeof e=="string")return Yy(t,e);throw qd("Field path arguments must be of type string or ",t,!1,void 0,n)}const qV=new RegExp("[~\\*/\\[\\]]");function Yy(t,e,n){if(e.search(qV)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yh(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qd(t,e,n,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new ge(oe.INVALID_ARGUMENT,h+t+p)}function Iw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zV extends bw{data(){return super.data()}}function _h(t,e){return typeof e=="string"?Yy(t,e):e instanceof yh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jy{}class Nw extends Jy{}function zd(t,e,...n){let i=[];e instanceof Jy&&i.push(e),i=i.concat(n),function(a){const u=a.filter(p=>p instanceof Qy).length,h=a.filter(p=>p instanceof Th).length;if(u>1||u>0&&h>0)throw new ge(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Th extends Nw{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Th(e,n,i)}_apply(e){const n=this._parse(e);return Dw(e._query,n),new Fo(e.firestore,e.converter,pg(e._query,n))}_parse(e){const n=$y(e.firestore);return function(a,u,h,p,m,v,E){let C;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){cC(E,v);const I=[];for(const D of E)I.push(uC(p,a,D));C={arrayValue:{values:I}}}else C=uC(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||cC(E,v),C=BV(h,u,E,v==="in"||v==="not-in");return Ft.create(m,v,C)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Mw(t,e,n){const i=e,r=_h("where",t);return Th._create(r,i,n)}class Qy extends Jy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,a){let u=r;const h=a.getFlattenedFilters();for(const p of h)Dw(u,p),u=pg(u,p)}(e._query,n),new Fo(e.firestore,e.converter,pg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wy extends Nw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wy(e,n)}_apply(e){const n=function(r,a,u){if(r.startAt!==null)throw new ge(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ge(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(a,u)}(e._query,this._field,this._direction);return new Fo(e.firestore,e.converter,function(r,a){const u=r.explicitOrderBy.concat([a]);return new dl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Rg(t,e="asc"){const n=e,i=_h("orderBy",t);return Wy._create(i,n)}function uC(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new ge(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nx(e)&&n.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(pt.fromString(n));if(!Se.isDocumentKey(i))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return A0(t,new Se(i))}if(n instanceof Bn)return A0(t,n._key);throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function cC(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dw(t,e){const n=function(r,a){for(const u of r)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HV{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ds(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Pd].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(u=>bt(u.doubleValue));return new Gy(a)}convertGeoPoint(e){return new zy(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=oh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=pt.fromString(e);nt(jx(i),9688,{name:e});const r=new ec(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return r.isEqual(n)||xr(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KV extends bw{constructor(e,n,i,r,a,u){super(e,n,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_h("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vd extends KV{data(e={}){return super.data(e)}}class YV{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new nd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vd(this._firestore,this._userDataWriter,i.key,i,new nd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>{const p=new vd(r._firestore,r._userDataWriter,h.doc.key,h.doc,new nd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new vd(r._firestore,r._userDataWriter,h.doc.key,h.doc,new nd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:JV(h.type),doc:p,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}class QV extends HV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,n)}}function oc(t){t=bo(t,Fo);const e=bo(t.firestore,Ec),n=Sw(e),i=new QV(e);return GV(t._query),bV(n,t._query).then(r=>new YV(e,i,t,r))}function Pw(t,e,n,...i){t=bo(t,Bn);const r=bo(t.firestore,Ec),a=$y(r);let u;return u=typeof(e=Mt(e))=="string"||e instanceof yh?FV(a,"updateDoc",t._key,e,n,i):OV(a,"updateDoc",t._key,e),Xy(r,[u.toMutation(t._key,ci.exists(!0))])}function kw(t){return Xy(bo(t.firestore,Ec),[new Ay(t._key,ci.none())])}function Vw(t,e){const n=bo(t.firestore,Ec),i=sc(t),r=$V(t.converter,e);return Xy(n,[UV($y(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ci.exists(!1))]).then(()=>i)}function Xy(t,e){return function(i,r){const a=new vs;return i.asyncQueue.enqueueAndForget(async()=>pV(await RV(i),r,a)),a.promise}(Sw(t),e)}(function(e,n=!0){(function(r){ul=r})(Vo),Ao(new Es("firestore",(i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),h=new Ec(new LP(i.getProvider("auth-internal")),new FP(u,i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(m.options.projectId,v)}(u,r),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Li(d0,h0,e),Li(d0,h0,"esm2017")})();const WV={apiKey:"AIzaSyBVwk6N0mRimPMZ_hnDYZZaQ5cqcPXf61M",authDomain:"siis-jewelry-5c370.firebaseapp.com",projectId:"siis-jewelry-5c370",storageBucket:"siis-jewelry-5c370.firebasestorage.app",messagingSenderId:"88460482323",appId:"1:88460482323:web:b6a59a4e537a6a4cf86ce6",measurementId:"G-NPDXXFYHBX"},Lw=TA(WV),Ig=NP(Lw),li=DV(Lw),fC=[{href:"#",label:"首頁"},{href:"#products",label:"產品"},{href:"#about",label:"關於我們"},{href:"#contact",label:"聯繫我們"}],$p=[{id:1,name:"紫水晶能量項鍊",price:298,images:["https://picsum.photos/id/157/800/800","https://picsum.photos/id/257/800/800","https://picsum.photos/id/357/800/800"],rating:4.5,reviews:42,description:"這款精緻的紫水晶項鍊選用頂級巴西紫水晶，以其深邃的紫色調和卓越的淨度而聞名。紫水晶被認為能夠開啟智慧、提升專注力並帶來內心的平靜。適合冥想、工作或日常佩戴，為您的能量場注入穩定與和諧。",tag:{text:"新品",color:"bg-primary"},category:"紫水晶"},{id:2,name:"粉水晶愛情手鍊",price:198,images:["https://picsum.photos/id/158/800/800","https://picsum.photos/id/258/800/800","https://picsum.photos/id/358/800/800"],rating:5,reviews:78,description:"溫潤的馬達加斯加粉水晶，是愛的化身。這款手鍊能溫柔地打開您的心輪，增進人際關係，吸引愛情與友誼。每一顆珠子都經過精心打磨，觸感溫和，是提升個人魅力的最佳選擇。",tag:{text:"熱賣",color:"bg-secondary"},category:"粉水晶"},{id:3,name:"綠幽靈財富吊墜",price:328,images:["https://picsum.photos/id/159/800/800","https://picsum.photos/id/259/800/800","https://picsum.photos/id/359/800/800"],rating:4,reviews:36,description:"綠幽靈水晶，又稱「事業水晶」，其內部的火山泥礦物形成了獨特的層次感。它被認為能吸引正財，幫助事業發展，並帶來好運與機會。這款吊墜設計簡潔大方，能彰顯您的專業與品味。",category:"綠幽靈"},{id:4,name:"黑曜石守護手鍊",price:258,images:["https://picsum.photos/id/160/800/800","https://picsum.photos/id/260/800/800","https://picsum.photos/id/360/800/800"],rating:4.5,reviews:51,description:"來自墨西哥的黑曜石，具有強大的保護能量，能有效吸收負能量，形成一道堅實的能量屏障。這款手鍊適合時常出入複雜環境的人士佩戴，為您提供穩定與安全的守護力量。",tag:{text:"限量",color:"bg-accent text-dark"},category:"其他"},{id:5,name:"黃水晶財富吊墜",price:368,images:["https://picsum.photos/id/161/800/800","https://picsum.photos/id/261/800/800","https://picsum.photos/id/361/800/800"],rating:3,reviews:24,description:"閃耀著太陽般光芒的黃水晶，是著名的財富之石。它對應太陽輪，能增強自信與決策力，並吸引意想不到的財富機會（偏財）。佩戴此吊墜，為您的生活注入滿滿的活力與豐盛。",category:"其他"},{id:6,name:"白水晶淨化手鍊",price:218,images:["https://picsum.photos/id/162/800/800","https://picsum.photos/id/262/800/800","https://picsum.photos/id/362/800/800"],rating:4,reviews:32,description:"白水晶被譽為「水晶之王」，具有淨化、平衡和放大能量的功效。它可以清理個人和環境的負能量，提升思緒清晰度。這款手鍊設計簡約，是水晶入門者和能量療癒師的必備單品。",category:"其他"},{id:7,name:"紅紋石愛情吊墜",price:348,images:["https://picsum.photos/id/163/800/800","https://picsum.photos/id/263/800/800","https://picsum.photos/id/363/800/800"],rating:5,reviews:67,description:"嬌豔的紅紋石是療癒情感創傷、尋找靈魂伴侶的強力夥伴。它能引導您釋放過去的傷痛，用愛填滿內心，並鼓勵您以更開放和包容的態度面對愛情。",tag:{text:"熱賣",color:"bg-secondary"},category:"粉水晶"},{id:8,name:"海藍寶溝通手鍊",price:278,images:["https://picsum.photos/id/164/800/800","https://picsum.photos/id/264/800/800","https://picsum.photos/id/364/800/800"],rating:3.5,reviews:45,description:"如海洋般清澈的海藍寶，對應喉輪，能提升溝通與表達能力。它有助於清晰、冷靜地表達自己的想法，非常適合需要公開演講或頻繁溝通的專業人士。",category:"其他"}],XV=[{title:"自己設計手串",description:"發揮您的創意，親手搭配設計出獨一無二的能量水晶手串。",image:"https://picsum.photos/id/1011/600/400",url:"https://salina123001.github.io/bead-designer/"},{title:"AI流年運勢",description:"結合古老智慧與現代AI，為您解析流年運勢，找到您的守護水晶。",image:"https://picsum.photos/id/10/600/400",url:"https://richweb-black.vercel.app/"},{title:"水晶快手遊戲",description:"考驗您的眼力與速度，在充滿樂趣的遊戲中認識更多美麗水晶。",image:"https://picsum.photos/id/102/600/400",url:"https://salina123001.github.io/crystal-game/"}],jV=[{icon:"fa-certificate",title:"100% 純天然水晶",description:"我們承諾所有水晶產品均為天然材質，未經人工染色或處理，保留其原始能量與美感。"},{icon:"fa-globe",title:"全球精選",description:"從巴西的紫水晶到馬達加斯加的孔雀石，我們精心挑選來自世界各地的優質水晶資源。"},{icon:"fa-heart",title:"能量加持",description:"每件水晶飾品都經過專業淨化與能量激活，為您帶來身心平衡與積極能量。"}],ZV=({cartCount:t,currentUser:e,onCartClick:n,onUserClick:i,onLogout:r})=>{const[a,u]=Y.useState(!1),[h,p]=Y.useState(!1),[m,v]=Y.useState(!1),[E,C]=Y.useState(!1),w=Y.useRef(null);Y.useEffect(()=>{const z=()=>{v(window.scrollY>10)};return window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)},[]),Y.useEffect(()=>{const z=G=>{w.current&&!w.current.contains(G.target)&&C(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const I=z=>{z.preventDefault();const G=z.currentTarget.getAttribute("href");if(!G)return;if(G==="#"){window.scrollTo({top:0,behavior:"smooth"});return}const ee=document.querySelector(G);ee&&ee.scrollIntoView({behavior:"smooth",block:"start"})},D=z=>{I(z),u(!1)},V=()=>{e?C(!E):i()},H=()=>{r(),C(!1)};return S.jsxs("header",{className:`fixed w-full z-50 transition-all duration-300 ${m?"bg-white/90 backdrop-blur-sm shadow-md":"bg-white/80"}`,children:[S.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex justify-between items-center py-4",children:[S.jsxs("a",{href:"#",onClick:I,className:"flex items-center space-x-2",children:[S.jsx("span",{className:"text-primary text-3xl",children:S.jsx("i",{className:"fa-solid fa-gem"})}),S.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"SiiS Jewelry"})]}),S.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:fC.map(z=>S.jsx("a",{href:z.href,onClick:I,className:"font-medium hover:text-primary transition-colors",children:z.label},z.label))}),S.jsxs("div",{className:"flex items-center space-x-4",children:[S.jsx("button",{onClick:()=>p(!h),className:"text-dark hover:text-primary transition-colors",children:S.jsx("i",{className:"fa-solid fa-search text-xl"})}),S.jsxs("button",{onClick:n,className:"text-dark hover:text-primary transition-colors relative",children:[S.jsx("i",{className:"fa-solid fa-shopping-bag text-xl"}),t>0&&S.jsx("span",{className:"absolute -top-2 -right-2 bg-primary text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:t})]}),S.jsxs("div",{className:"relative",ref:w,children:[S.jsx("button",{onClick:V,className:"text-dark hover:text-primary transition-colors",children:S.jsx("i",{className:"fa-solid fa-user text-xl"})}),e&&E&&S.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20",children:[S.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:[S.jsxs("p",{className:"font-semibold",children:["Hi, ",e.name]}),S.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),S.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"我的帳戶"}),S.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"訂單記錄"}),S.jsx("button",{onClick:H,className:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600",children:"登出"})]})]}),S.jsx("button",{onClick:()=>u(!a),className:"md:hidden text-dark hover:text-primary transition-colors",children:S.jsx("i",{className:`fa-solid ${a?"fa-times":"fa-bars"} text-xl`})})]})]})}),S.jsx("div",{className:`transition-all duration-300 overflow-hidden ${h?"max-h-40":"max-h-0"}`,children:S.jsx("div",{className:"bg-white border-t border-gray-100 py-3 px-4",children:S.jsx("div",{className:"container mx-auto",children:S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",placeholder:"搜索產品...",className:"w-full pl-10 pr-4 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}),S.jsx("i",{className:"fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"})]})})})}),S.jsx("div",{className:`transition-all duration-300 md:hidden ${a?"max-h-96":"max-h-0"} overflow-hidden`,children:S.jsx("div",{className:"bg-white border-t border-gray-100 py-4 px-4",children:S.jsx("nav",{className:"flex flex-col space-y-3",children:fC.map(z=>S.jsx("a",{href:z.href,className:"font-medium hover:text-primary transition-colors py-2",onClick:D,children:z.label},z.label))})})})]})},eL=()=>{const t=e=>{e.preventDefault();const n=e.currentTarget.getAttribute("href");if(!n)return;const i=document.querySelector(n);i&&i.scrollIntoView({behavior:"smooth",block:"start"})};return S.jsx("section",{className:"pt-28 md:pt-36 pb-16 md:pb-24 bg-gradient-to-br from-primary/5 to-secondary/5",children:S.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[S.jsxs("div",{className:"md:w-1/2 text-center md:text-left",children:[S.jsxs("h1",{className:"text-[clamp(2rem,5vw,3.5rem)] font-bold leading-tight mb-4 text-shadow",children:["發現",S.jsx("span",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"水晶"}),"的力量"]}),S.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-xl mx-auto md:mx-0",children:"SiiS Jewelry 精選世界各地高品質水晶，為您帶來平衡、療癒與美麗。每一件飾品都經過精心挑選，賦予您獨特的能量體驗。"}),S.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[S.jsxs("a",{href:"#products",onClick:t,className:"px-8 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center",children:[S.jsx("span",{children:"瀏覽產品"}),S.jsx("i",{className:"fa-solid fa-arrow-right ml-2"})]}),S.jsxs("a",{href:"#ai-chat",onClick:t,className:"px-8 py-3 bg-white text-primary border border-primary rounded-full hover:bg-primary/5 transition-colors flex items-center",children:[S.jsx("i",{className:"fa-solid fa-comments mr-2"}),S.jsx("span",{children:"諮詢AI助手"})]})]})]}),S.jsxs("div",{className:"md:w-1/2 relative",children:[S.jsx("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl transform rotate-2 hover:rotate-0 transition-transform duration-500",children:S.jsx("img",{src:"https://picsum.photos/id/152/800/600",alt:"精美的水晶飾品",className:"w-full h-auto"})}),S.jsx("div",{className:"absolute -bottom-6 -left-6 w-40 h-40 bg-secondary/20 rounded-full blur-3xl -z-10"}),S.jsx("div",{className:"absolute -top-6 -right-6 w-40 h-40 bg-primary/20 rounded-full blur-3xl -z-10"})]})]})})})},tL=()=>S.jsx("section",{className:"py-16 bg-white",children:S.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:jV.map((t,e)=>S.jsxs("div",{className:"bg-neutral rounded-xl p-6 hover-scale card-shadow",children:[S.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:S.jsx("i",{className:`fa-solid ${t.icon} text-primary text-2xl`})}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),S.jsx("p",{className:"text-gray-600",children:t.description})]},e))})})}),nL=()=>S.jsx("section",{className:"py-16 bg-neutral/50",children:S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"text-center mb-12",children:[S.jsx("h2",{className:"text-[clamp(1.8rem,4vw,2.5rem)] font-bold mb-4",children:"互動水晶體驗"}),S.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"不只是購物，我們提供有趣的互動體驗，讓您更深入地探索水晶的奇妙世界。"})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:XV.map((t,e)=>S.jsxs("div",{className:"group relative rounded-xl overflow-hidden shadow-lg h-96 flex flex-col justify-end text-white text-center p-6 bg-cover bg-center transition-all duration-500 hover:scale-105",style:{backgroundImage:`url(${t.image})`},children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),S.jsxs("div",{className:"relative z-10 flex flex-col items-center h-full",children:[S.jsx("div",{className:"flex-grow"}),S.jsx("h3",{className:"text-2xl font-bold mb-2 text-shadow",children:t.title}),S.jsx("p",{className:"mb-4 text-shadow-sm",children:t.description}),S.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"mt-auto px-6 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-full hover:bg-white/30 transition-colors",children:"開始體驗"})]})]},e))})]})}),iL=({rating:t})=>{const e=Math.floor(t),n=t%1!==0,i=5-e-(n?1:0);return S.jsxs("div",{className:"flex text-yellow-400",children:[[...Array(e)].map((r,a)=>S.jsx("i",{className:"fa-solid fa-star"},`full-${a}`)),n&&S.jsx("i",{className:"fa-solid fa-star-half-stroke"}),[...Array(i)].map((r,a)=>S.jsx("i",{className:"fa-regular fa-star"},`empty-${a}`))]})},rL=({product:t,onSelect:e})=>{const[n,i]=Y.useState(!1),r=u=>{u.stopPropagation(),i(!n)},a=()=>{e(t)};return S.jsxs("div",{className:"product-card group flex flex-col cursor-pointer",onClick:a,children:[S.jsxs("div",{className:"relative rounded-xl overflow-hidden mb-4 shadow-md",children:[S.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-80 object-cover transition-transform duration-300 group-hover:scale-105"}),t.tag&&S.jsx("div",{className:"absolute top-3 left-3",children:S.jsx("span",{className:`text-white text-xs px-2 py-1 rounded-full ${t.tag.color}`,children:t.tag.text})}),S.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:S.jsx("button",{onClick:u=>{u.stopPropagation(),a()},className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-gray-700 hover:bg-primary hover:text-white transition-colors",title:"快速預覽",children:S.jsx("i",{className:"fa-solid fa-eye"})})})]}),S.jsxs("div",{className:"flex-grow flex flex-col",children:[S.jsx("h3",{className:"font-medium text-lg mb-1",children:t.name}),S.jsxs("div",{className:"flex items-center mb-2",children:[S.jsx(iL,{rating:t.rating}),S.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:["(",t.reviews,")"]})]})]}),S.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[S.jsxs("span",{className:"font-bold text-lg",children:["¥",t.price.toFixed(2)]}),S.jsx("button",{onClick:r,className:`transition-colors ${n?"text-red-500":"text-gray-400 hover:text-red-500"}`,title:"加入願望清單",children:S.jsx("i",{className:`fa-${n?"solid":"regular"} fa-heart`})})]})]})},sL=({onProductSelect:t})=>{const[e,n]=Y.useState("全部"),i=Y.useMemo(()=>{const u=new Set($p.map(h=>h.category));return["全部",...Array.from(u)]},[]),r=e==="全部"?$p:$p.filter(u=>u.category===e),a=u=>{u.preventDefault();const h=u.currentTarget.getAttribute("href");if(!h)return;const p=document.querySelector(h);p&&p.scrollIntoView({behavior:"smooth",block:"start"})};return S.jsx("section",{id:"products",className:"py-16 bg-white",children:S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-[clamp(1.8rem,4vw,2.5rem)] font-bold mb-4",children:"精選產品"}),S.jsx("p",{className:"text-gray-600 max-w-2xl",children:"每一款水晶產品都經過精心挑選，為您帶來獨特的能量體驗。"})]}),S.jsx("div",{className:"flex space-x-2 mt-4 md:mt-0 flex-wrap gap-2",children:i.map(u=>S.jsx("button",{onClick:()=>n(u),className:`px-4 py-2 rounded-full transition-colors text-sm sm:text-base ${e===u?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,children:u},u))})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:r.map(u=>S.jsx(rL,{product:u,onSelect:t},u.id))}),S.jsx("div",{className:"text-center mt-12",children:S.jsx("a",{href:"#products",onClick:a,className:"inline-block px-8 py-3 bg-white text-primary border border-primary rounded-full hover:bg-primary/5 transition-colors font-medium",children:"查看全部產品"})})]})})},oL=()=>{const t=e=>{e.preventDefault();const n=e.currentTarget.getAttribute("href");if(!n)return;const i=document.querySelector(n);i&&i.scrollIntoView({behavior:"smooth",block:"start"})};return S.jsx("section",{id:"about",className:"py-16 bg-neutral/50",children:S.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12",children:[S.jsxs("div",{className:"lg:w-1/2 relative",children:[S.jsx("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl",children:S.jsx("img",{src:"https://picsum.photos/id/165/800/600",alt:"品牌故事",className:"w-full h-auto"})}),S.jsx("div",{className:"absolute -bottom-6 -right-6 w-40 h-40 bg-primary/20 rounded-full blur-3xl -z-10"})]}),S.jsxs("div",{className:"lg:w-1/2",children:[S.jsx("h2",{className:"text-[clamp(1.8rem,4vw,2.5rem)] font-bold mb-6",children:"我們的品牌故事"}),S.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"SiiS Jewelry 始於2015年，由一群熱愛水晶能量與美學的專業人士創立。我們深信每一塊水晶都蘊含著獨特的能量和故事，希望透過我們的作品，將這份自然的禮物傳遞給更多人。"}),S.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"我們的使命是提供高品質、純天然的水晶產品，同時傳遞水晶療癒的知識和理念。每一件產品都經過嚴格挑選和能量淨化，確保為您帶來最佳的使用體驗。"}),S.jsx("a",{href:"#contact",onClick:t,className:"inline-block px-8 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300",children:"了解更多"})]})]})})})};var je;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const a={};for(const u of r)a[u]=u;return a},t.getValidEnumValues=r=>{const a=t.objectKeys(r).filter(h=>typeof r[r[h]]!="number"),u={};for(const h of a)u[h]=r[h];return t.objectValues(u)},t.objectValues=r=>t.objectKeys(r).map(function(a){return r[a]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const u in r)Object.prototype.hasOwnProperty.call(r,u)&&a.push(u);return a},t.find=(r,a)=>{for(const u of r)if(a(u))return u},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,a=" | "){return r.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}t.joinValues=i,t.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(je||(je={}));var dC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(dC||(dC={}));const ve=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ls=t=>{switch(typeof t){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return Number.isNaN(t)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(t)?ve.array:t===null?ve.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ve.promise:typeof Map<"u"&&t instanceof Map?ve.map:typeof Set<"u"&&t instanceof Set?ve.set:typeof Date<"u"&&t instanceof Date?ve.date:ve.object;default:return ve.unknown}},ue=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Rr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},i={_errors:[]},r=a=>{for(const u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(r);else if(u.code==="invalid_return_type")r(u.returnTypeError);else if(u.code==="invalid_arguments")r(u.argumentsError);else if(u.path.length===0)i._errors.push(n(u));else{let h=i,p=0;for(;p<u.path.length;){const m=u.path[p];p===u.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(n(u))):h[m]=h[m]||{_errors:[]},h=h[m],p++}}};return r(this),i}static assert(e){if(!(e instanceof Rr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Rr.create=t=>new Rr(t);const bg=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===ve.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,je.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${je.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${je.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${je.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:je.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,je.assertNever(t)}return{message:n}};let aL=bg;function lL(){return aL}const uL=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,a=[...n,...r.path||[]],u={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let h="";const p=i.filter(m=>!!m).slice().reverse();for(const m of p)h=m(u,{data:e,defaultError:h}).message;return{...r,path:a,message:h}};function me(t,e){const n=lL(),i=uL({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===bg?void 0:bg].filter(r=>!!r)});t.common.issues.push(i)}class Cn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Pe;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const a=await r.key,u=await r.value;i.push({key:a,value:u})}return Cn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:a,value:u}=r;if(a.status==="aborted"||u.status==="aborted")return Pe;a.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||r.alwaysSet)&&(i[a.value]=u.value)}return{status:e.value,value:i}}}const Pe=Object.freeze({status:"aborted"}),Uu=t=>({status:"dirty",value:t}),ti=t=>({status:"valid",value:t}),hC=t=>t.status==="aborted",mC=t=>t.status==="dirty",el=t=>t.status==="valid",Gd=t=>typeof Promise<"u"&&t instanceof Promise;var _e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_e||(_e={}));class Gi{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pC=(t,e)=>{if(el(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rr(t.common.issues);return this._error=n,this._error}}};function Le(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(u,h)=>{const{message:p}=t;return u.code==="invalid_enum_value"?{message:p??h.defaultError}:typeof h.data>"u"?{message:p??i??h.defaultError}:u.code!=="invalid_type"?{message:h.defaultError}:{message:p??n??h.defaultError}},description:r}}class $e{get description(){return this._def.description}_getType(e){return ls(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Cn,ctx:{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Gd(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},r=this._parseSync({data:e,path:i.path,parent:i});return pC(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return el(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(r=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>el(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},r=this._parse({data:e,path:i.path,parent:i}),a=await(Gd(r)?r:Promise.resolve(r));return pC(i,a)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,a)=>{const u=e(r),h=()=>a.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(h(),!1)):u?!0:(h(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new il({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ts.create(this,this._def)}nullable(){return rl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qi.create(this)}promise(){return Jd.create(this,this._def)}or(e){return $d.create([this,e],this._def)}and(e){return Kd.create(this,e,this._def)}transform(e){return new il({...Le(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Pg({...Le(this._def),innerType:this,defaultValue:n,typeName:Me.ZodDefault})}brand(){return new DL({typeName:Me.ZodBranded,type:this,...Le(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new kg({...Le(this._def),innerType:this,catchValue:n,typeName:Me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return jy.create(this,e)}readonly(){return Vg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cL=/^c[^\s-]{8,}$/i,fL=/^[0-9a-z]+$/,dL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mL=/^[a-z0-9_-]{21}$/i,pL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kp;const _L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,EL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,CL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,SL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Uw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xL=new RegExp(`^${Uw}$`);function Ow(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function wL(t){return new RegExp(`^${Ow(t)}$`)}function RL(t){let e=`${Uw}T${Ow(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function IL(t,e){return!!((e==="v4"||!e)&&_L.test(t)||(e==="v6"||!e)&&EL.test(t))}function bL(t,e){if(!pL.test(t))return!1;try{const[n]=t.split("."),i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function NL(t,e){return!!((e==="v4"||!e)&&TL.test(t)||(e==="v6"||!e)&&CL.test(t))}class Pi extends $e{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){const a=this._getOrReturnCtx(e);return me(a,{code:ue.invalid_type,expected:ve.string,received:a.parsedType}),Pe}const i=new Cn;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),me(r,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),me(r,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const u=e.data.length>a.value,h=e.data.length<a.value;(u||h)&&(r=this._getOrReturnCtx(e,r),u?me(r,{code:ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):h&&me(r,{code:ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")yL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"email",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")Kp||(Kp=new RegExp(vL,"u")),Kp.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"emoji",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")hL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"uuid",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")mL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"nanoid",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")cL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"cuid",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")fL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"cuid2",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")dL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"ulid",code:ue.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),me(r,{validation:"url",code:ue.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"regex",code:ue.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?RL(a).test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?xL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?wL(a).test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ue.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?gL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"duration",code:ue.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?IL(e.data,a.version)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"ip",code:ue.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?bL(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"jwt",code:ue.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?NL(e.data,a.version)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"cidr",code:ue.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?SL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"base64",code:ue.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?AL.test(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{validation:"base64url",code:ue.invalid_string,message:a.message}),i.dirty()):je.assertNever(a);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,..._e.errToObj(i)})}_addCheck(e){return new Pi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._e.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._e.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._e.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._e.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._e.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._e.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._e.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._e.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._e.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,..._e.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._e.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._e.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._e.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._e.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._e.errToObj(n)})}nonempty(e){return this.min(1,_e.errToObj(e))}trim(){return new Pi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Pi.create=t=>new Pi({checks:[],typeName:Me.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Le(t)});function ML(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,a=Number.parseInt(t.toFixed(r).replace(".","")),u=Number.parseInt(e.toFixed(r).replace(".",""));return a%u/10**r}class No extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){const a=this._getOrReturnCtx(e);return me(a,{code:ue.invalid_type,expected:ve.number,received:a.parsedType}),Pe}let i;const r=new Cn;for(const a of this._def.checks)a.kind==="int"?je.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{code:ue.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?ML(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{code:ue.not_finite,message:a.message}),r.dirty()):je.assertNever(a);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_e.toString(n))}setLimit(e,n,i,r){return new No({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_e.toString(r)}]})}_addCheck(e){return new No({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}No.create=t=>new No({checks:[],typeName:Me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class Mo extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ve.bigint)return this._getInvalidInput(e);let i;const r=new Cn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),me(i,{code:ue.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):je.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return me(n,{code:ue.invalid_type,expected:ve.bigint,received:n.parsedType}),Pe}gte(e,n){return this.setLimit("min",e,!0,_e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_e.toString(n))}setLimit(e,n,i,r){return new Mo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_e.toString(r)}]})}_addCheck(e){return new Mo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mo.create=t=>new Mo({checks:[],typeName:Me.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Le(t)});class Hd extends $e{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.boolean,received:i.parsedType}),Pe}return ti(e.data)}}Hd.create=t=>new Hd({typeName:Me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class tl extends $e{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){const a=this._getOrReturnCtx(e);return me(a,{code:ue.invalid_type,expected:ve.date,received:a.parsedType}),Pe}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return me(a,{code:ue.invalid_date}),Pe}const i=new Cn;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),me(r,{code:ue.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),me(r,{code:ue.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):je.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_e.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_e.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}tl.create=t=>new tl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Me.ZodDate,...Le(t)});class gC extends $e{_parse(e){if(this._getType(e)!==ve.symbol){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.symbol,received:i.parsedType}),Pe}return ti(e.data)}}gC.create=t=>new gC({typeName:Me.ZodSymbol,...Le(t)});class yC extends $e{_parse(e){if(this._getType(e)!==ve.undefined){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.undefined,received:i.parsedType}),Pe}return ti(e.data)}}yC.create=t=>new yC({typeName:Me.ZodUndefined,...Le(t)});class vC extends $e{_parse(e){if(this._getType(e)!==ve.null){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.null,received:i.parsedType}),Pe}return ti(e.data)}}vC.create=t=>new vC({typeName:Me.ZodNull,...Le(t)});class _C extends $e{constructor(){super(...arguments),this._any=!0}_parse(e){return ti(e.data)}}_C.create=t=>new _C({typeName:Me.ZodAny,...Le(t)});class Ng extends $e{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ti(e.data)}}Ng.create=t=>new Ng({typeName:Me.ZodUnknown,...Le(t)});class Is extends $e{_parse(e){const n=this._getOrReturnCtx(e);return me(n,{code:ue.invalid_type,expected:ve.never,received:n.parsedType}),Pe}}Is.create=t=>new Is({typeName:Me.ZodNever,...Le(t)});class TC extends $e{_parse(e){if(this._getType(e)!==ve.undefined){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.void,received:i.parsedType}),Pe}return ti(e.data)}}TC.create=t=>new TC({typeName:Me.ZodVoid,...Le(t)});class qi extends $e{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==ve.array)return me(n,{code:ue.invalid_type,expected:ve.array,received:n.parsedType}),Pe;if(r.exactLength!==null){const u=n.data.length>r.exactLength.value,h=n.data.length<r.exactLength.value;(u||h)&&(me(n,{code:u?ue.too_big:ue.too_small,minimum:h?r.exactLength.value:void 0,maximum:u?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(me(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(me(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((u,h)=>r.type._parseAsync(new Gi(n,u,n.path,h)))).then(u=>Cn.mergeArray(i,u));const a=[...n.data].map((u,h)=>r.type._parseSync(new Gi(n,u,n.path,h)));return Cn.mergeArray(i,a)}get element(){return this._def.type}min(e,n){return new qi({...this._def,minLength:{value:e,message:_e.toString(n)}})}max(e,n){return new qi({...this._def,maxLength:{value:e,message:_e.toString(n)}})}length(e,n){return new qi({...this._def,exactLength:{value:e,message:_e.toString(n)}})}nonempty(e){return this.min(1,e)}}qi.create=(t,e)=>new qi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...Le(e)});function Oa(t){if(t instanceof Ot){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Ts.create(Oa(i))}return new Ot({...t._def,shape:()=>e})}else return t instanceof qi?new qi({...t._def,type:Oa(t.element)}):t instanceof Ts?Ts.create(Oa(t.unwrap())):t instanceof rl?rl.create(Oa(t.unwrap())):t instanceof Do?Do.create(t.items.map(e=>Oa(e))):t}class Ot extends $e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=je.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ve.object){const m=this._getOrReturnCtx(e);return me(m,{code:ue.invalid_type,expected:ve.object,received:m.parsedType}),Pe}const{status:i,ctx:r}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),h=[];if(!(this._def.catchall instanceof Is&&this._def.unknownKeys==="strip"))for(const m in r.data)u.includes(m)||h.push(m);const p=[];for(const m of u){const v=a[m],E=r.data[m];p.push({key:{status:"valid",value:m},value:v._parse(new Gi(r,E,r.path,m)),alwaysSet:m in r.data})}if(this._def.catchall instanceof Is){const m=this._def.unknownKeys;if(m==="passthrough")for(const v of h)p.push({key:{status:"valid",value:v},value:{status:"valid",value:r.data[v]}});else if(m==="strict")h.length>0&&(me(r,{code:ue.unrecognized_keys,keys:h}),i.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const v of h){const E=r.data[v];p.push({key:{status:"valid",value:v},value:m._parse(new Gi(r,E,r.path,v)),alwaysSet:v in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const m=[];for(const v of p){const E=await v.key,C=await v.value;m.push({key:E,value:C,alwaysSet:v.alwaysSet})}return m}).then(m=>Cn.mergeObjectSync(i,m)):Cn.mergeObjectSync(i,p)}get shape(){return this._def.shape()}strict(e){return _e.errToObj,new Ot({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var a,u;const r=((u=(a=this._def).errorMap)==null?void 0:u.call(a,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:_e.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Ot({...this._def,unknownKeys:"strip"})}passthrough(){return new Ot({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ot({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ot({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ot({...this._def,catchall:e})}pick(e){const n={};for(const i of je.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new Ot({...this._def,shape:()=>n})}omit(e){const n={};for(const i of je.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new Ot({...this._def,shape:()=>n})}deepPartial(){return Oa(this)}partial(e){const n={};for(const i of je.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new Ot({...this._def,shape:()=>n})}required(e){const n={};for(const i of je.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof Ts;)a=a._def.innerType;n[i]=a}return new Ot({...this._def,shape:()=>n})}keyof(){return Fw(je.objectKeys(this.shape))}}Ot.create=(t,e)=>new Ot({shape:()=>t,unknownKeys:"strip",catchall:Is.create(),typeName:Me.ZodObject,...Le(e)});Ot.strictCreate=(t,e)=>new Ot({shape:()=>t,unknownKeys:"strict",catchall:Is.create(),typeName:Me.ZodObject,...Le(e)});Ot.lazycreate=(t,e)=>new Ot({shape:t,unknownKeys:"strip",catchall:Is.create(),typeName:Me.ZodObject,...Le(e)});class $d extends $e{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(a){for(const h of a)if(h.result.status==="valid")return h.result;for(const h of a)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const u=a.map(h=>new Rr(h.ctx.common.issues));return me(n,{code:ue.invalid_union,unionErrors:u}),Pe}if(n.common.async)return Promise.all(i.map(async a=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(r);{let a;const u=[];for(const p of i){const m={...n,common:{...n.common,issues:[]},parent:null},v=p._parseSync({data:n.data,path:n.path,parent:m});if(v.status==="valid")return v;v.status==="dirty"&&!a&&(a={result:v,ctx:m}),m.common.issues.length&&u.push(m.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const h=u.map(p=>new Rr(p));return me(n,{code:ue.invalid_union,unionErrors:h}),Pe}}get options(){return this._def.options}}$d.create=(t,e)=>new $d({options:t,typeName:Me.ZodUnion,...Le(e)});function Mg(t,e){const n=ls(t),i=ls(e);if(t===e)return{valid:!0,data:t};if(n===ve.object&&i===ve.object){const r=je.objectKeys(e),a=je.objectKeys(t).filter(h=>r.indexOf(h)!==-1),u={...t,...e};for(const h of a){const p=Mg(t[h],e[h]);if(!p.valid)return{valid:!1};u[h]=p.data}return{valid:!0,data:u}}else if(n===ve.array&&i===ve.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<t.length;a++){const u=t[a],h=e[a],p=Mg(u,h);if(!p.valid)return{valid:!1};r.push(p.data)}return{valid:!0,data:r}}else return n===ve.date&&i===ve.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Kd extends $e{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(a,u)=>{if(hC(a)||hC(u))return Pe;const h=Mg(a.value,u.value);return h.valid?((mC(a)||mC(u))&&n.dirty(),{status:n.value,value:h.data}):(me(i,{code:ue.invalid_intersection_types}),Pe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,u])=>r(a,u)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Kd.create=(t,e,n)=>new Kd({left:t,right:e,typeName:Me.ZodIntersection,...Le(n)});class Do extends $e{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ve.array)return me(i,{code:ue.invalid_type,expected:ve.array,received:i.parsedType}),Pe;if(i.data.length<this._def.items.length)return me(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&i.data.length>this._def.items.length&&(me(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...i.data].map((u,h)=>{const p=this._def.items[h]||this._def.rest;return p?p._parse(new Gi(i,u,i.path,h)):null}).filter(u=>!!u);return i.common.async?Promise.all(a).then(u=>Cn.mergeArray(n,u)):Cn.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Do({...this._def,rest:e})}}Do.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Do({items:t,typeName:Me.ZodTuple,rest:null,...Le(e)})};class Yd extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ve.object)return me(i,{code:ue.invalid_type,expected:ve.object,received:i.parsedType}),Pe;const r=[],a=this._def.keyType,u=this._def.valueType;for(const h in i.data)r.push({key:a._parse(new Gi(i,h,i.path,h)),value:u._parse(new Gi(i,i.data[h],i.path,h)),alwaysSet:h in i.data});return i.common.async?Cn.mergeObjectAsync(n,r):Cn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof $e?new Yd({keyType:e,valueType:n,typeName:Me.ZodRecord,...Le(i)}):new Yd({keyType:Pi.create(),valueType:e,typeName:Me.ZodRecord,...Le(n)})}}class EC extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ve.map)return me(i,{code:ue.invalid_type,expected:ve.map,received:i.parsedType}),Pe;const r=this._def.keyType,a=this._def.valueType,u=[...i.data.entries()].map(([h,p],m)=>({key:r._parse(new Gi(i,h,i.path,[m,"key"])),value:a._parse(new Gi(i,p,i.path,[m,"value"]))}));if(i.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const p of u){const m=await p.key,v=await p.value;if(m.status==="aborted"||v.status==="aborted")return Pe;(m.status==="dirty"||v.status==="dirty")&&n.dirty(),h.set(m.value,v.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const p of u){const m=p.key,v=p.value;if(m.status==="aborted"||v.status==="aborted")return Pe;(m.status==="dirty"||v.status==="dirty")&&n.dirty(),h.set(m.value,v.value)}return{status:n.value,value:h}}}}EC.create=(t,e,n)=>new EC({valueType:e,keyType:t,typeName:Me.ZodMap,...Le(n)});class ac extends $e{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ve.set)return me(i,{code:ue.invalid_type,expected:ve.set,received:i.parsedType}),Pe;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(me(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(me(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const a=this._def.valueType;function u(p){const m=new Set;for(const v of p){if(v.status==="aborted")return Pe;v.status==="dirty"&&n.dirty(),m.add(v.value)}return{status:n.value,value:m}}const h=[...i.data.values()].map((p,m)=>a._parse(new Gi(i,p,i.path,m)));return i.common.async?Promise.all(h).then(p=>u(p)):u(h)}min(e,n){return new ac({...this._def,minSize:{value:e,message:_e.toString(n)}})}max(e,n){return new ac({...this._def,maxSize:{value:e,message:_e.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ac.create=(t,e)=>new ac({valueType:t,minSize:null,maxSize:null,typeName:Me.ZodSet,...Le(e)});class Dg extends $e{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Dg.create=(t,e)=>new Dg({getter:t,typeName:Me.ZodLazy,...Le(e)});class CC extends $e{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return me(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}CC.create=(t,e)=>new CC({value:t,typeName:Me.ZodLiteral,...Le(e)});function Fw(t,e){return new nl({values:t,typeName:Me.ZodEnum,...Le(e)})}class nl extends $e{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return me(n,{expected:je.joinValues(i),received:n.parsedType,code:ue.invalid_type}),Pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return me(n,{received:n.data,code:ue.invalid_enum_value,options:i}),Pe}return ti(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return nl.create(e,{...this._def,...n})}exclude(e,n=this._def){return nl.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}nl.create=Fw;class SC extends $e{_parse(e){const n=je.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ve.string&&i.parsedType!==ve.number){const r=je.objectValues(n);return me(i,{expected:je.joinValues(r),received:i.parsedType,code:ue.invalid_type}),Pe}if(this._cache||(this._cache=new Set(je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=je.objectValues(n);return me(i,{received:i.data,code:ue.invalid_enum_value,options:r}),Pe}return ti(e.data)}get enum(){return this._def.values}}SC.create=(t,e)=>new SC({values:t,typeName:Me.ZodNativeEnum,...Le(e)});class Jd extends $e{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.promise&&n.common.async===!1)return me(n,{code:ue.invalid_type,expected:ve.promise,received:n.parsedType}),Pe;const i=n.parsedType===ve.promise?n.data:Promise.resolve(n.data);return ti(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Jd.create=(t,e)=>new Jd({type:t,typeName:Me.ZodPromise,...Le(e)});class il extends $e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:u=>{me(i,u),u.fatal?n.abort():n.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const u=r.transform(i.data,a);if(i.common.async)return Promise.resolve(u).then(async h=>{if(n.value==="aborted")return Pe;const p=await this._def.schema._parseAsync({data:h,path:i.path,parent:i});return p.status==="aborted"?Pe:p.status==="dirty"||n.value==="dirty"?Uu(p.value):p});{if(n.value==="aborted")return Pe;const h=this._def.schema._parseSync({data:u,path:i.path,parent:i});return h.status==="aborted"?Pe:h.status==="dirty"||n.value==="dirty"?Uu(h.value):h}}if(r.type==="refinement"){const u=h=>{const p=r.refinement(h,a);if(i.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(i.common.async===!1){const h=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return h.status==="aborted"?Pe:(h.status==="dirty"&&n.dirty(),u(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(h=>h.status==="aborted"?Pe:(h.status==="dirty"&&n.dirty(),u(h.value).then(()=>({status:n.value,value:h.value}))))}if(r.type==="transform")if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!el(u))return Pe;const h=r.transform(u.value,a);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>el(u)?Promise.resolve(r.transform(u.value,a)).then(h=>({status:n.value,value:h})):Pe);je.assertNever(r)}}il.create=(t,e,n)=>new il({schema:t,typeName:Me.ZodEffects,effect:e,...Le(n)});il.createWithPreprocess=(t,e,n)=>new il({schema:e,effect:{type:"preprocess",transform:t},typeName:Me.ZodEffects,...Le(n)});class Ts extends $e{_parse(e){return this._getType(e)===ve.undefined?ti(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ts.create=(t,e)=>new Ts({innerType:t,typeName:Me.ZodOptional,...Le(e)});class rl extends $e{_parse(e){return this._getType(e)===ve.null?ti(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rl.create=(t,e)=>new rl({innerType:t,typeName:Me.ZodNullable,...Le(e)});class Pg extends $e{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===ve.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Pg.create=(t,e)=>new Pg({innerType:t,typeName:Me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Le(e)});class kg extends $e{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Gd(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Rr(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Rr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}kg.create=(t,e)=>new kg({innerType:t,typeName:Me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Le(e)});class AC extends $e{_parse(e){if(this._getType(e)!==ve.nan){const i=this._getOrReturnCtx(e);return me(i,{code:ue.invalid_type,expected:ve.nan,received:i.parsedType}),Pe}return{status:"valid",value:e.data}}}AC.create=t=>new AC({typeName:Me.ZodNaN,...Le(t)});class DL extends $e{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class jy extends $e{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Pe:a.status==="dirty"?(n.dirty(),Uu(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Pe:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new jy({in:e,out:n,typeName:Me.ZodPipeline})}}class Vg extends $e{_parse(e){const n=this._def.innerType._parse(e),i=r=>(el(r)&&(r.value=Object.freeze(r.value)),r);return Gd(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}Vg.create=(t,e)=>new Vg({innerType:t,typeName:Me.ZodReadonly,...Le(e)});var Me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Me||(Me={}));const vo=Pi.create,xC=No.create;Mo.create;const PL=Hd.create;tl.create;const wC=Ng.create;Is.create;const Ou=qi.create,kL=Ot.create,VL=$d.create;Kd.create;Do.create;const LL=Yd.create,UL=Dg.create,OL=nl.create;Jd.create;Ts.create;rl.create;const Pa={string:t=>Pi.create({...t,coerce:!0}),number:t=>No.create({...t,coerce:!0}),boolean:t=>Hd.create({...t,coerce:!0}),bigint:t=>Mo.create({...t,coerce:!0}),date:t=>tl.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let FL,BL;function qL(){return{geminiUrl:FL,vertexUrl:BL}}function zL(t,e,n){var i,r,a;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const u=qL();return t.vertexai?(r=u.vertexUrl)!==null&&r!==void 0?r:e:(a=u.geminiUrl)!==null&&a!==void 0?a:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bo{}function Ee(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[h])){const p=t[h];if(Array.isArray(n))for(let m=0;m<p.length;m++){const v=p[m];f(v,e.slice(a+1),n[m])}else for(const m of p)f(m,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in t||(t[h]=[{}]);const p=t[h];f(p[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function c(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(u=>c(u,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var RC;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(RC||(RC={}));var IC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(IC||(IC={}));var ki;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ki||(ki={}));var bC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(bC||(bC={}));var NC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(NC||(NC={}));var MC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(MC||(MC={}));var DC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DC||(DC={}));var PC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(PC||(PC={}));var kC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(kC||(kC={}));var VC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(VC||(VC={}));var LC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LC||(LC={}));var UC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(UC||(UC={}));var OC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(OC||(OC={}));var Qd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qd||(Qd={}));var FC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(FC||(FC={}));var Lg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lg||(Lg={}));var BC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(BC||(BC={}));var qC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qC||(qC={}));var zC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(zC||(zC={}));var GC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GC||(GC={}));var HC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(HC||(HC={}));var $C;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})($C||($C={}));var KC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(KC||(KC={}));var YC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(YC||(YC={}));var JC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(JC||(JC={}));var QC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(QC||(QC={}));var WC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(WC||(WC={}));var XC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(XC||(XC={}));var jC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(jC||(jC={}));var ZC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ZC||(ZC={}));var eS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(eS||(eS={}));var tS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(tS||(tS={}));var nS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(nS||(nS={}));var iS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iS||(iS={}));var rS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rS||(rS={}));var sS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(sS||(sS={}));var oS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oS||(oS={}));var aS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(aS||(aS={}));var lS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lS||(lS={}));var Ba;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ba||(Ba={}));class Ug{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class bu{get text(){var e,n,i,r,a,u,h,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const C of(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[w,I]of Object.entries(C))w!=="text"&&w!=="thought"&&(I!==null||I!==void 0)&&E.push(w);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;v=!0,m+=C.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,i,r,a,u,h,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[C,w]of Object.entries(E))C!=="inlineData"&&(w!==null||w!==void 0)&&v.push(C);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,i,r,a,u,h,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,i,r,a,u,h,p,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,i,r,a,u,h,p,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class uS{}class cS{}class GL{}class HL{}class fS{}class dS{}class hS{}class $L{}class mS{}class pS{}class gS{}class KL{}class YL{}class JL{}class yS{}class QL{get text(){var e,n,i;let r="",a=!1;const u=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&a.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class WL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ot(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Bw(t,e){const n=ot(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function qw(t){return Array.isArray(t)?t.map(e=>Wd(e)):[Wd(t)]}function Wd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function XL(t){const e=Wd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jL(t){const e=Wd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vS(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>vS(e)):[vS(t)]}function Og(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _S(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pn(t){if(t==null)throw new Error("ContentUnion is required");return Og(t)?t:{role:"user",parts:zw(t)}}function Gw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=pn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=pn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pn(n)):[pn(e)]}function ei(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_S(t)||TS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(t)]}const e=[],n=[],i=Og(t[0]);for(const r of t){const a=Og(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(_S(r)||TS(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:zw(n)}),e}const ZL=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),ES=OL(["string","number","integer","object","array","boolean","null"]),eU=VL([ES,Ou(ES)]);function tU(t=!0){const e=UL(()=>{const n=kL({type:eU.optional(),format:vo().optional(),title:vo().optional(),description:vo().optional(),default:wC().optional(),items:e.optional(),minItems:Pa.string().optional(),maxItems:Pa.string().optional(),enum:Ou(wC()).optional(),properties:LL(vo(),e).optional(),required:Ou(vo()).optional(),minProperties:Pa.string().optional(),maxProperties:Pa.string().optional(),propertyOrdering:Ou(vo()).optional(),minimum:xC().optional(),maximum:xC().optional(),minLength:Pa.string().optional(),maxLength:Pa.string().optional(),pattern:vo().optional(),anyOf:Ou(e).optional(),additionalProperties:PL().optional()});return t?n.strict():n});return e}function nU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ki).includes(n[0].toUpperCase())?n[0].toUpperCase():ki.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ki).includes(i.toUpperCase())?i.toUpperCase():ki.TYPE_UNSPECIFIED})}}function $a(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&nU(t.type,e);for(const[u,h]of Object.entries(t))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(ki).includes(h.toUpperCase())?h.toUpperCase():ki.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=$a(h);else if(i.includes(u)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push($a(m))}e[u]=p}else if(r.includes(u)){const p={};for(const[m,v]of Object.entries(h))p[m]=$a(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function lc(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=tU().parse(t);return $a(e)}else return $a(t)}function Zy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ev(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ml(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=lc(e.parameters)),e.response&&(e.response=lc(e.response));return t}function pl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iU(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function br(t,e){if(typeof e!="string")throw new Error("name must be a string");return iU(t,e,"cachedContents")}function Hw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Nr(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function rU(t){return t!=null&&typeof t=="object"&&"name"in t}function sU(t){return t!=null&&typeof t=="object"&&"video"in t}function oU(t){return t!=null&&typeof t=="object"&&"uri"in t}function $w(t){var e;let n;if(rU(t)&&(n=t.name),!(oU(t)&&(n=t.uri,n===void 0))&&!(sU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Kw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Yw(t){for(const e of["models","tunedModels","publisherModels"])if(aU(t,e))return t[e];return[]}function aU(t,e){return t!==null&&typeof t=="object"&&e in t}function lU(t,e={}){const n=t,i={name:n.name,description:n.description,parameters:$a(Eh(n.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function uU(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=lU(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function cU(t){const e=[];for(const n of t)e.push(Eh(n));return e}function fU(t){const e={};for(const[n,i]of Object.entries(t)){const r=i;e[n]=Eh(r)}return e}function Eh(t){const e=new Set(["items"]),n=new Set(["anyOf"]),i=new Set(["properties"]),r={};for(const[a,u]of Object.entries(t))if(e.has(a))r[a]=Eh(u);else if(n.has(a))r[a]=cU(u);else if(i.has(a))r[a]=fU(u);else if(a==="type"){const h=u.toUpperCase();r[a]=Object.values(ki).includes(h)?h:ki.TYPE_UNSPECIFIED}else ZL.has(a)&&(r[a]=u);return r}function Jw(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function dU(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ch(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Qw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hU(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function mU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function pU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function gU(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],hU(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],mU(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],pU(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function Ww(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>gU(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function yU(t){const e={},n=c(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&f(e,["default"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const a=c(t,["enum"]);a!=null&&f(e,["enum"],a);const u=c(t,["example"]);u!=null&&f(e,["example"],u);const h=c(t,["format"]);h!=null&&f(e,["format"],h);const p=c(t,["items"]);p!=null&&f(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&f(e,["maxItems"],m);const v=c(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=c(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const C=c(t,["maximum"]);C!=null&&f(e,["maximum"],C);const w=c(t,["minItems"]);w!=null&&f(e,["minItems"],w);const I=c(t,["minLength"]);I!=null&&f(e,["minLength"],I);const D=c(t,["minProperties"]);D!=null&&f(e,["minProperties"],D);const V=c(t,["minimum"]);V!=null&&f(e,["minimum"],V);const H=c(t,["nullable"]);H!=null&&f(e,["nullable"],H);const z=c(t,["pattern"]);z!=null&&f(e,["pattern"],z);const G=c(t,["properties"]);G!=null&&f(e,["properties"],G);const ee=c(t,["propertyOrdering"]);ee!=null&&f(e,["propertyOrdering"],ee);const ne=c(t,["required"]);ne!=null&&f(e,["required"],ne);const fe=c(t,["title"]);fe!=null&&f(e,["title"],fe);const U=c(t,["type"]);return U!=null&&f(e,["type"],U),e}function vU(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function _U(t){const e={},n=c(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const a=c(t,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&f(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function TU(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function EU(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],TU(n)),e}function CU(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function SU(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],CU(n)),e}function AU(){return{}}function xU(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>_U(p))),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],EU(i));const r=c(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],SU(r)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&f(e,["urlContext"],AU());const u=c(t,["codeExecution"]);return u!=null&&f(e,["codeExecution"],u),e}function wU(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function RU(t){const e={},n=c(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function IU(t){const e={},n=c(t,["latLng"]);n!=null&&f(e,["latLng"],RU(n));const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function bU(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],wU(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],IU(i)),e}function NU(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function Xw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],NU(n)),e}function MU(t){const e={},n=c(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],Xw(i)),e}function DU(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>MU(r))),f(e,["speakerVoiceConfigs"],i)}return e}function PU(t){const e={},n=c(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],Xw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],DU(i));const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function kU(t){const e={},n=c(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function VU(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Ww(pn(r)));const a=c(e,["temperature"]);a!=null&&f(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&f(i,["topP"],u);const h=c(e,["topK"]);h!=null&&f(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&f(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&f(i,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=c(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const C=c(e,["logprobs"]);C!=null&&f(i,["logprobs"],C);const w=c(e,["presencePenalty"]);w!=null&&f(i,["presencePenalty"],w);const I=c(e,["frequencyPenalty"]);I!=null&&f(i,["frequencyPenalty"],I);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const H=c(e,["responseSchema"]);H!=null&&f(i,["responseSchema"],yU(lc(H)));const z=c(e,["responseJsonSchema"]);if(z!=null&&f(i,["responseJsonSchema"],z),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=c(e,["safetySettings"]);if(n!==void 0&&G!=null){let O=G;Array.isArray(O)&&(O=O.map(q=>vU(q))),f(n,["safetySettings"],O)}const ee=c(e,["tools"]);if(n!==void 0&&ee!=null){let O=pl(ee);Array.isArray(O)&&(O=O.map(q=>xU(ml(q)))),f(n,["tools"],O)}const ne=c(e,["toolConfig"]);if(n!==void 0&&ne!=null&&f(n,["toolConfig"],bU(ne)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=c(e,["cachedContent"]);n!==void 0&&fe!=null&&f(n,["cachedContent"],br(t,fe));const U=c(e,["responseModalities"]);U!=null&&f(i,["responseModalities"],U);const M=c(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const N=c(e,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],PU(Zy(N))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(e,["thinkingConfig"]);return P!=null&&f(i,["thinkingConfig"],kU(P)),i}function LU(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["request","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>Ww(h))),f(n,["request","contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["request","generationConfig"],VU(t,a,n)),n}function UU(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&f(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>LU(t,u))),f(n,["requests","requests"],a)}return n}function OU(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function FU(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["src"]);r!=null&&f(n,["batch","inputConfig"],UU(t,Jw(t,r)));const a=c(e,["config"]);return a!=null&&f(n,["config"],OU(a,n)),n}function BU(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ch(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function qU(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ch(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function zU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function GU(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],zU(n,e)),e}function HU(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $U(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function KU(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],$U(dU(r))),n}function YU(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],ot(t,i));const r=c(e,["src"]);r!=null&&f(n,["inputConfig"],HU(Jw(t,r)));const a=c(e,["config"]);return a!=null&&f(n,["config"],KU(a,n)),n}function JU(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ch(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function QU(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ch(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function WU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function XU(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],WU(n,e)),e}function jU(){return{}}function ZU(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function eO(t){const e={},n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function tO(t){const e={},n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function nO(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],ZU(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],eO(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],tO(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function iO(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nO(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function rO(t){const e={},n=c(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function sO(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function oO(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sO(r))),f(e,["urlMetadata"],i)}return e}function aO(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],iO(n));const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],rO(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=c(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&f(e,["urlContextMetadata"],oO(u));const h=c(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&f(e,["index"],m);const v=c(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=c(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function lO(t){const e={},n=c(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>aO(h))),f(e,["candidates"],u)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const r=c(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function uO(t){const e={},n=c(t,["response"]);return n!=null&&f(e,["response"],lO(n)),c(t,["error"])!=null&&f(e,["error"],jU()),e}function cO(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>uO(a))),f(e,["inlinedResponses"],r)}return e}function Fg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&f(e,["state"],Qw(r));const a=c(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["metadata","endTime"]);u!=null&&f(e,["endTime"],u);const h=c(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const p=c(t,["metadata","model"]);p!=null&&f(e,["model"],p);const m=c(t,["metadata","output"]);return m!=null&&f(e,["dest"],cO(m)),e}function fO(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Fg(a))),f(e,["batchJobs"],r)}return e}function dO(t){const e={},n=c(t,["details"]);n!=null&&f(e,["details"],n);const i=c(t,["code"]);i!=null&&f(e,["code"],i);const r=c(t,["message"]);return r!=null&&f(e,["message"],r),e}function hO(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function mO(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function Bg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["state"]);r!=null&&f(e,["state"],Qw(r));const a=c(t,["error"]);a!=null&&f(e,["error"],dO(a));const u=c(t,["createTime"]);u!=null&&f(e,["createTime"],u);const h=c(t,["startTime"]);h!=null&&f(e,["startTime"],h);const p=c(t,["endTime"]);p!=null&&f(e,["endTime"],p);const m=c(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=c(t,["model"]);v!=null&&f(e,["model"],v);const E=c(t,["inputConfig"]);E!=null&&f(e,["src"],hO(E));const C=c(t,["outputConfig"]);return C!=null&&f(e,["dest"],mO(C)),e}function pO(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Bg(a))),f(e,["batchJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Po;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Po||(Po={}));class Sc{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};i?typeof i=="object"?u=Object.assign({},i):u=i:u={config:{}},u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gO extends Bo{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Sc(Po.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=YU(this.apiClient,e);return h=Ee("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Bg(v))}else{const m=FU(this.apiClient,e);return h=Ee("{model}:batchGenerateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Fg(v))}}async get(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=JU(this.apiClient,e);return h=Ee("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Bg(v))}else{const m=BU(this.apiClient,e);return h=Ee("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Fg(v))}}async cancel(e){var n,i,r,a;let u="",h={};if(this.apiClient.isVertexAI()){const p=QU(this.apiClient,e);u=Ee("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=qU(this.apiClient,e);u=Ee("batches/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=XU(e);return h=Ee("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=pO(v),C=new yS;return Object.assign(C,E),C})}else{const m=GU(e);return h=Ee("batches",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=fO(v),C=new yS;return Object.assign(C,E),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yO(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function vO(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _O(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function TO(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],yO(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],vO(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],_O(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function CS(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>TO(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function EO(t){const e={},n=c(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const a=c(t,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&f(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function CO(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function SO(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],CO(n)),e}function AO(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function xO(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],AO(n)),e}function wO(){return{}}function RO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>EO(p))),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],SO(i));const r=c(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],xO(r)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&f(e,["urlContext"],wO());const u=c(t,["codeExecution"]);return u!=null&&f(e,["codeExecution"],u),e}function IO(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function bO(t){const e={},n=c(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function NO(t){const e={},n=c(t,["latLng"]);n!=null&&f(e,["latLng"],bO(n));const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function MO(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],IO(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],NO(i)),e}function DO(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=c(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let v=ei(u);Array.isArray(v)&&(v=v.map(E=>CS(E))),f(e,["contents"],v)}const h=c(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],CS(pn(h)));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>RO(E))),f(e,["tools"],v)}const m=c(t,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],MO(m)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function PO(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Bw(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],DO(r,n)),n}function kO(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function VO(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function LO(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function UO(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],LO(r,n)),n}function OO(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function FO(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],OO(n,e)),e}function BO(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function qO(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["data"]);i!=null&&f(e,["data"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function zO(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function GO(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],BO(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],qO(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],zO(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function SS(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>GO(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function HO(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=c(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&f(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function $O(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function KO(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],$O(n)),e}function YO(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function JO(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],YO(n)),e}function QO(){return{}}function WO(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function XO(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],WO(n));const i=c(t,["authType"]);i!=null&&f(e,["authType"],i);const r=c(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=c(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&f(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function jO(t){const e={},n=c(t,["authConfig"]);return n!=null&&f(e,["authConfig"],XO(n)),e}function ZO(){return{}}function e4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>HO(E))),f(e,["functionDeclarations"],v)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],KO(r));const a=c(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],JO(a)),c(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],QO());const h=c(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],jO(h)),c(t,["urlContext"])!=null&&f(e,["urlContext"],ZO());const m=c(t,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function t4(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function n4(t){const e={},n=c(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function i4(t){const e={},n=c(t,["latLng"]);n!=null&&f(e,["latLng"],n4(n));const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function r4(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],t4(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i4(i)),e}function s4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=c(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let E=ei(u);Array.isArray(E)&&(E=E.map(C=>SS(C))),f(e,["contents"],E)}const h=c(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],SS(pn(h)));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(C=>e4(C))),f(e,["tools"],E)}const m=c(t,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],r4(m));const v=c(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function o4(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Bw(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],s4(r,n)),n}function a4(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function l4(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function u4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function c4(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],br(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],u4(r,n)),n}function f4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function d4(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],f4(n,e)),e}function _d(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["model"]);r!=null&&f(e,["model"],r);const a=c(t,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const p=c(t,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function h4(){return{}}function m4(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>_d(a))),f(e,["cachedContents"],r)}return e}function Td(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["model"]);r!=null&&f(e,["model"],r);const a=c(t,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["expireTime"]);h!=null&&f(e,["expireTime"],h);const p=c(t,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function p4(){return{}}function g4(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Td(a))),f(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y4 extends Bo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Sc(Po.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=o4(this.apiClient,e);return h=Ee("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Td(v))}else{const m=PO(this.apiClient,e);return h=Ee("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_d(v))}}async get(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=a4(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Td(v))}else{const m=kO(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_d(v))}}async delete(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=l4(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(()=>{const v=p4(),E=new pS;return Object.assign(E,v),E})}else{const m=VO(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(()=>{const v=h4(),E=new pS;return Object.assign(E,v),E})}}async update(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=c4(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Td(v))}else{const m=UO(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_d(v))}}async listInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=d4(e);return h=Ee("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=g4(v),C=new gS;return Object.assign(C,E),C})}else{const m=FO(e);return h=Ee("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=m4(v),C=new gS;return Object.assign(C,E),C})}}}function AS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t){return this instanceof mt?(this.v=t,this):new mt(t)}function Ka(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(I){return Promise.resolve(I).then(w,E)}}function h(w,I){i[w]&&(r[w]=function(D){return new Promise(function(V,H){a.push([w,D,V,H])>1||p(w,D)})},I&&(r[w]=I(r[w])))}function p(w,I){try{m(i[w](I))}catch(D){C(a[0][3],D)}}function m(w){w.value instanceof mt?Promise.resolve(w.value.v).then(v,E):C(a[0][2],w)}function v(w){p("next",w)}function E(w){p("throw",w)}function C(w,I){w(I),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Ku(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AS=="function"?AS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(h,p){u=t[a](u),r(h,p,u.done,u.value)})}}function r(a,u,h,p){Promise.resolve(p).then(function(m){a({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v4(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:jw(n)}function jw(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function _4(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!jw(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class T4{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new E4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class E4{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),_4(a)}async sendMessage(e){var n;await this.sendPromise;const i=pn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,h;const p=await r,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let C=[];v!=null&&(C=(h=v.slice(E))!==null&&h!==void 0?h:[]);const w=m?[m]:[];this.recordHistory(i,w,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=pn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?xS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Ka(this,arguments,function*(){var u,h,p,m;const v=[];try{for(var E=!0,C=Ku(e),w;w=yield mt(C.next()),u=w.done,!u;E=!0){m=w.value,E=!1;const I=m;if(v4(I)){const D=(r=(i=I.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;D!==void 0&&v.push(D)}yield yield mt(I)}}catch(I){h={error:I}}finally{try{!E&&!u&&(p=C.return)&&(yield mt(p.call(C)))}finally{if(h)throw h.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...xS(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function S4(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],C4(n,e)),e}function A4(t){const e={},n=c(t,["details"]);n!=null&&f(e,["details"],n);const i=c(t,["message"]);i!=null&&f(e,["message"],i);const r=c(t,["code"]);return r!=null&&f(e,["code"],r),e}function x4(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=c(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const u=c(t,["createTime"]);u!=null&&f(e,["createTime"],u);const h=c(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const p=c(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const m=c(t,["sha256Hash"]);m!=null&&f(e,["sha256Hash"],m);const v=c(t,["uri"]);v!=null&&f(e,["uri"],v);const E=c(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const C=c(t,["state"]);C!=null&&f(e,["state"],C);const w=c(t,["source"]);w!=null&&f(e,["source"],w);const I=c(t,["videoMetadata"]);I!=null&&f(e,["videoMetadata"],I);const D=c(t,["error"]);return D!=null&&f(e,["error"],A4(D)),e}function w4(t){const e={},n=c(t,["file"]);n!=null&&f(e,["file"],x4(n));const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function R4(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","file"],$w(n));const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function I4(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","file"],$w(n));const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function b4(t){const e={},n=c(t,["details"]);n!=null&&f(e,["details"],n);const i=c(t,["message"]);i!=null&&f(e,["message"],i);const r=c(t,["code"]);return r!=null&&f(e,["code"],r),e}function qg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["mimeType"]);r!=null&&f(e,["mimeType"],r);const a=c(t,["sizeBytes"]);a!=null&&f(e,["sizeBytes"],a);const u=c(t,["createTime"]);u!=null&&f(e,["createTime"],u);const h=c(t,["expirationTime"]);h!=null&&f(e,["expirationTime"],h);const p=c(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const m=c(t,["sha256Hash"]);m!=null&&f(e,["sha256Hash"],m);const v=c(t,["uri"]);v!=null&&f(e,["uri"],v);const E=c(t,["downloadUri"]);E!=null&&f(e,["downloadUri"],E);const C=c(t,["state"]);C!=null&&f(e,["state"],C);const w=c(t,["source"]);w!=null&&f(e,["source"],w);const I=c(t,["videoMetadata"]);I!=null&&f(e,["videoMetadata"],I);const D=c(t,["error"]);return D!=null&&f(e,["error"],b4(D)),e}function N4(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>qg(a))),f(e,["files"],r)}return e}function M4(){return{}}function D4(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P4 extends Bo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Sc(Po.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>qg(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=S4(e);return a=Ee("files",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=N4(p),v=new KL;return Object.assign(v,m),v})}}async createInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=w4(e);return a=Ee("upload/v1beta/files",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(()=>{const p=M4(),m=new YL;return Object.assign(m,p),m})}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=R4(e);return a=Ee("files/{file}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>qg(p))}}async delete(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=I4(e);return a=Ee("files/{file}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(()=>{const p=D4(),m=new JL;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function V4(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function Zw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],k4(n)),e}function L4(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],V4(n)),e}function U4(t){const e={},n=c(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],Zw(i)),e}function O4(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>U4(r))),f(e,["speakerVoiceConfigs"],i)}return e}function F4(t){const e={},n=c(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],Zw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],O4(i));const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function B4(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],L4(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function q4(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function z4(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function G4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function H4(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["data"]);i!=null&&f(e,["data"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function $4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function K4(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Y4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],q4(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],G4(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],$4(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function J4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],z4(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],H4(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],K4(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function Q4(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Y4(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function W4(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>J4(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function X4(t){const e={},n=c(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const a=c(t,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&f(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function j4(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=c(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&f(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Z4(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function e6(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function t6(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],Z4(n)),e}function n6(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],e6(n)),e}function i6(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function r6(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function s6(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],i6(n)),e}function o6(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],r6(n)),e}function a6(){return{}}function l6(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function u6(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],l6(n));const i=c(t,["authType"]);i!=null&&f(e,["authType"],i);const r=c(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=c(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&f(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function c6(t){const e={},n=c(t,["authConfig"]);return n!=null&&f(e,["authConfig"],u6(n)),e}function f6(){return{}}function d6(){return{}}function h6(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>X4(p))),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],t6(i));const r=c(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],s6(r)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&f(e,["urlContext"],f6());const u=c(t,["codeExecution"]);return u!=null&&f(e,["codeExecution"],u),e}function m6(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>j4(E))),f(e,["functionDeclarations"],v)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],n6(r));const a=c(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],o6(a)),c(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],a6());const h=c(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],c6(h)),c(t,["urlContext"])!=null&&f(e,["urlContext"],d6());const m=c(t,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function p6(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function g6(t){const e={},n=c(t,["handle"]);n!=null&&f(e,["handle"],n);const i=c(t,["transparent"]);return i!=null&&f(e,["transparent"],i),e}function wS(){return{}}function RS(){return{}}function y6(t){const e={},n=c(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=c(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=c(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&f(e,["silenceDurationMs"],u),e}function v6(t){const e={},n=c(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=c(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=c(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&f(e,["silenceDurationMs"],u),e}function _6(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],y6(n));const i=c(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=c(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function T6(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],v6(n));const i=c(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=c(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function E6(t){const e={},n=c(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function C6(t){const e={},n=c(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function S6(t){const e={},n=c(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],E6(i)),e}function A6(t){const e={},n=c(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],C6(i)),e}function x6(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function w6(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function R6(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=c(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=c(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],F4(ev(E)));const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],Q4(pn(w)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let ne=pl(I);Array.isArray(ne)&&(ne=ne.map(fe=>h6(ml(fe)))),f(e,["setup","tools"],ne)}const D=c(t,["sessionResumption"]);e!==void 0&&D!=null&&f(e,["setup","sessionResumption"],p6(D));const V=c(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],wS());const H=c(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],wS());const z=c(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&f(e,["setup","realtimeInputConfig"],_6(z));const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],S6(G));const ee=c(t,["proactivity"]);return e!==void 0&&ee!=null&&f(e,["setup","proactivity"],x6(ee)),n}function I6(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=c(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=c(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],B4(ev(E)));const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],W4(pn(w)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let ne=pl(I);Array.isArray(ne)&&(ne=ne.map(fe=>m6(ml(fe)))),f(e,["setup","tools"],ne)}const D=c(t,["sessionResumption"]);e!==void 0&&D!=null&&f(e,["setup","sessionResumption"],g6(D));const V=c(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],RS());const H=c(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],RS());const z=c(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&f(e,["setup","realtimeInputConfig"],T6(z));const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],A6(G));const ee=c(t,["proactivity"]);return e!==void 0&&ee!=null&&f(e,["setup","proactivity"],w6(ee)),n}function b6(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],R6(r,n)),n}function N6(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],I6(r,n)),n}function M6(){return{}}function D6(){return{}}function P6(){return{}}function k6(){return{}}function V6(t){const e={},n=c(t,["media"]);n!=null&&f(e,["mediaChunks"],qw(n));const i=c(t,["audio"]);i!=null&&f(e,["audio"],jL(i));const r=c(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=c(t,["video"]);a!=null&&f(e,["video"],XL(a));const u=c(t,["text"]);return u!=null&&f(e,["text"],u),c(t,["activityStart"])!=null&&f(e,["activityStart"],M6()),c(t,["activityEnd"])!=null&&f(e,["activityEnd"],P6()),e}function L6(t){const e={},n=c(t,["media"]);if(n!=null&&f(e,["mediaChunks"],qw(n)),c(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=c(t,["audioStreamEnd"]);if(i!=null&&f(e,["audioStreamEnd"],i),c(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(c(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return c(t,["activityStart"])!=null&&f(e,["activityStart"],D6()),c(t,["activityEnd"])!=null&&f(e,["activityEnd"],k6()),e}function eR(t){const e={},n=c(t,["text"]);n!=null&&f(e,["text"],n);const i=c(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function U6(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eR(r))),f(e,["weightedPrompts"],i)}return e}function tR(t){const e={},n=c(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=c(t,["topK"]);i!=null&&f(e,["topK"],i);const r=c(t,["seed"]);r!=null&&f(e,["seed"],r);const a=c(t,["guidance"]);a!=null&&f(e,["guidance"],a);const u=c(t,["bpm"]);u!=null&&f(e,["bpm"],u);const h=c(t,["density"]);h!=null&&f(e,["density"],h);const p=c(t,["brightness"]);p!=null&&f(e,["brightness"],p);const m=c(t,["scale"]);m!=null&&f(e,["scale"],m);const v=c(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=c(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const C=c(t,["onlyBassAndDrums"]);return C!=null&&f(e,["onlyBassAndDrums"],C),e}function O6(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],tR(n)),e}function nR(t){const e={},n=c(t,["model"]);return n!=null&&f(e,["model"],n),e}function iR(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eR(r))),f(e,["weightedPrompts"],i)}return e}function zg(t){const e={},n=c(t,["setup"]);n!=null&&f(e,["setup"],nR(n));const i=c(t,["clientContent"]);i!=null&&f(e,["clientContent"],iR(i));const r=c(t,["musicGenerationConfig"]);r!=null&&f(e,["musicGenerationConfig"],tR(r));const a=c(t,["playbackControl"]);return a!=null&&f(e,["playbackControl"],a),e}function F6(){return{}}function B6(){return{}}function q6(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function z6(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function G6(t){const e={},n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function H6(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["data"]);i!=null&&f(e,["data"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function $6(t){const e={},n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function K6(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Y6(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],q6(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],G6(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],$6(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function J6(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],z6(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],H6(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],K6(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function Q6(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Y6(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function W6(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>J6(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function IS(t){const e={},n=c(t,["text"]);n!=null&&f(e,["text"],n);const i=c(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function bS(t){const e={},n=c(t,["text"]);n!=null&&f(e,["text"],n);const i=c(t,["finished"]);return i!=null&&f(e,["finished"],i),e}function X6(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function j6(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>X6(r))),f(e,["urlMetadata"],i)}return e}function Z6(t){const e={},n=c(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],Q6(n));const i=c(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=c(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=c(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const u=c(t,["generationComplete"]);u!=null&&f(e,["generationComplete"],u);const h=c(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],IS(h));const p=c(t,["outputTranscription"]);p!=null&&f(e,["outputTranscription"],IS(p));const m=c(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],j6(m)),e}function e3(t){const e={},n=c(t,["modelTurn"]);n!=null&&f(e,["modelTurn"],W6(n));const i=c(t,["turnComplete"]);i!=null&&f(e,["turnComplete"],i);const r=c(t,["interrupted"]);r!=null&&f(e,["interrupted"],r);const a=c(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const u=c(t,["generationComplete"]);u!=null&&f(e,["generationComplete"],u);const h=c(t,["inputTranscription"]);h!=null&&f(e,["inputTranscription"],bS(h));const p=c(t,["outputTranscription"]);return p!=null&&f(e,["outputTranscription"],bS(p)),e}function t3(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const i=c(t,["args"]);i!=null&&f(e,["args"],i);const r=c(t,["name"]);return r!=null&&f(e,["name"],r),e}function n3(t){const e={},n=c(t,["args"]);n!=null&&f(e,["args"],n);const i=c(t,["name"]);return i!=null&&f(e,["name"],i),e}function i3(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>t3(r))),f(e,["functionCalls"],i)}return e}function r3(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>n3(r))),f(e,["functionCalls"],i)}return e}function s3(t){const e={},n=c(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function o3(t){const e={},n=c(t,["ids"]);return n!=null&&f(e,["ids"],n),e}function id(t){const e={},n=c(t,["modality"]);n!=null&&f(e,["modality"],n);const i=c(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function rd(t){const e={},n=c(t,["modality"]);n!=null&&f(e,["modality"],n);const i=c(t,["tokenCount"]);return i!=null&&f(e,["tokenCount"],i),e}function a3(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=c(t,["responseTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=c(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const u=c(t,["thoughtsTokenCount"]);u!=null&&f(e,["thoughtsTokenCount"],u);const h=c(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const p=c(t,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(w=>id(w))),f(e,["promptTokensDetails"],C)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(w=>id(w))),f(e,["cacheTokensDetails"],C)}const v=c(t,["responseTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(w=>id(w))),f(e,["responseTokensDetails"],C)}const E=c(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(w=>id(w))),f(e,["toolUsePromptTokensDetails"],C)}return e}function l3(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=c(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const u=c(t,["thoughtsTokenCount"]);u!=null&&f(e,["thoughtsTokenCount"],u);const h=c(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const p=c(t,["promptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(I=>rd(I))),f(e,["promptTokensDetails"],w)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(I=>rd(I))),f(e,["cacheTokensDetails"],w)}const v=c(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(I=>rd(I))),f(e,["responseTokensDetails"],w)}const E=c(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(I=>rd(I))),f(e,["toolUsePromptTokensDetails"],w)}const C=c(t,["trafficType"]);return C!=null&&f(e,["trafficType"],C),e}function u3(t){const e={},n=c(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function c3(t){const e={},n=c(t,["timeLeft"]);return n!=null&&f(e,["timeLeft"],n),e}function f3(t){const e={},n=c(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=c(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=c(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function d3(t){const e={},n=c(t,["newHandle"]);n!=null&&f(e,["newHandle"],n);const i=c(t,["resumable"]);i!=null&&f(e,["resumable"],i);const r=c(t,["lastConsumedClientMessageIndex"]);return r!=null&&f(e,["lastConsumedClientMessageIndex"],r),e}function h3(t){const e={};c(t,["setupComplete"])!=null&&f(e,["setupComplete"],F6());const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],Z6(i));const r=c(t,["toolCall"]);r!=null&&f(e,["toolCall"],i3(r));const a=c(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],s3(a));const u=c(t,["usageMetadata"]);u!=null&&f(e,["usageMetadata"],a3(u));const h=c(t,["goAway"]);h!=null&&f(e,["goAway"],u3(h));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&f(e,["sessionResumptionUpdate"],f3(p)),e}function m3(t){const e={};c(t,["setupComplete"])!=null&&f(e,["setupComplete"],B6());const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],e3(i));const r=c(t,["toolCall"]);r!=null&&f(e,["toolCall"],r3(r));const a=c(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],o3(a));const u=c(t,["usageMetadata"]);u!=null&&f(e,["usageMetadata"],l3(u));const h=c(t,["goAway"]);h!=null&&f(e,["goAway"],c3(h));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&f(e,["sessionResumptionUpdate"],d3(p)),e}function p3(){return{}}function g3(t){const e={},n=c(t,["text"]);n!=null&&f(e,["text"],n);const i=c(t,["weight"]);return i!=null&&f(e,["weight"],i),e}function y3(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>g3(r))),f(e,["weightedPrompts"],i)}return e}function v3(t){const e={},n=c(t,["temperature"]);n!=null&&f(e,["temperature"],n);const i=c(t,["topK"]);i!=null&&f(e,["topK"],i);const r=c(t,["seed"]);r!=null&&f(e,["seed"],r);const a=c(t,["guidance"]);a!=null&&f(e,["guidance"],a);const u=c(t,["bpm"]);u!=null&&f(e,["bpm"],u);const h=c(t,["density"]);h!=null&&f(e,["density"],h);const p=c(t,["brightness"]);p!=null&&f(e,["brightness"],p);const m=c(t,["scale"]);m!=null&&f(e,["scale"],m);const v=c(t,["muteBass"]);v!=null&&f(e,["muteBass"],v);const E=c(t,["muteDrums"]);E!=null&&f(e,["muteDrums"],E);const C=c(t,["onlyBassAndDrums"]);return C!=null&&f(e,["onlyBassAndDrums"],C),e}function _3(t){const e={},n=c(t,["clientContent"]);n!=null&&f(e,["clientContent"],y3(n));const i=c(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],v3(i)),e}function T3(t){const e={},n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=c(t,["sourceMetadata"]);return r!=null&&f(e,["sourceMetadata"],_3(r)),e}function E3(t){const e={},n=c(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>T3(r))),f(e,["audioChunks"],i)}return e}function C3(t){const e={},n=c(t,["text"]);n!=null&&f(e,["text"],n);const i=c(t,["filteredReason"]);return i!=null&&f(e,["filteredReason"],i),e}function S3(t){const e={};c(t,["setupComplete"])!=null&&f(e,["setupComplete"],p3());const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],E3(i));const r=c(t,["filteredPrompt"]);return r!=null&&f(e,["filteredPrompt"],C3(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A3(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function x3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function w3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function R3(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],A3(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],x3(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],w3(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function Ah(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>R3(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function I3(t){const e={},n=c(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&f(e,["default"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const a=c(t,["enum"]);a!=null&&f(e,["enum"],a);const u=c(t,["example"]);u!=null&&f(e,["example"],u);const h=c(t,["format"]);h!=null&&f(e,["format"],h);const p=c(t,["items"]);p!=null&&f(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&f(e,["maxItems"],m);const v=c(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=c(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const C=c(t,["maximum"]);C!=null&&f(e,["maximum"],C);const w=c(t,["minItems"]);w!=null&&f(e,["minItems"],w);const I=c(t,["minLength"]);I!=null&&f(e,["minLength"],I);const D=c(t,["minProperties"]);D!=null&&f(e,["minProperties"],D);const V=c(t,["minimum"]);V!=null&&f(e,["minimum"],V);const H=c(t,["nullable"]);H!=null&&f(e,["nullable"],H);const z=c(t,["pattern"]);z!=null&&f(e,["pattern"],z);const G=c(t,["properties"]);G!=null&&f(e,["properties"],G);const ee=c(t,["propertyOrdering"]);ee!=null&&f(e,["propertyOrdering"],ee);const ne=c(t,["required"]);ne!=null&&f(e,["required"],ne);const fe=c(t,["title"]);fe!=null&&f(e,["title"],fe);const U=c(t,["type"]);return U!=null&&f(e,["type"],U),e}function b3(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function N3(t){const e={},n=c(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const a=c(t,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&f(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function M3(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function D3(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],M3(n)),e}function P3(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function k3(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],P3(n)),e}function V3(){return{}}function L3(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>N3(p))),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],D3(i));const r=c(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],k3(r)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&f(e,["urlContext"],V3());const u=c(t,["codeExecution"]);return u!=null&&f(e,["codeExecution"],u),e}function U3(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function O3(t){const e={},n=c(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function F3(t){const e={},n=c(t,["latLng"]);n!=null&&f(e,["latLng"],O3(n));const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function B3(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],U3(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],F3(i)),e}function q3(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function rR(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],q3(n)),e}function z3(t){const e={},n=c(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],rR(i)),e}function G3(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>z3(r))),f(e,["speakerVoiceConfigs"],i)}return e}function H3(t){const e={},n=c(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],rR(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],G3(i));const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function $3(t){const e={},n=c(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function K3(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Ah(pn(r)));const a=c(e,["temperature"]);a!=null&&f(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&f(i,["topP"],u);const h=c(e,["topK"]);h!=null&&f(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&f(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&f(i,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=c(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const C=c(e,["logprobs"]);C!=null&&f(i,["logprobs"],C);const w=c(e,["presencePenalty"]);w!=null&&f(i,["presencePenalty"],w);const I=c(e,["frequencyPenalty"]);I!=null&&f(i,["frequencyPenalty"],I);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const H=c(e,["responseSchema"]);H!=null&&f(i,["responseSchema"],I3(lc(H)));const z=c(e,["responseJsonSchema"]);if(z!=null&&f(i,["responseJsonSchema"],z),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=c(e,["safetySettings"]);if(n!==void 0&&G!=null){let O=G;Array.isArray(O)&&(O=O.map(q=>b3(q))),f(n,["safetySettings"],O)}const ee=c(e,["tools"]);if(n!==void 0&&ee!=null){let O=pl(ee);Array.isArray(O)&&(O=O.map(q=>L3(ml(q)))),f(n,["tools"],O)}const ne=c(e,["toolConfig"]);if(n!==void 0&&ne!=null&&f(n,["toolConfig"],B3(ne)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=c(e,["cachedContent"]);n!==void 0&&fe!=null&&f(n,["cachedContent"],br(t,fe));const U=c(e,["responseModalities"]);U!=null&&f(i,["responseModalities"],U);const M=c(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const N=c(e,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],H3(Zy(N))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(e,["thinkingConfig"]);return P!=null&&f(i,["thinkingConfig"],$3(P)),i}function NS(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>Ah(h))),f(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["generationConfig"],K3(t,a,n)),n}function Y3(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=c(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function J3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);r!=null&&f(n,["requests[]","content"],Gw(t,r));const a=c(e,["config"]);a!=null&&f(n,["config"],Y3(a,n));const u=c(e,["model"]);return u!==void 0&&f(n,["requests[]","model"],ot(t,u)),n}function Q3(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=c(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=c(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=c(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const C=c(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&f(e,["parameters","outputOptions","compressionQuality"],C),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function W3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=c(e,["config"]);return a!=null&&f(n,["config"],Q3(a,n)),n}function X3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function j3(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=c(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const u=c(e,["filter"]);n!==void 0&&u!=null&&f(n,["_query","filter"],u);const h=c(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],Kw(t,h)),i}function Z3(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],j3(t,i,n)),n}function eF(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=c(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function tF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],eF(r,n)),n}function nF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function iF(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>Ah(h))),f(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["config"],iF(a)),n}function sF(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Nr(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function oF(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["aspectRatio"]);if(e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a),c(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=c(t,["negativePrompt"]);e!==void 0&&h!=null&&f(e,["parameters","negativePrompt"],h);const p=c(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(c(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function aF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=c(e,["image"]);if(a!=null&&f(n,["instances[0]","image"],sF(a)),c(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=c(e,["config"]);return u!=null&&f(n,["config"],oF(u,n)),n}function lF(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function uF(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["data"]);i!=null&&f(e,["data"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function cF(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function fF(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],lF(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],uF(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],cF(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function gl(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fF(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function dF(t){const e={},n=c(t,["anyOf"]);n!=null&&f(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&f(e,["default"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const a=c(t,["enum"]);a!=null&&f(e,["enum"],a);const u=c(t,["example"]);u!=null&&f(e,["example"],u);const h=c(t,["format"]);h!=null&&f(e,["format"],h);const p=c(t,["items"]);p!=null&&f(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&f(e,["maxItems"],m);const v=c(t,["maxLength"]);v!=null&&f(e,["maxLength"],v);const E=c(t,["maxProperties"]);E!=null&&f(e,["maxProperties"],E);const C=c(t,["maximum"]);C!=null&&f(e,["maximum"],C);const w=c(t,["minItems"]);w!=null&&f(e,["minItems"],w);const I=c(t,["minLength"]);I!=null&&f(e,["minLength"],I);const D=c(t,["minProperties"]);D!=null&&f(e,["minProperties"],D);const V=c(t,["minimum"]);V!=null&&f(e,["minimum"],V);const H=c(t,["nullable"]);H!=null&&f(e,["nullable"],H);const z=c(t,["pattern"]);z!=null&&f(e,["pattern"],z);const G=c(t,["properties"]);G!=null&&f(e,["properties"],G);const ee=c(t,["propertyOrdering"]);ee!=null&&f(e,["propertyOrdering"],ee);const ne=c(t,["required"]);ne!=null&&f(e,["required"],ne);const fe=c(t,["title"]);fe!=null&&f(e,["title"],fe);const U=c(t,["type"]);return U!=null&&f(e,["type"],U),e}function hF(t){const e={},n=c(t,["featureSelectionPreference"]);return n!=null&&f(e,["featureSelectionPreference"],n),e}function mF(t){const e={},n=c(t,["method"]);n!=null&&f(e,["method"],n);const i=c(t,["category"]);i!=null&&f(e,["category"],i);const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function pF(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const r=c(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=c(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&f(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function gF(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function yF(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],gF(n)),e}function vF(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function _F(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],vF(n)),e}function TF(){return{}}function EF(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&f(e,["apiKeyString"],n),e}function CF(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&f(e,["apiKeyConfig"],EF(n));const i=c(t,["authType"]);i!=null&&f(e,["authType"],i);const r=c(t,["googleServiceAccountConfig"]);r!=null&&f(e,["googleServiceAccountConfig"],r);const a=c(t,["httpBasicAuthConfig"]);a!=null&&f(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&f(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&f(e,["oidcConfig"],h),e}function SF(t){const e={},n=c(t,["authConfig"]);return n!=null&&f(e,["authConfig"],CF(n)),e}function AF(){return{}}function sR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>pF(E))),f(e,["functionDeclarations"],v)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],yF(r));const a=c(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],_F(a)),c(t,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],TF());const h=c(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],SF(h)),c(t,["urlContext"])!=null&&f(e,["urlContext"],AF());const m=c(t,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function xF(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&f(e,["allowedFunctionNames"],i),e}function wF(t){const e={},n=c(t,["latitude"]);n!=null&&f(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&f(e,["longitude"],i),e}function RF(t){const e={},n=c(t,["latLng"]);n!=null&&f(e,["latLng"],wF(n));const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function IF(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],xF(n));const i=c(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],RF(i)),e}function bF(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function NF(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],bF(n)),e}function MF(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],NF(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function DF(t){const e={},n=c(t,["includeThoughts"]);n!=null&&f(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&f(e,["thinkingBudget"],i),e}function PF(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],gl(pn(r)));const a=c(e,["temperature"]);a!=null&&f(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&f(i,["topP"],u);const h=c(e,["topK"]);h!=null&&f(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&f(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&f(i,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&f(i,["stopSequences"],v);const E=c(e,["responseLogprobs"]);E!=null&&f(i,["responseLogprobs"],E);const C=c(e,["logprobs"]);C!=null&&f(i,["logprobs"],C);const w=c(e,["presencePenalty"]);w!=null&&f(i,["presencePenalty"],w);const I=c(e,["frequencyPenalty"]);I!=null&&f(i,["frequencyPenalty"],I);const D=c(e,["seed"]);D!=null&&f(i,["seed"],D);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const H=c(e,["responseSchema"]);H!=null&&f(i,["responseSchema"],dF(lc(H)));const z=c(e,["responseJsonSchema"]);z!=null&&f(i,["responseJsonSchema"],z);const G=c(e,["routingConfig"]);G!=null&&f(i,["routingConfig"],G);const ee=c(e,["modelSelectionConfig"]);ee!=null&&f(i,["modelConfig"],hF(ee));const ne=c(e,["safetySettings"]);if(n!==void 0&&ne!=null){let We=ne;Array.isArray(We)&&(We=We.map(Z=>mF(Z))),f(n,["safetySettings"],We)}const fe=c(e,["tools"]);if(n!==void 0&&fe!=null){let We=pl(fe);Array.isArray(We)&&(We=We.map(Z=>sR(ml(Z)))),f(n,["tools"],We)}const U=c(e,["toolConfig"]);n!==void 0&&U!=null&&f(n,["toolConfig"],IF(U));const M=c(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const N=c(e,["cachedContent"]);n!==void 0&&N!=null&&f(n,["cachedContent"],br(t,N));const P=c(e,["responseModalities"]);P!=null&&f(i,["responseModalities"],P);const O=c(e,["mediaResolution"]);O!=null&&f(i,["mediaResolution"],O);const q=c(e,["speechConfig"]);q!=null&&f(i,["speechConfig"],MF(Zy(q)));const L=c(e,["audioTimestamp"]);L!=null&&f(i,["audioTimestamp"],L);const Dt=c(e,["thinkingConfig"]);return Dt!=null&&f(i,["thinkingConfig"],DF(Dt)),i}function MS(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>gl(h))),f(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["generationConfig"],PF(t,a,n)),n}function kF(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=c(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const u=c(t,["mimeType"]);e!==void 0&&u!=null&&f(e,["instances[]","mimeType"],u);const h=c(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function VF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);r!=null&&f(n,["instances[]","content"],Gw(t,r));const a=c(e,["config"]);return a!=null&&f(n,["config"],kF(a,n)),n}function LF(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const h=c(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const p=c(t,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=c(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const C=c(t,["includeRaiReason"]);e!==void 0&&C!=null&&f(e,["parameters","includeRaiReason"],C);const w=c(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const I=c(t,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const D=c(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const V=c(t,["addWatermark"]);e!==void 0&&V!=null&&f(e,["parameters","addWatermark"],V);const H=c(t,["enhancePrompt"]);return e!==void 0&&H!=null&&f(e,["parameters","enhancePrompt"],H),n}function UF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=c(e,["config"]);return a!=null&&f(n,["config"],LF(a,n)),n}function xh(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Nr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function OF(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function FF(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function BF(t){const e={},n=c(t,["styleDescription"]);return n!=null&&f(e,["styleDescription"],n),e}function qF(t){const e={},n=c(t,["subjectType"]);n!=null&&f(e,["subjectType"],n);const i=c(t,["subjectDescription"]);return i!=null&&f(e,["subjectDescription"],i),e}function zF(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],xh(n));const i=c(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=c(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],OF(a));const u=c(t,["controlImageConfig"]);u!=null&&f(e,["controlImageConfig"],FF(u));const h=c(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],BF(h));const p=c(t,["subjectImageConfig"]);return p!=null&&f(e,["subjectImageConfig"],qF(p)),e}function GF(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const h=c(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const p=c(t,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=c(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const C=c(t,["includeRaiReason"]);e!==void 0&&C!=null&&f(e,["parameters","includeRaiReason"],C);const w=c(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const I=c(t,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const D=c(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const V=c(t,["editMode"]);e!==void 0&&V!=null&&f(e,["parameters","editMode"],V);const H=c(t,["baseSteps"]);return e!==void 0&&H!=null&&f(e,["parameters","editConfig","baseSteps"],H),n}function HF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=c(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(p=>zF(p))),f(n,["instances[0]","referenceImages"],h)}const u=c(e,["config"]);return u!=null&&f(n,["config"],GF(u,n)),n}function $F(t,e){const n={},i=c(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const r=c(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const a=c(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","compressionQuality"],a);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],u);const h=c(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=c(t,["numberOfImages"]);e!==void 0&&p!=null&&f(e,["parameters","sampleCount"],p);const m=c(t,["mode"]);return e!==void 0&&m!=null&&f(e,["parameters","mode"],m),n}function KF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],xh(r));const a=c(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=c(e,["config"]);return u!=null&&f(n,["config"],$F(u,n)),n}function YF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function JF(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=c(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const u=c(e,["filter"]);n!==void 0&&u!=null&&f(n,["_query","filter"],u);const h=c(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],Kw(t,h)),i}function QF(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],JF(t,i,n)),n}function WF(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=c(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function XF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],WF(r,n)),n}function jF(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],r),n}function ZF(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],gl(pn(i)));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>sR(h))),f(e,["tools"],u)}const a=c(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],a),n}function e9(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>gl(h))),f(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["config"],ZF(a,n)),n}function t9(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(h=>gl(h))),f(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&f(n,["config"],a),n}function n9(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Nr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function i9(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=c(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const u=c(t,["durationSeconds"]);e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const m=c(t,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=c(t,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const C=c(t,["negativePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","negativePrompt"],C);const w=c(t,["enhancePrompt"]);e!==void 0&&w!=null&&f(e,["parameters","enhancePrompt"],w);const I=c(t,["generateAudio"]);e!==void 0&&I!=null&&f(e,["parameters","generateAudio"],I);const D=c(t,["lastFrame"]);e!==void 0&&D!=null&&f(e,["instances[0]","lastFrame"],xh(D));const V=c(t,["compressionQuality"]);return e!==void 0&&V!=null&&f(e,["parameters","compressionQuality"],V),n}function r9(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ot(t,i));const r=c(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=c(e,["image"]);a!=null&&f(n,["instances[0]","image"],xh(a));const u=c(e,["video"]);u!=null&&f(n,["instances[0]","video"],n9(u));const h=c(e,["config"]);return h!=null&&f(n,["config"],i9(h,n)),n}function s9(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function o9(t){const e={},n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function a9(t){const e={},n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function l9(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],s9(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],o9(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],a9(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function u9(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>l9(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function c9(t){const e={},n=c(t,["citationSources"]);return n!=null&&f(e,["citations"],n),e}function f9(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function d9(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>f9(r))),f(e,["urlMetadata"],i)}return e}function h9(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],u9(n));const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],c9(i));const r=c(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=c(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&f(e,["urlContextMetadata"],d9(u));const h=c(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&f(e,["index"],m);const v=c(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=c(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function DS(t){const e={},n=c(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h9(h))),f(e,["candidates"],u)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const r=c(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function m9(t){const e={},n=c(t,["values"]);return n!=null&&f(e,["values"],n),e}function p9(){return{}}function g9(t){const e={},n=c(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>m9(a))),f(e,["embeddings"],r)}return c(t,["metadata"])!=null&&f(e,["metadata"],p9()),e}function y9(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Nr(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function oR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function v9(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],y9(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],oR(r)),e}function _9(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>v9(a))),f(e,["generatedImages"],r)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],oR(i)),e}function T9(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Gg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const a=c(t,["version"]);a!=null&&f(e,["version"],a);const u=c(t,["_self"]);u!=null&&f(e,["tunedModelInfo"],T9(u));const h=c(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const p=c(t,["outputTokenLimit"]);p!=null&&f(e,["outputTokenLimit"],p);const m=c(t,["supportedGenerationMethods"]);return m!=null&&f(e,["supportedActions"],m),e}function E9(t,e){const n={},i=c(e,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const r=c(e,["_self"]);if(r!=null){let a=Yw(r);Array.isArray(a)&&(a=a.map(u=>Gg(u))),f(n,["models"],a)}return n}function C9(){return{}}function S9(t){const e={},n=c(t,["totalTokens"]);n!=null&&f(e,["totalTokens"],n);const i=c(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function A9(t){const e={},n=c(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Nr(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function x9(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],A9(n)),e}function w9(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>x9(u))),f(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function R9(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const a=c(t,["error"]);a!=null&&f(e,["error"],a);const u=c(t,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],w9(u)),e}function I9(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function b9(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["data"]);i!=null&&f(e,["data"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function N9(t){const e={},n=c(t,["displayName"]);n!=null&&f(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function M9(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],I9(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],b9(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],N9(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function D9(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>M9(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function P9(t){const e={},n=c(t,["citations"]);return n!=null&&f(e,["citations"],n),e}function k9(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&f(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&f(e,["urlRetrievalStatus"],i),e}function V9(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>k9(r))),f(e,["urlMetadata"],i)}return e}function L9(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],D9(n));const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],P9(i));const r=c(t,["finishMessage"]);r!=null&&f(e,["finishMessage"],r);const a=c(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&f(e,["urlContextMetadata"],V9(u));const h=c(t,["avgLogprobs"]);h!=null&&f(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&f(e,["index"],m);const v=c(t,["logprobsResult"]);v!=null&&f(e,["logprobsResult"],v);const E=c(t,["safetyRatings"]);return E!=null&&f(e,["safetyRatings"],E),e}function PS(t){const e={},n=c(t,["candidates"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>L9(m))),f(e,["candidates"],p)}const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=c(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(t,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const h=c(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function U9(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function O9(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&f(e,["statistics"],U9(i)),e}function F9(t){const e={},n=c(t,["billableCharacterCount"]);return n!=null&&f(e,["billableCharacterCount"],n),e}function B9(t){const e={},n=c(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>O9(a))),f(e,["embeddings"],r)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],F9(i)),e}function q9(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Nr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function tv(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],q9(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&f(e,["safetyAttributes"],aR(r));const a=c(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function z9(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>tv(a))),f(e,["generatedImages"],r)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],aR(i)),e}function G9(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>tv(r))),f(e,["generatedImages"],i)}return e}function H9(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>tv(r))),f(e,["generatedImages"],i)}return e}function $9(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function K9(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Y9(t){const e={},n=c(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=c(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=c(t,["step"]);return r!=null&&f(e,["step"],r),e}function Hg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const r=c(t,["description"]);r!=null&&f(e,["description"],r);const a=c(t,["versionId"]);a!=null&&f(e,["version"],a);const u=c(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(C=>$9(C))),f(e,["endpoints"],E)}const h=c(t,["labels"]);h!=null&&f(e,["labels"],h);const p=c(t,["_self"]);p!=null&&f(e,["tunedModelInfo"],K9(p));const m=c(t,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=c(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(C=>Y9(C))),f(e,["checkpoints"],E)}return e}function J9(t,e){const n={},i=c(e,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const r=c(e,["_self"]);if(r!=null){let a=Yw(r);Array.isArray(a)&&(a=a.map(u=>Hg(u))),f(n,["models"],a)}return n}function Q9(){return{}}function W9(t){const e={},n=c(t,["totalTokens"]);return n!=null&&f(e,["totalTokens"],n),e}function X9(t){const e={},n=c(t,["tokensInfo"]);return n!=null&&f(e,["tokensInfo"],n),e}function j9(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Nr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Z9(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],j9(n)),e}function eB(t){const e={},n=c(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Z9(u))),f(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function tB(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const a=c(t,["error"]);a!=null&&f(e,["error"],a);const u=c(t,["response"]);return u!=null&&f(e,["response"],eB(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nB="Content-Type",iB="X-Server-Timeout",rB="User-Agent",$g="x-goog-api-client",sB="1.7.0",oB=`google-genai-sdk/${sB}`,aB="v1beta1",lB="v1beta",kS=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class uB{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:aB,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:lB,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))r.searchParams.append(u,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,a=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&cB(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await VS(r),new Ug(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await VS(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Ka(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:p}=yield mt(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p);try{const E=JSON.parse(m);if("error"in E){const C=JSON.parse(JSON.stringify(E.error)),w=C.status,I=C.code,D=`got status: ${w}. ${JSON.stringify(E)}`;if(I>=400&&I<600)throw new Sh({message:D,status:I})}}catch(E){if(E.name==="ApiError")throw E}u+=m;let v=u.match(kS);for(;v;){const E=v[1];try{const C=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield mt(new Ug(C)),u=u.slice(v[0].length),v=u.match(kS)}catch(C){throw new Error(`exception parsing stream chunk ${E}. ${C}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=oB+" "+this.clientOptions.userAgentExtra;return e[rB]=n,e[$g]=n,e[nB]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(iB,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const p=await this.fetchUploadUrl(r,n);return a.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},u=await this.request({path:Ee("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function VS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Sh({message:r,status:n}):new Error(r)}}function cB(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const h=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fB="mcp_used/unknown";function lR(t){for(const e of t)if(nv(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function uR(t){var e;const n=(e=t[$g])!==null&&e!==void 0?e:"";t[$g]=(n+` ${fB}`).trimStart()}function dB(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>nv(r)))!==null&&i!==void 0?i:!1}function hB(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!nv(r)))!==null&&i!==void 0?i:!1}function nv(t){return t!==null&&typeof t=="object"&&t instanceof iv}function mB(t,e=100){return Ka(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield mt(t.listTools({cursor:i}));for(const u of a.tools)yield yield mt(u),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class iv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new iv(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var h=!0,p=(n=void 0,Ku(mB(v))),m;m=await p.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const E=r;u.push(E);const C=E.name;if(a[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);a[C]=v}}catch(E){n={error:E}}finally{try{!h&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),uU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pB(t,e,n){const i=new WL;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=S3(r);Object.assign(i,a),e(i)}class gB{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=_B(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(G=>{m=G}),E=e.callbacks,C=function(){m({})},w=this.apiClient,I={onopen:C,onmessage:G=>{pB(w,E.onmessage,G)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(G){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(G){}},D=this.webSocketFactory.create(p,vB(u),I);D.connect(),await v;const V=ot(this.apiClient,e.model),H=nR({model:V}),z=zg({setup:H});return D.send(JSON.stringify(z)),new yB(D,this.apiClient)}}class yB{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=U6(e),i=iR(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=O6(e),i=zg(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=zg({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ba.PLAY)}pause(){this.sendPlaybackControl(Ba.PAUSE)}stop(){this.sendPlaybackControl(Ba.STOP)}resetContext(){this.sendPlaybackControl(Ba.RESET_CONTEXT)}close(){this.conn.close()}}function vB(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function _B(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TB="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function EB(t,e,n){const i=new QL;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=m3(a);Object.assign(i,u)}else{const u=h3(a);Object.assign(i,u)}e(i)}class CB{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new gB(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,u,h;const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&lR(e.config.tools)&&uR(E);const C=wB(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",O="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),P="BidiGenerateContentConstrained",O="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${O}=${N}`}let w=()=>{};const I=new Promise(N=>{w=N}),D=e.callbacks,V=function(){var N;(N=D==null?void 0:D.onopen)===null||N===void 0||N.call(D),w({})},H=this.apiClient,z={onopen:V,onmessage:N=>{EB(H,D.onmessage,N)},onerror:(n=D==null?void 0:D.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=D==null?void 0:D.onclose)!==null&&i!==void 0?i:function(N){}},G=this.webSocketFactory.create(v,xB(C),z);G.connect(),await I;let ee=ot(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();ee=`projects/${N}/locations/${P}/`+ee}let ne={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qd.AUDIO]}:e.config.responseModalities=[Qd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],U=[];for(const N of fe)if(this.isCallableTool(N)){const P=N;U.push(await P.tool())}else U.push(N);U.length>0&&(e.config.tools=U);const M={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=N6(this.apiClient,M):ne=b6(this.apiClient,M),delete ne.config,G.send(JSON.stringify(ne)),new AB(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const SB={turnComplete:!0};class AB{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ei(n.turns),e.isVertexAI()?i=i.map(r=>gl(r)):i=i.map(r=>Ah(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(TB)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},SB),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:L6(e)}:n={realtimeInput:V6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xB(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wB(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LS=10;function US(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ed(u)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ed(t){return"callTool"in t&&typeof t.callTool=="function"}function OS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RB extends Bo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,u,h;const p=await this.processParamsForMcpUsage(n);if(!dB(n)||US(n.config))return await this.generateContentInternal(p);if(hB(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=ei(p.contents),C=(a=(r=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:LS;let w=0;for(;w<C&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const I=m.candidates[0].content,D=[];for(const V of(h=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Ed(V)){const z=await V.callTool(m.functionCalls);D.push(...z)}w++,v={role:"user",parts:D},p.contents=ei(p.contents),p.contents.push(I),p.contents.push(v),OS(p.config)&&(E.push(I),E.push(v))}return OS(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async n=>{if(US(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((r=p==null?void 0:p.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let h;return a?h={generatedImages:u,positivePromptSafetyAttributes:a}:h={generatedImages:u},h}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Sc(Po.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ed(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&lR(e.config.tools)){const p=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),uR(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ed(u)){const h=u,p=await h.tool();for(const m of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:LS;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return function(m,v,E){var C,w;return Ka(this,arguments,function*(){for(var I,D,V,H;h<a;){u&&(h++,u=!1);const ne=yield mt(m.processParamsForMcpUsage(E)),fe=yield mt(m.generateContentStreamInternal(ne)),U=[],M=[];try{for(var z=!0,G=(D=void 0,Ku(fe)),ee;ee=yield mt(G.next()),I=ee.done,!I;z=!0){H=ee.value,z=!1;const N=H;if(yield yield mt(N),N.candidates&&(!((C=N.candidates[0])===null||C===void 0)&&C.content)){M.push(N.candidates[0].content);for(const P of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(h<a&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const O=yield mt(v.get(P.functionCall.name).callTool([P.functionCall]));U.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){D={error:N}}finally{try{!z&&!I&&(V=G.return)&&(yield mt(V.call(G)))}finally{if(D)throw D.error}}if(U.length>0){u=!0;const N=new bu;N.candidates=[{content:{role:"user",parts:U}}],yield yield mt(N);const P=[];P.push(...M),P.push({role:"user",parts:U});const O=ei(E.contents).concat(P);E.contents=O}else break}})}(this,p,e)}async generateContentInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,e);return h=Ee("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=PS(v),C=new bu;return Object.assign(C,E),C})}else{const m=NS(this.apiClient,e);return h=Ee("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=DS(v),C=new bu;return Object.assign(C,E),C})}}async generateContentStreamInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,e);return h=Ee("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ka(this,arguments,function*(){var C,w,I,D;try{for(var V=!0,H=Ku(E),z;z=yield mt(H.next()),C=z.done,!C;V=!0){D=z.value,V=!1;const ee=PS(yield mt(D.json())),ne=new bu;Object.assign(ne,ee),yield yield mt(ne)}}catch(G){w={error:G}}finally{try{!V&&!C&&(I=H.return)&&(yield mt(I.call(H)))}finally{if(w)throw w.error}}})})}else{const m=NS(this.apiClient,e);return h=Ee("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Ka(this,arguments,function*(){var C,w,I,D;try{for(var V=!0,H=Ku(E),z;z=yield mt(H.next()),C=z.done,!C;V=!0){D=z.value,V=!1;const ee=DS(yield mt(D.json())),ne=new bu;Object.assign(ne,ee),yield yield mt(ne)}}catch(G){w={error:G}}finally{try{!V&&!C&&(I=H.return)&&(yield mt(I.call(H)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=VF(this.apiClient,e);return h=Ee("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=B9(v),C=new uS;return Object.assign(C,E),C})}else{const m=J3(this.apiClient,e);return h=Ee("{model}:batchEmbedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=g9(v),C=new uS;return Object.assign(C,E),C})}}async generateImagesInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=UF(this.apiClient,e);return h=Ee("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=z9(v),C=new cS;return Object.assign(C,E),C})}else{const m=W3(this.apiClient,e);return h=Ee("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=_9(v),C=new cS;return Object.assign(C,E),C})}}async editImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const h=HF(this.apiClient,e);return a=Ee("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=G9(p),v=new GL;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const h=KF(this.apiClient,e);return a=Ee("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=H9(p),v=new HL;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=YF(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Hg(v))}else{const m=X3(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Gg(v))}}async listInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=QF(this.apiClient,e);return h=Ee("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=J9(this.apiClient,v),C=new fS;return Object.assign(C,E),C})}else{const m=Z3(this.apiClient,e);return h=Ee("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=E9(this.apiClient,v),C=new fS;return Object.assign(C,E),C})}}async update(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=XF(this.apiClient,e);return h=Ee("{model}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Hg(v))}else{const m=tF(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Gg(v))}}async delete(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=jF(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(()=>{const v=Q9(),E=new dS;return Object.assign(E,v),E})}else{const m=nF(this.apiClient,e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(()=>{const v=C9(),E=new dS;return Object.assign(E,v),E})}}async countTokens(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=e9(this.apiClient,e);return h=Ee("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=W9(v),C=new hS;return Object.assign(C,E),C})}else{const m=rF(this.apiClient,e);return h=Ee("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=S9(v),C=new hS;return Object.assign(C,E),C})}}async computeTokens(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const h=t9(this.apiClient,e);return a=Ee("{model}:computeTokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=X9(p),v=new $L;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=r9(this.apiClient,e);return h=Ee("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>tB(v))}else{const m=aF(this.apiClient,e);return h=Ee("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>R9(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IB(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function bB(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["_url","operationName"],n);const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function NB(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=c(t,["resourceName"]);i!=null&&f(e,["_url","resourceName"],i);const r=c(t,["config"]);return r!=null&&f(e,["config"],r),e}function MB(t){const e={},n=c(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Nr(i));const r=c(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function DB(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],MB(n)),e}function PB(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>DB(u))),f(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function kB(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const a=c(t,["error"]);a!=null&&f(e,["error"],a);const u=c(t,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],PB(u)),e}function VB(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Nr(i));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function LB(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],VB(n)),e}function UB(t){const e={},n=c(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>LB(u))),f(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function FS(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const a=c(t,["error"]);a!=null&&f(e,["error"],a);const u=c(t,["response"]);return u!=null&&f(e,["response"],UB(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OB extends Bo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;return i&&"httpOptions"in i&&(a=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=bB(e);return h=Ee("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>FS(v))}else{const m=IB(e);return h=Ee("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>kB(v))}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const h=NB(e);return a=Ee("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>FS(p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FB(t){const e={},n=c(t,["voiceName"]);return n!=null&&f(e,["voiceName"],n),e}function cR(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&f(e,["prebuiltVoiceConfig"],FB(n)),e}function BB(t){const e={},n=c(t,["speaker"]);n!=null&&f(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&f(e,["voiceConfig"],cR(i)),e}function qB(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>BB(r))),f(e,["speakerVoiceConfigs"],i)}return e}function zB(t){const e={},n=c(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],cR(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&f(e,["multiSpeakerVoiceConfig"],qB(i));const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function GB(t){const e={},n=c(t,["fps"]);n!=null&&f(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&f(e,["endOffset"],i);const r=c(t,["startOffset"]);return r!=null&&f(e,["startOffset"],r),e}function HB(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $B(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function KB(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],GB(n));const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const r=c(t,["inlineData"]);r!=null&&f(e,["inlineData"],HB(r));const a=c(t,["fileData"]);a!=null&&f(e,["fileData"],$B(a));const u=c(t,["thoughtSignature"]);u!=null&&f(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&f(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&f(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&f(e,["functionCall"],m);const v=c(t,["functionResponse"]);v!=null&&f(e,["functionResponse"],v);const E=c(t,["text"]);return E!=null&&f(e,["text"],E),e}function YB(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>KB(a))),f(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function JB(t){const e={},n=c(t,["behavior"]);n!=null&&f(e,["behavior"],n);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const a=c(t,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&f(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function QB(t){const e={},n=c(t,["startTime"]);n!=null&&f(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&f(e,["endTime"],i),e}function WB(t){const e={},n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],QB(n)),e}function XB(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&f(e,["dynamicThreshold"],i),e}function jB(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&f(e,["dynamicRetrievalConfig"],XB(n)),e}function ZB(){return{}}function eq(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>JB(p))),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],WB(i));const r=c(t,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],jB(r)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&f(e,["urlContext"],ZB());const u=c(t,["codeExecution"]);return u!=null&&f(e,["codeExecution"],u),e}function tq(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BS(){return{}}function nq(t){const e={},n=c(t,["disabled"]);n!=null&&f(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&f(e,["startOfSpeechSensitivity"],i);const r=c(t,["endOfSpeechSensitivity"]);r!=null&&f(e,["endOfSpeechSensitivity"],r);const a=c(t,["prefixPaddingMs"]);a!=null&&f(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&f(e,["silenceDurationMs"],u),e}function iq(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&f(e,["automaticActivityDetection"],nq(n));const i=c(t,["activityHandling"]);i!=null&&f(e,["activityHandling"],i);const r=c(t,["turnCoverage"]);return r!=null&&f(e,["turnCoverage"],r),e}function rq(t){const e={},n=c(t,["targetTokens"]);return n!=null&&f(e,["targetTokens"],n),e}function sq(t){const e={},n=c(t,["triggerTokens"]);n!=null&&f(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&f(e,["slidingWindow"],rq(i)),e}function oq(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&f(e,["proactiveAudio"],n),e}function aq(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=c(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=c(t,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],zB(ev(E)));const C=c(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],YB(pn(w)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let ne=pl(I);Array.isArray(ne)&&(ne=ne.map(fe=>eq(ml(fe)))),f(e,["setup","tools"],ne)}const D=c(t,["sessionResumption"]);e!==void 0&&D!=null&&f(e,["setup","sessionResumption"],tq(D));const V=c(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],BS());const H=c(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],BS());const z=c(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&f(e,["setup","realtimeInputConfig"],iq(z));const G=c(t,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],sq(G));const ee=c(t,["proactivity"]);return e!==void 0&&ee!=null&&f(e,["setup","proactivity"],oq(ee)),n}function lq(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ot(t,i));const r=c(e,["config"]);return r!=null&&f(n,["config"],aq(r,n)),n}function uq(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=c(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const u=c(e,["uses"]);n!==void 0&&u!=null&&f(n,["uses"],u);const h=c(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],lq(t,h));const p=c(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&f(n,["fieldMask"],p),i}function cq(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],uq(t,i,n)),n}function fq(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function hq(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=dq(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),h.length>0&&p.push(...h),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class mq extends Bo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=cq(this.apiClient,e);a=Ee("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=hq(h,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>fq(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pq(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function gq(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function yq(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],gq(n,e)),e}function vq(t){const e={},n=c(t,["textInput"]);n!=null&&f(e,["textInput"],n);const i=c(t,["output"]);return i!=null&&f(e,["output"],i),e}function _q(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>vq(r))),f(e,["examples","examples"],i)}return e}function Tq(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const a=c(t,["learningRateMultiplier"]);if(a!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","batchSize"],u);const h=c(t,["learningRate"]);return e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","learningRate"],h),n}function Eq(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],_q(i));const r=c(t,["config"]);return r!=null&&f(e,["config"],Tq(r,e)),e}function Cq(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&f(e,["config"],i),e}function Sq(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=c(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function Aq(t){const e={},n=c(t,["config"]);return n!=null&&f(e,["config"],Sq(n,e)),e}function xq(t,e){const n={},i=c(t,["gcsUri"]);if(e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function wq(t){const e={},n=c(t,["gcsUri"]);return n!=null&&f(e,["validationDatasetUri"],n),e}function Rq(t,e){const n={},i=c(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],wq(i));const r=c(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const a=c(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const u=c(t,["epochCount"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const h=c(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const p=c(t,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=c(t,["adapterSize"]);if(e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Iq(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],xq(i,e));const r=c(t,["config"]);return r!=null&&f(e,["config"],Rq(r,e)),e}function bq(t){const e={},n=c(t,["name"]);n!=null&&f(e,["model"],n);const i=c(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function fR(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["state"]);i!=null&&f(e,["state"],Hw(i));const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=c(t,["tuningTask","startTime"]);a!=null&&f(e,["startTime"],a);const u=c(t,["tuningTask","completeTime"]);u!=null&&f(e,["endTime"],u);const h=c(t,["updateTime"]);h!=null&&f(e,["updateTime"],h);const p=c(t,["description"]);p!=null&&f(e,["description"],p);const m=c(t,["baseModel"]);m!=null&&f(e,["baseModel"],m);const v=c(t,["_self"]);v!=null&&f(e,["tunedModel"],bq(v));const E=c(t,["distillationSpec"]);E!=null&&f(e,["distillationSpec"],E);const C=c(t,["experiment"]);C!=null&&f(e,["experiment"],C);const w=c(t,["labels"]);w!=null&&f(e,["labels"],w);const I=c(t,["pipelineJob"]);I!=null&&f(e,["pipelineJob"],I);const D=c(t,["serviceAccount"]);D!=null&&f(e,["serviceAccount"],D);const V=c(t,["tunedModelDisplayName"]);return V!=null&&f(e,["tunedModelDisplayName"],V),e}function Nq(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["tunedModels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>fR(a))),f(e,["tuningJobs"],r)}return e}function Mq(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const a=c(t,["error"]);return a!=null&&f(e,["error"],a),e}function Dq(t){const e={},n=c(t,["checkpointId"]);n!=null&&f(e,["checkpointId"],n);const i=c(t,["epoch"]);i!=null&&f(e,["epoch"],i);const r=c(t,["step"]);r!=null&&f(e,["step"],r);const a=c(t,["endpoint"]);return a!=null&&f(e,["endpoint"],a),e}function Pq(t){const e={},n=c(t,["model"]);n!=null&&f(e,["model"],n);const i=c(t,["endpoint"]);i!=null&&f(e,["endpoint"],i);const r=c(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Dq(u))),f(e,["checkpoints"],a)}return e}function Kg(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["state"]);i!=null&&f(e,["state"],Hw(i));const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=c(t,["startTime"]);a!=null&&f(e,["startTime"],a);const u=c(t,["endTime"]);u!=null&&f(e,["endTime"],u);const h=c(t,["updateTime"]);h!=null&&f(e,["updateTime"],h);const p=c(t,["error"]);p!=null&&f(e,["error"],p);const m=c(t,["description"]);m!=null&&f(e,["description"],m);const v=c(t,["baseModel"]);v!=null&&f(e,["baseModel"],v);const E=c(t,["tunedModel"]);E!=null&&f(e,["tunedModel"],Pq(E));const C=c(t,["supervisedTuningSpec"]);C!=null&&f(e,["supervisedTuningSpec"],C);const w=c(t,["tuningDataStats"]);w!=null&&f(e,["tuningDataStats"],w);const I=c(t,["encryptionSpec"]);I!=null&&f(e,["encryptionSpec"],I);const D=c(t,["partnerModelTuningSpec"]);D!=null&&f(e,["partnerModelTuningSpec"],D);const V=c(t,["distillationSpec"]);V!=null&&f(e,["distillationSpec"],V);const H=c(t,["experiment"]);H!=null&&f(e,["experiment"],H);const z=c(t,["labels"]);z!=null&&f(e,["labels"],z);const G=c(t,["pipelineJob"]);G!=null&&f(e,["pipelineJob"],G);const ee=c(t,["serviceAccount"]);ee!=null&&f(e,["serviceAccount"],ee);const ne=c(t,["tunedModelDisplayName"]);return ne!=null&&f(e,["tunedModelDisplayName"],ne),e}function kq(t){const e={},n=c(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);const i=c(t,["tuningJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Kg(a))),f(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vq extends Bo{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Sc(Po.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:Lg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Cq(e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Kg(v))}else{const m=pq(e);return h=Ee("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>fR(v))}}async listInternal(e){var n,i,r,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Aq(e);return h=Ee("tuningJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=kq(v),C=new mS;return Object.assign(C,E),C})}else{const m=yq(e);return h=Ee("tunedModels",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=Nq(v),C=new mS;return Object.assign(C,E),C})}}async tuneInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const h=Iq(e);return a=Ee("tuningJobs",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>Kg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Eq(e);return a=Ee("tunedModels",h._url),u=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>Mq(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Uq=1024*1024*8,Oq=3,Fq=1e3,Bq=2,Yp="x-goog-upload-status";async function qq(t,e,n){var i,r,a;let u=0,h=0,p=new Ug(new Response),m="upload";for(u=t.size;h<u;){const E=Math.min(Uq,u-h),C=t.slice(h,h+E);h+E>=u&&(m+=", finalize");let w=0,I=Fq;for(;w<Oq&&(p=await n.request({path:"",body:C,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[Yp]));)w++,await Gq(I),I=I*Bq;if(h+=E,((r=p==null?void 0:p.headers)===null||r===void 0?void 0:r[Yp])!=="active")break;if(u<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[Yp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function zq(t){return{size:t.size,type:t.type}}function Gq(t){return new Promise(e=>setTimeout(e,t))}class Hq{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qq(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $q{create(e,n,i){return new Kq(e,n,i)}}class Kq{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qS="x-goog-api-key";class Yq{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(qS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jq="gl-node/";class Qq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=zL(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Yq(this.apiKey);this.apiClient=new uB({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Jq+"web",uploader:new Hq,downloader:new Lq}),this.models=new RB(this.apiClient),this.live=new CB(this.apiClient,r,new $q),this.batches=new gO(this.apiClient),this.chats=new T4(this.models,this.apiClient),this.caches=new y4(this.apiClient),this.files=new P4(this.apiClient),this.operations=new OB(this.apiClient),this.authTokens=new mq(this.apiClient),this.tunings=new Vq(this.apiClient)}}const Wq=new Qq({apiKey:"AIzaSyDcLEpbLBr6sKEVRtQUIL4PkFOB34KPA_s"}),Xq=`
你是一位專業、友善且充滿智慧的 SiiS Jewelry 水晶顧問。
你的任務是幫助顧客了解水晶的世界，並根據他們的需要提供建議。
請遵循以下指南：
1.  **專業知識**: 你對各種水晶（如紫水晶、粉水晶、綠幽靈、黑曜石等）的特性、功效、對應脈輪、保養方式都非常了解。
2.  **友善的語氣**: 始終保持親切、耐心和鼓勵的語氣。
3.  **個性化建議**: 當顧客詢問該如何選擇時，可以反問他們的需求（例如：是想提升愛情運、事業運，還是尋求平靜？），然後基於他們的回答提供建議。
4.  **推廣 SiiS Jewelry**: 在適當的時候，可以自然地提及 SiiS Jewelry 的產品是高品質、純天然的選擇。例如，在推薦紫水晶時，可以說「SiiS Jewelry 的紫水晶能量項鍊就是一個很好的選擇」。
5.  **簡潔明瞭**: 回答問題時，盡量條理清晰，可以使用列表或重點來組織內容。避免過於冗長或專業術語堆砌。
6.  **安全與免責聲明**: 切勿提供任何醫療建議。如果顧客提到健康問題，請強調水晶僅為輔助能量工具，不能替代專業醫療，並建議他們諮詢醫生。
7.  **保持角色**: 你就是 SiiS Jewelry 的 AI 顧問，不要提及你是語言模型或 AI。
`,jq=()=>Wq.chats.create({model:"gemini-2.5-flash-preview-04-17",config:{systemInstruction:Xq}}),Zq=async(t,e)=>t.sendMessageStream({message:e}),e5=()=>{var m,v;const[t,e]=Y.useState([{id:"initial",text:"你好！我是您的水晶AI顧問。有什麼可以幫助您的嗎？您可以問我關於水晶的任何問題，比如不同水晶的功效、如何選擇適合自己的水晶，或者水晶的保養方法等。",sender:"ai"}]),[n,i]=Y.useState(""),[r,a]=Y.useState(!1),u=Y.useRef(null),h=Y.useRef(null);Y.useEffect(()=>{u.current||(u.current=jq())},[]),Y.useEffect(()=>{var E;(E=h.current)==null||E.scrollIntoView({behavior:"smooth"})},[t,r]);const p=async E=>{if(E.preventDefault(),!n.trim()||r)return;const C={id:Date.now().toString(),text:n,sender:"user"};e(I=>[...I,C]),i(""),a(!0);const w=(Date.now()+1).toString();e(I=>[...I,{id:w,text:"",sender:"ai"}]);try{if(!u.current)throw new Error("Chat not initialized");const I=await Zq(u.current,n);let D="";for await(const V of I)D+=V.text,e(H=>H.map(z=>z.id===w?{...z,text:D}:z))}catch(I){console.error("Error sending message to AI:",I),e(D=>D.map(V=>V.id===w?{...V,text:"抱歉，我現在遇到了一些問題，請稍後再試。"}:V))}finally{a(!1)}};return S.jsxs("section",{id:"ai-chat",className:"py-16 bg-white relative overflow-hidden",children:[S.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),S.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-secondary/5 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[S.jsxs("div",{className:"text-center mb-12",children:[S.jsx("h2",{className:"text-[clamp(1.8rem,4vw,2.5rem)] font-bold mb-4",children:"AI 水晶顧問"}),S.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"有任何關於水晶的問題？我們的AI顧問可以幫助您了解不同水晶的特性、功效和保養方法，為您提供個性化的建議。"})]}),S.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 flex flex-col",children:[S.jsxs("div",{className:"bg-primary text-white p-4 flex items-center",children:[S.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center mr-3",children:S.jsx("i",{className:"fa-solid fa-robot text-white"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-medium",children:"水晶AI顧問"}),S.jsx("p",{className:"text-xs text-white/70",children:"在線 - 隨時為您服務"})]})]}),S.jsxs("div",{id:"chat-messages",className:"h-96 overflow-y-auto p-4 space-y-4 bg-gray-50 flex-grow",children:[t.map((E,C)=>S.jsxs("div",{className:`flex items-start gap-3 ${E.sender==="user"?"justify-end":""}`,children:[E.sender==="ai"&&S.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-1 flex-shrink-0",children:S.jsx("i",{className:"fa-solid fa-robot text-primary"})}),S.jsx("div",{className:`rounded-lg p-3 shadow-sm max-w-[85%] whitespace-pre-wrap ${E.sender==="user"?"bg-primary text-white":"bg-white text-gray-800"}`,children:S.jsx("p",{children:E.text})})]},E.id)),r&&((m=t[t.length-1])==null?void 0:m.sender)==="ai"&&((v=t[t.length-1])==null?void 0:v.text)===""&&S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-1 flex-shrink-0",children:S.jsx("i",{className:"fa-solid fa-robot text-primary"})}),S.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:S.jsxs("div",{className:"flex items-center space-x-1",children:[S.jsx("span",{className:"text-gray-500",children:"正在輸入"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]})})]}),S.jsx("div",{ref:h})]}),S.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:S.jsxs("form",{onSubmit:p,className:"flex items-center gap-3",children:[S.jsx("input",{type:"text",value:n,onChange:E=>i(E.target.value),placeholder:r?"AI正在思考中...":"在這裡輸入您的問題...",disabled:r,className:"w-full px-4 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 transition"}),S.jsx("button",{type:"submit",disabled:r,className:"bg-primary text-white w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center hover:bg-primary/90 disabled:bg-primary/50 disabled:cursor-not-allowed transition-colors",children:S.jsx("i",{className:"fa-solid fa-paper-plane"})})]})})]})]})]})},t5=()=>{const t=e=>{e.preventDefault();const n=e.currentTarget.getAttribute("href");if(!n)return;if(n==="#"){window.scrollTo({top:0,behavior:"smooth"});return}const i=document.querySelector(n);i&&i.scrollIntoView({behavior:"smooth",block:"start"})};return S.jsx("footer",{id:"contact",className:"bg-dark text-neutral/80",children:S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[S.jsxs("div",{className:"md:col-span-1",children:[S.jsxs("a",{href:"#",onClick:t,className:"flex items-center space-x-2 mb-4",children:[S.jsx("span",{className:"text-primary text-3xl",children:S.jsx("i",{className:"fa-solid fa-gem"})}),S.jsx("span",{className:"text-xl font-bold text-white",children:"SiiS Jewelry"})]}),S.jsx("p",{className:"text-sm",children:"發現水晶的力量，點亮您的生活。"})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-white mb-4",children:"快速連結"}),S.jsxs("ul",{className:"space-y-2",children:[S.jsx("li",{children:S.jsx("a",{href:"#products",onClick:t,className:"hover:text-white transition-colors",children:"產品"})}),S.jsx("li",{children:S.jsx("a",{href:"#about",onClick:t,className:"hover:text-white transition-colors",children:"關於我們"})}),S.jsx("li",{children:S.jsx("a",{href:"#ai-chat",onClick:t,className:"hover:text-white transition-colors",children:"AI 顧問"})}),S.jsx("li",{children:S.jsx("a",{href:"#",onClick:t,className:"hover:text-white transition-colors",children:"常見問題"})})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-white mb-4",children:"聯繫我們"}),S.jsxs("ul",{className:"space-y-2 text-sm",children:[S.jsxs("li",{className:"flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-envelope w-4 text-center"})," contact@siisjewelry.com"]}),S.jsxs("li",{className:"flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-phone w-4 text-center"})," +886 2 1234 5678"]}),S.jsxs("li",{className:"flex items-start gap-2",children:[S.jsx("i",{className:"fa-solid fa-location-dot w-4 text-center mt-1"})," 台灣台北市信義區"]})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-white mb-4",children:"關注我們"}),S.jsxs("div",{className:"flex space-x-4",children:[S.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors",children:S.jsx("i",{className:"fa-brands fa-facebook-f"})}),S.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors",children:S.jsx("i",{className:"fa-brands fa-instagram"})}),S.jsx("a",{href:"#",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors",children:S.jsx("i",{className:"fa-brands fa-youtube"})})]})]})]}),S.jsx("div",{className:"mt-12 border-t border-white/10 pt-8 text-center text-sm text-neutral/60",children:S.jsxs("p",{children:["© ",new Date().getFullYear()," SiiS Jewelry. All Rights Reserved."]})})]})})},n5=({rating:t})=>{const e=Math.floor(t),n=t%1!==0,i=5-e-(n?1:0);return S.jsxs("div",{className:"flex text-yellow-400 text-lg",children:[[...Array(e)].map((r,a)=>S.jsx("i",{className:"fa-solid fa-star"},`full-${a}`)),n&&S.jsx("i",{className:"fa-solid fa-star-half-stroke"}),[...Array(i)].map((r,a)=>S.jsx("i",{className:"fa-regular fa-star"},`empty-${a}`))]})},i5=({product:t,onClose:e,onAddToCart:n})=>{const[i,r]=Y.useState(1),[a,u]=Y.useState(!1),[h,p]=Y.useState(0),m=Y.useCallback(()=>{u(!0),setTimeout(e,300)},[e]);Y.useEffect(()=>{const I=D=>{D.key==="Escape"&&m()};return window.addEventListener("keydown",I),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",I),document.body.style.overflow="auto"}},[m]);const v=I=>{r(D=>Math.max(1,D+I))},E=()=>{n(t,i)},C=a?"opacity-0":"opacity-100",w=a?"scale-95":"scale-100";return S.jsx("div",{className:`fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 transition-opacity duration-300 ${C}`,onClick:m,children:S.jsxs("div",{className:`relative bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col transition-transform duration-300 ${w}`,onClick:I=>I.stopPropagation(),children:[S.jsx("button",{onClick:m,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-800 z-20 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-times text-xl"})}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 p-6 md:p-8",children:[S.jsxs("div",{className:"flex flex-col gap-4",children:[S.jsx("div",{className:"w-full h-80 md:h-96 rounded-xl overflow-hidden shadow-lg flex items-center justify-center bg-gray-100",children:S.jsx("img",{src:t.images[h],alt:`${t.name} - view ${h+1}`,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.images.map((I,D)=>S.jsx("button",{onClick:()=>p(D),className:`rounded-lg overflow-hidden h-24 w-full focus:outline-none ring-2 ring-offset-2 transition-all duration-200 ${h===D?"ring-primary":"ring-transparent"}`,children:S.jsx("img",{src:I,alt:`Thumbnail ${D+1}`,className:"w-full h-full object-cover"})},D))})]}),S.jsxs("div",{className:"flex flex-col",children:[S.jsx("h2",{className:"text-3xl font-bold mb-2",children:t.name}),S.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[S.jsx(n5,{rating:t.rating}),S.jsxs("span",{className:"text-gray-500 text-sm",children:["(",t.reviews," 則評論)"]})]}),S.jsxs("p",{className:"text-2xl font-bold text-primary mb-4",children:["¥",t.price.toFixed(2)]}),S.jsx("div",{className:"text-gray-600 leading-relaxed mb-6 flex-grow",children:S.jsx("p",{children:t.description})}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[S.jsxs("div",{className:"flex items-center border border-gray-200 rounded-full",children:[S.jsx("button",{onClick:()=>v(-1),className:"w-12 h-12 text-xl text-gray-500 hover:bg-gray-100 rounded-l-full disabled:text-gray-300",disabled:i<=1,children:"-"}),S.jsx("span",{className:"w-16 text-center text-lg font-medium",children:i}),S.jsx("button",{onClick:()=>v(1),className:"w-12 h-12 text-xl text-gray-500 hover:bg-gray-100 rounded-r-full",children:"+"})]}),S.jsxs("button",{onClick:E,className:"flex-grow px-6 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors shadow-lg hover:shadow-xl text-lg font-semibold flex items-center justify-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-cart-plus"}),S.jsx("span",{children:"加入購物車"})]})]})]})]})]})})},r5=({isOpen:t,items:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:a})=>{const u=e.reduce((h,p)=>h+p.price*p.quantity,0);return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`fixed inset-0 bg-black/50 z-50 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n}),S.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-md bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"} flex flex-col`,children:[S.jsxs("div",{className:"flex justify-between items-center p-5 border-b",children:[S.jsx("h2",{className:"text-xl font-semibold",children:"您的購物車"}),S.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:S.jsx("i",{className:"fa-solid fa-times text-2xl"})})]}),e.length===0?S.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-5",children:[S.jsx("i",{className:"fa-solid fa-shopping-bag text-5xl text-gray-300 mb-4"}),S.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"您的購物車是空的"}),S.jsx("p",{className:"text-gray-500 mt-1",children:"快去尋找您喜愛的水晶吧！"}),S.jsx("button",{onClick:n,className:"mt-6 px-6 py-2 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors",children:"繼續購物"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"flex-grow overflow-y-auto p-5 space-y-4",children:e.map(h=>S.jsxs("div",{className:"flex gap-4",children:[S.jsx("img",{src:h.images[0],alt:h.name,className:"w-24 h-24 object-cover rounded-lg"}),S.jsxs("div",{className:"flex-grow flex flex-col",children:[S.jsx("h3",{className:"font-medium",children:h.name}),S.jsxs("p",{className:"text-primary font-semibold text-sm",children:["¥",h.price.toFixed(2)]}),S.jsxs("div",{className:"flex items-center mt-auto",children:[S.jsxs("div",{className:"flex items-center border border-gray-200 rounded-md",children:[S.jsx("button",{onClick:()=>i(h.id,h.quantity-1),disabled:h.quantity<=1,className:"w-8 h-8 text-gray-600 disabled:text-gray-300",children:"-"}),S.jsx("span",{className:"w-8 text-center",children:h.quantity}),S.jsx("button",{onClick:()=>i(h.id,h.quantity+1),className:"w-8 h-8 text-gray-600",children:"+"})]}),S.jsx("button",{onClick:()=>r(h.id),className:"ml-auto text-gray-400 hover:text-red-500",children:S.jsx("i",{className:"fa-solid fa-trash-can"})})]})]})]},h.id))}),S.jsxs("div",{className:"p-5 border-t space-y-4",children:[S.jsxs("div",{className:"flex justify-between font-medium",children:[S.jsx("span",{children:"小計"}),S.jsxs("span",{children:["¥",u.toFixed(2)]})]}),S.jsx("button",{onClick:a,className:"w-full py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors font-semibold text-lg",children:"前往結帳"})]})]})]})]})},s5=({onClose:t,onLogin:e,onRegister:n})=>{const[i,r]=Y.useState(!0),[a,u]=Y.useState(""),[h,p]=Y.useState(""),[m,v]=Y.useState(""),[E,C]=Y.useState(""),w=async I=>{if(I.preventDefault(),C(""),!a||!h||!i&&!m){C("所有欄位皆為必填");return}try{if(i){const V=(await gD(Ig,a,h)).user;e({id:V.uid,name:V.displayName||"使用者",email:V.email||""})}else{const V=(await pD(Ig,a,h)).user;n({id:V.uid,name:m,email:V.email||""})}}catch(D){C(D.message||"登入/註冊發生錯誤")}};return S.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:t,children:S.jsxs("div",{className:"relative bg-white rounded-2xl w-full max-w-md",onClick:I=>I.stopPropagation(),children:[S.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-800 z-20",children:S.jsx("i",{className:"fa-solid fa-times text-xl"})}),S.jsxs("div",{className:"p-8",children:[S.jsxs("div",{className:"flex border-b mb-6",children:[S.jsx("button",{onClick:()=>r(!0),className:`flex-1 py-3 text-lg font-semibold transition-colors ${i?"text-primary border-b-2 border-primary":"text-gray-500"}`,children:"登入"}),S.jsx("button",{onClick:()=>r(!1),className:`flex-1 py-3 text-lg font-semibold transition-colors ${i?"text-gray-500":"text-primary border-b-2 border-primary"}`,children:"註冊"})]}),S.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:i?"歡迎回來":"創建您的帳戶"}),S.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!i&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"您的姓名"}),S.jsx("input",{type:"text",value:m,onChange:I=>v(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"電子郵件"}),S.jsx("input",{type:"email",value:a,onChange:I=>u(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"密碼"}),S.jsx("input",{type:"password",value:h,onChange:I=>p(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),E&&S.jsx("p",{className:"text-red-500 text-sm text-center",children:E}),S.jsx("button",{type:"submit",className:"w-full mt-6 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors font-semibold text-lg",children:i?"登入":"註冊"})]})]})]})})},o5=({message:t})=>{const[e,n]=Y.useState(!1);return Y.useEffect(()=>{if(t){n(!0);const i=setTimeout(()=>{n(!1)},2700);return()=>clearTimeout(i)}},[t]),S.jsxs("div",{className:`fixed bottom-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 z-50 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-5 pointer-events-none"}`,children:[S.jsx("i",{className:"fa-solid fa-check-circle mr-2 text-green-400"}),t]})},a5=({cartItems:t})=>{const e=t.reduce((r,a)=>r+a.price*a.quantity,0),n=e>500?0:60,i=e+n;return S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6 border-b pb-4",children:"訂單摘要"}),S.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto pr-2",children:t.map(r=>S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:r.images[0],alt:r.name,className:"w-16 h-16 object-cover rounded-md"}),S.jsx("span",{className:"absolute -top-2 -right-2 bg-primary text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r.quantity})]}),S.jsx("div",{className:"flex-grow",children:S.jsx("p",{className:"font-medium text-sm",children:r.name})}),S.jsxs("p",{className:"font-semibold text-sm",children:["¥",(r.price*r.quantity).toFixed(2)]})]},r.id))}),S.jsxs("div",{className:"mt-6 border-t pt-6 space-y-3",children:[S.jsxs("div",{className:"flex justify-between text-gray-600",children:[S.jsx("span",{children:"小計"}),S.jsxs("span",{children:["¥",e.toFixed(2)]})]}),S.jsxs("div",{className:"flex justify-between text-gray-600",children:[S.jsx("span",{children:"運費"}),S.jsx("span",{children:n===0?"免運":`¥${n.toFixed(2)}`})]}),S.jsxs("div",{className:"flex justify-between text-dark font-bold text-lg border-t pt-3 mt-3",children:[S.jsx("span",{children:"總計"}),S.jsxs("span",{children:["¥",i.toFixed(2)]})]})]})]})},l5=({user:t,cartItems:e,onPlaceOrder:n,onClose:i})=>{const[r,a]=Y.useState({name:t.name,email:t.email,address:"",city:"",postalCode:"",phone:""}),u=p=>{const{name:m,value:v}=p.target;a(E=>({...E,[m]:v}))},h=p=>{p.preventDefault();for(const m in r)if(r[m]===""){alert("請填寫所有運送資訊！");return}n()};return S.jsx("div",{className:"bg-gray-50 min-h-screen pt-28 md:pt-36 pb-16",children:S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"flex items-center mb-6",children:[S.jsxs("button",{onClick:i,className:"text-primary hover:text-primary/80 flex items-center",children:[S.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"返回"]}),S.jsx("h1",{className:"text-3xl font-bold text-center flex-grow",children:"結帳"})]}),S.jsx("form",{onSubmit:h,children:S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"lg:col-span-2 bg-white p-8 rounded-2xl shadow-md",children:[S.jsxs("section",{children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6 border-b pb-4",children:"運送資訊"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"姓名"}),S.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"電子郵件"}),S.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"地址"}),S.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:u,placeholder:"信義區市府路...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"城市"}),S.jsx("input",{type:"text",id:"city",name:"city",value:r.city,onChange:u,placeholder:"台北市",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"郵遞區號"}),S.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:r.postalCode,onChange:u,placeholder:"110",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"聯絡電話"}),S.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:u,placeholder:"0912-345-678",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",required:!0})]})]})]}),S.jsxs("section",{className:"mt-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6 border-b pb-4",children:"付款資訊"}),S.jsxs("div",{className:"bg-yellow-100/50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg mb-6",children:[S.jsx("p",{className:"font-bold",children:"此為模擬畫面"}),S.jsx("p",{className:"text-sm",children:"請勿輸入真實信用卡資訊。此處僅為展示結帳流程。"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"card",className:"block text-sm font-medium text-gray-700 mb-1",children:"信用卡號"}),S.jsx("input",{type:"text",id:"card",placeholder:"**** **** **** 1234",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"expiry",className:"block text-sm font-medium text-gray-700 mb-1",children:"到期日 (MM/YY)"}),S.jsx("input",{type:"text",id:"expiry",placeholder:"12/28",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"cvc",className:"block text-sm font-medium text-gray-700 mb-1",children:"安全碼 (CVC)"}),S.jsx("input",{type:"text",id:"cvc",placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]})]})]})]})]}),S.jsx("div",{className:"lg:col-span-1",children:S.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-md sticky top-28",children:[S.jsx(a5,{cartItems:e}),S.jsxs("button",{type:"submit",className:"w-full mt-6 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors font-semibold text-lg flex items-center justify-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-lock"}),"確認下單"]})]})})]})})]})})},u5=()=>S.jsxs("div",{children:[S.jsx("h1",{children:"後台管理"}),S.jsxs("ul",{children:[S.jsx("li",{children:S.jsx(Fu,{to:"/admin/products",children:"產品管理"})}),S.jsx("li",{children:S.jsx(Fu,{to:"/admin/members",children:"會員管理"})}),S.jsx("li",{children:S.jsx(Fu,{to:"/admin/orders",children:"訂單管理"})})]})]}),Jp={async createMember(t){return(await Vw(Eo(li,"members"),{...t,createdAt:Nt.now()})).id},async getAllMembers(){const t=zd(Eo(li,"members"),Rg("createdAt","desc"));return(await oc(t)).docs.map(n=>({id:n.id,...n.data()}))},async updateMember(t,e){const n=sc(li,"members",t);await Pw(n,e)},async deleteMember(t){await kw(sc(li,"members",t))},async getMemberByUID(t){const e=zd(Eo(li,"members"),Mw("uid","==",t)),n=await oc(e);if(n.empty)return null;const i=n.docs[0];return{id:i.id,...i.data()}}},zS={async createProduct(t){return(await Vw(Eo(li,"products"),{...t,createdAt:Nt.now()})).id},async getAllProducts(){const t=zd(Eo(li,"products"),Rg("createdAt","desc"));return(await oc(t)).docs.map(n=>({id:n.id,...n.data()}))},async getActiveProducts(){const t=zd(Eo(li,"products"),Mw("isActive","==",!0),Rg("createdAt","desc"));return(await oc(t)).docs.map(n=>({id:n.id,...n.data()}))},async updateProduct(t,e){const n=sc(li,"products",t);await Pw(n,e)},async deleteProduct(t){await kw(sc(li,"products",t))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebasestorage.googleapis.com",hR="storageBucket",c5=2*60*1e3,f5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends $i{constructor(e,n,i=0){super(Qp(e),`Firebase Storage: ${n} (${Qp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var At;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(At||(At={}));function Qp(t){return"storage/"+t}function rv(){const t="An unknown error occurred, please check the error payload for server response.";return new xt(At.UNKNOWN,t)}function d5(t){return new xt(At.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function h5(t){return new xt(At.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function m5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(At.UNAUTHENTICATED,t)}function p5(){return new xt(At.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function g5(t){return new xt(At.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function y5(){return new xt(At.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v5(){return new xt(At.CANCELED,"User canceled the upload/download.")}function _5(t){return new xt(At.INVALID_URL,"Invalid URL '"+t+"'.")}function T5(t){return new xt(At.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function E5(){return new xt(At.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hR+"' property when initializing the app?")}function C5(){return new xt(At.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function S5(){return new xt(At.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function A5(t){return new xt(At.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yg(t){return new xt(At.INVALID_ARGUMENT,t)}function mR(){return new xt(At.APP_DELETED,"The Firebase app was deleted.")}function x5(t){return new xt(At.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yu(t,e){return new xt(At.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nu(t){throw new xt(At.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Fn.makeFromUrl(e,n)}catch{return new Fn(e,"")}if(i.path==="")return i;throw T5(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+r+u,"i"),p={bucket:1,path:3};function m(ee){ee.path_=decodeURIComponent(ee.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${v}/b/${r}/o${C}`,"i"),I={bucket:1,path:3},D=n===dR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",H=new RegExp(`^https?://${D}/${r}/${V}`,"i"),G=[{regex:h,indices:p,postModify:a},{regex:w,indices:I,postModify:m},{regex:H,indices:{bucket:1,path:2},postModify:m}];for(let ee=0;ee<G.length;ee++){const ne=G[ee],fe=ne.regex.exec(e);if(fe){const U=fe[ne.indices.bucket];let M=fe[ne.indices.path];M||(M=""),i=new Fn(U,M),ne.postModify(i);break}}if(i==null)throw _5(e);return i}}class w5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t,e,n){let i=1,r=null,a=null,u=!1,h=0;function p(){return h===2}let m=!1;function v(...V){m||(m=!0,e.apply(null,V))}function E(V){r=setTimeout(()=>{r=null,t(w,p())},V)}function C(){a&&clearTimeout(a)}function w(V,...H){if(m){C();return}if(V){C(),v.call(null,V,...H);return}if(p()||u){C(),v.call(null,V,...H);return}i<64&&(i*=2);let G;h===1?(h=2,G=0):G=(i+Math.random())*1e3,E(G)}let I=!1;function D(V){I||(I=!0,C(),!m&&(r!==null?(V||(h=2),clearTimeout(r),E(0)):V||(h=1)))}return E(0),a=setTimeout(()=>{u=!0,D(!0)},n),D}function I5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){return t!==void 0}function N5(t){return typeof t=="object"&&!Array.isArray(t)}function sv(t){return typeof t=="string"||t instanceof String}function GS(t){return ov()&&t instanceof Blob}function ov(){return typeof Blob<"u"}function HS(t,e,n,i){if(i<e)throw Yg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Yg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function pR(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Co;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n,i,r,a,u,h,p,m,v,E,C=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=C,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,D)=>{this.resolve_=I,this.reject_=D,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new sd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{const p=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===Co.NO_ERROR,p=a.getStatus();if(!h||M5(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Co.ABORT;i(!1,new sd(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new sd(m,a))})},n=(i,r)=>{const a=this.resolve_,u=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());b5(p)?a(p):a()}catch(p){u(p)}else if(h!==null){const p=rv();p.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,p)):u(p)}else if(r.canceled){const p=this.appDelete_?mR():v5();u(p)}else{const p=y5();u(p)}};this.canceled_?n(!1,new sd(!1,null,!0)):this.backoffId_=R5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function P5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function V5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function L5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function U5(t,e,n,i,r,a,u=!0,h=!1){const p=pR(t.urlParams),m=t.url+p,v=Object.assign({},t.headers);return V5(v,e),P5(v,n),k5(v,a),L5(v,i),new D5(m,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function F5(...t){const e=O5();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(ov())return new Blob(t);throw new xt(At.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function B5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){if(typeof atob>"u")throw A5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wp{constructor(e,n){this.data=e,this.contentType=n||null}}function z5(t,e){switch(t){case Vi.RAW:return new Wp(gR(e));case Vi.BASE64:case Vi.BASE64URL:return new Wp(yR(t,e));case Vi.DATA_URL:return new Wp(H5(e),$5(e))}throw rv()}function gR(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function G5(t){let e;try{e=decodeURIComponent(t)}catch{throw Yu(Vi.DATA_URL,"Malformed data URL.")}return gR(e)}function yR(t,e){switch(t){case Vi.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw Yu(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Vi.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw Yu(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=q5(e)}catch(r){throw r.message.includes("polyfill")?r:Yu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class vR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Yu(Vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=K5(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function H5(t){const e=new vR(t);return e.base64?yR(Vi.BASE64,e.rest):G5(e.rest)}function $5(t){return new vR(t).contentType}function K5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){let i=0,r="";GS(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(GS(this.data_)){const i=this.data_,r=B5(i,e,n);return r===null?null:new hs(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new hs(i,!0)}}static getBlob(...e){if(ov()){const n=e.map(i=>i instanceof hs?i.data_:i);return new hs(F5.apply(null,n))}else{const n=e.map(u=>sv(u)?z5(Vi.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let h=0;h<u.length;h++)r[a++]=u[h]}),new hs(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){let e;try{e=JSON.parse(t)}catch{return null}return N5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function J5(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function TR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t,e){return e}class En{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||Q5}}let od=null;function W5(t){return!sv(t)||t.length<2?t:TR(t)}function ER(){if(od)return od;const t=[];t.push(new En("bucket")),t.push(new En("generation")),t.push(new En("metageneration")),t.push(new En("name","fullPath",!0));function e(a,u){return W5(u)}const n=new En("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const r=new En("size");return r.xform=i,t.push(r),t.push(new En("timeCreated")),t.push(new En("updated")),t.push(new En("md5Hash",null,!0)),t.push(new En("cacheControl",null,!0)),t.push(new En("contentDisposition",null,!0)),t.push(new En("contentEncoding",null,!0)),t.push(new En("contentLanguage",null,!0)),t.push(new En("contentType",null,!0)),t.push(new En("metadata","customMetadata",!0)),od=t,od}function X5(t,e){function n(){const i=t.bucket,r=t.fullPath,a=new Fn(i,r);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function j5(t,e,n){const i={};i.type="file";const r=n.length;for(let a=0;a<r;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return X5(i,t),i}function CR(t,e,n){const i=_R(e);return i===null?null:j5(t,i,n)}function Z5(t,e,n,i){const r=_R(e);if(r===null||!sv(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=t.bucket,E=t.fullPath,C="/b/"+u(v)+"/o/"+u(E),w=av(C,n,i),I=pR({alt:"media",token:m});return w+I})[0]}function e8(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class SR{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(!t)throw rv()}function t8(t,e){function n(i,r){const a=CR(t,r,e);return AR(a!==null),a}return n}function n8(t,e){function n(i,r){const a=CR(t,r,e);return AR(a!==null),Z5(a,r,t.host,t._protocol)}return n}function xR(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=p5():r=m5():n.getStatus()===402?r=h5(t.bucket):n.getStatus()===403?r=g5(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function i8(t){const e=xR(t);function n(i,r){let a=e(i,r);return i.getStatus()===404&&(a=d5(t.path)),a.serverResponse=r.serverResponse,a}return n}function r8(t,e,n){const i=e.fullServerUrl(),r=av(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,h=new SR(r,a,n8(t,n),u);return h.errorHandler=i8(e),h}function s8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function o8(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=s8(null,e)),i}function a8(t,e,n,i,r){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let G="";for(let ee=0;ee<2;ee++)G=G+Math.random().toString().slice(2);return G}const p=h();u["Content-Type"]="multipart/related; boundary="+p;const m=o8(e,i,r),v=e8(m,n),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,C=`\r
--`+p+"--",w=hs.getBlob(E,i,C);if(w===null)throw C5();const I={name:m.fullPath},D=av(a,t.host,t._protocol),V="POST",H=t.maxUploadRetryTime,z=new SR(D,V,t8(t,n),H);return z.urlParams=I,z.headers=u,z.body=w.uploadData(),z.errorHandler=xR(e),z}class l8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,a){if(this.sent_)throw Nu("cannot .send() more than once");if(bs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class u8 extends l8{initXhr(){this.xhr_.responseType="text"}}function wR(){return new u8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this._service=e,n instanceof Fn?this._location=n:this._location=Fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ko(e,n)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TR(this._location.path)}get storage(){return this._service}get parent(){const e=Y5(this._location.path);if(e===null)return null;const n=new Fn(this._location.bucket,e);return new ko(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x5(e)}}function c8(t,e,n){t._throwIfRoot("uploadBytes");const i=a8(t.storage,t._location,ER(),new hs(e,!0),n);return t.storage.makeRequestWithTokens(i,wR).then(r=>({metadata:r,ref:t}))}function f8(t){t._throwIfRoot("getDownloadURL");const e=r8(t.storage,t._location,ER());return t.storage.makeRequestWithTokens(e,wR).then(n=>{if(n===null)throw S5();return n})}function d8(t,e){const n=J5(t._location.path,e),i=new Fn(t._location.bucket,n);return new ko(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(t){return/^[A-Za-z]+:\/\//.test(t)}function m8(t,e){return new ko(t,e)}function RR(t,e){if(t instanceof lv){const n=t;if(n._bucket==null)throw E5();const i=new ko(n,n._bucket);return e!=null?RR(i,e):i}else return e!==void 0?d8(t,e):t}function p8(t,e){if(e&&h8(e)){if(t instanceof lv)return m8(t,e);throw Yg("To use ref(service, url), the first argument must be a Storage instance.")}else return RR(t,e)}function $S(t,e){const n=e==null?void 0:e[hR];return n==null?null:Fn.makeFromBucketSpec(n,t)}function g8(t,e,n,i={}){t.host=`${e}:${n}`;const r=bs(e);r&&(iy(`https://${t.host}/b`),ry("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:yA(a,t.app.options.projectId))}class lv{constructor(e,n,i,r,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=dR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=c5,this._maxUploadRetryTime=f5,this._requests=new Set,r!=null?this._bucket=Fn.makeFromBucketSpec(r,this._host):this._bucket=$S(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=$S(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ko(this,e)}_makeRequest(e,n,i,r,a=!0){if(this._deleted)return new w5(mR());{const u=U5(e,this._appId,i,r,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const KS="@firebase/storage",YS="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="storage";function y8(t,e,n){return t=Mt(t),c8(t,e,n)}function v8(t){return t=Mt(t),f8(t)}function _8(t,e){return t=Mt(t),p8(t,e)}function T8(t=ay(),e){t=Mt(t);const i=eh(t,IR).getImmediate({identifier:e}),r=mA("storage");return r&&E8(i,...r),i}function E8(t,e,n,i={}){g8(t,e,n,i)}function C8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new lv(n,i,r,e,Vo)}function S8(){Ao(new Es(IR,C8,"PUBLIC").setMultipleInstances(!0)),Li(KS,YS,""),Li(KS,YS,"esm2017")}S8();const sn=[];for(let t=0;t<256;++t)sn.push((t+256).toString(16).slice(1));function A8(t,e=0){return(sn[t[e+0]]+sn[t[e+1]]+sn[t[e+2]]+sn[t[e+3]]+"-"+sn[t[e+4]]+sn[t[e+5]]+"-"+sn[t[e+6]]+sn[t[e+7]]+"-"+sn[t[e+8]]+sn[t[e+9]]+"-"+sn[t[e+10]]+sn[t[e+11]]+sn[t[e+12]]+sn[t[e+13]]+sn[t[e+14]]+sn[t[e+15]]).toLowerCase()}let Xp;const x8=new Uint8Array(16);function w8(){if(!Xp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xp=crypto.getRandomValues.bind(crypto)}return Xp(x8)}const R8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JS={randomUUID:R8};function I8(t,e,n){var r;if(JS.randomUUID&&!t)return JS.randomUUID();t=t||{};const i=t.random??((r=t.rng)==null?void 0:r.call(t))??w8();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,A8(i)}const b8=T8(),N8=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState(!0),[r,a]=Y.useState(null),[u,h]=Y.useState(!1),[p,m]=Y.useState(""),[v,E]=Y.useState([]),C={name:"",description:"",price:0,category:"",imageUrls:[],stock:0,isActive:!0},[w,I]=Y.useState(C);Y.useEffect(()=>{D()},[]);const D=async()=>{try{i(!0);const G=await zS.getAllProducts();e(G)}catch(G){console.error("載入產品資料失敗:",G),alert("載入產品資料失敗")}finally{i(!1)}},V=G=>{if(G.target.files){const ee=Array.from(G.target.files).slice(0,3);E(ee)}},H=async()=>{const G=[];for(const ee of v){const ne=_8(b8,`products/${I8()}`);await y8(ne,ee);const fe=await v8(ne);G.push(fe)}return G},z=async()=>{if(!w.name||!w.price){alert("請填寫產品名稱和價格");return}try{const G=await H(),ee={...w,imageUrls:G};await zS.createProduct(ee),await D(),I(C),E([]),h(!1),alert("產品新增成功")}catch(G){console.error("新增產品失敗:",G),alert("新增產品失敗")}};return t.filter(G=>G.name.toLowerCase().includes(p.toLowerCase())||G.category.toLowerCase().includes(p.toLowerCase())),n?S.jsx("div",{className:"admin-loading",children:"載入中..."}):S.jsx("div",{className:"admin-page",children:u&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h2",{children:"新增產品"}),S.jsx("button",{onClick:()=>{h(!1),I(C)},className:"modal-close",children:"×"})]}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"產品名稱 *"}),S.jsx("input",{type:"text",value:w.name,onChange:G=>I({...w,name:G.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"分類"}),S.jsx("input",{type:"text",value:w.category,onChange:G=>I({...w,category:G.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"價格 *"}),S.jsx("input",{type:"number",value:w.price,onChange:G=>I({...w,price:parseInt(G.target.value)})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"描述"}),S.jsx("textarea",{value:w.description,onChange:G=>I({...w,description:G.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"上傳圖片（最多三張）"}),S.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:V})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"庫存"}),S.jsx("input",{type:"number",value:w.stock,onChange:G=>I({...w,stock:parseInt(G.target.value)})})]}),S.jsx("div",{className:"form-group",children:S.jsxs("label",{children:[S.jsx("input",{type:"checkbox",checked:w.isActive,onChange:G=>I({...w,isActive:G.target.checked})}),"上架此產品"]})})]}),S.jsxs("div",{className:"modal-footer",children:[S.jsx("button",{onClick:()=>{h(!1),I(C)},className:"btn btn-cancel",children:"取消"}),S.jsx("button",{onClick:z,className:"btn btn-save",children:"儲存"})]})]})})})},M8=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState(!0),[r,a]=Y.useState(null),[u,h]=Y.useState("");Y.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const C=await Jp.getAllMembers();e(C)}catch(C){console.error("載入會員資料失敗:",C),alert("載入會員資料失敗")}finally{i(!1)}},m=async(C,w)=>{try{await Jp.updateMember(C,w),await p(),a(null),alert("會員資料更新成功")}catch(I){console.error("更新會員資料失敗:",I),alert("更新會員資料失敗")}},v=async(C,w)=>{if(window.confirm(`確定要刪除會員「${w}」嗎？`))try{await Jp.deleteMember(C),await p(),alert("會員刪除成功")}catch(I){console.error("刪除會員失敗:",I),alert("刪除會員失敗")}},E=t.filter(C=>C.name.toLowerCase().includes(u.toLowerCase())||C.email.toLowerCase().includes(u.toLowerCase()));return n?S.jsx("div",{className:"admin-loading",children:"載入中..."}):S.jsxs("div",{className:"admin-page",children:[S.jsxs("div",{className:"admin-header",children:[S.jsx("h1",{children:"會員管理"}),S.jsxs("div",{className:"admin-stats",children:[S.jsxs("div",{className:"stat-card",children:[S.jsx("h3",{children:"總會員數"}),S.jsx("p",{className:"stat-number",children:t.length})]}),S.jsxs("div",{className:"stat-card",children:[S.jsx("h3",{children:"活躍會員"}),S.jsx("p",{className:"stat-number",children:t.filter(C=>C.isActive).length})]})]})]}),S.jsxs("div",{className:"admin-controls",children:[S.jsx("div",{className:"search-box",children:S.jsx("input",{type:"text",placeholder:"搜尋會員姓名或信箱...",value:u,onChange:C=>h(C.target.value),className:"search-input"})}),S.jsx("button",{onClick:p,className:"btn btn-refresh",children:"重新載入"})]}),S.jsx("div",{className:"admin-table-container",children:S.jsxs("table",{className:"admin-table",children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"姓名"}),S.jsx("th",{children:"信箱"}),S.jsx("th",{children:"電話"}),S.jsx("th",{children:"地址"}),S.jsx("th",{children:"註冊時間"}),S.jsx("th",{children:"狀態"}),S.jsx("th",{children:"操作"})]})}),S.jsx("tbody",{children:E.map(C=>{var w;return S.jsxs("tr",{children:[S.jsx("td",{children:C.name}),S.jsx("td",{children:C.email}),S.jsx("td",{children:C.phone||"未提供"}),S.jsx("td",{children:C.address||"未提供"}),S.jsx("td",{children:(w=C.createdAt)==null?void 0:w.toDate().toLocaleDateString()}),S.jsx("td",{children:S.jsx("span",{className:`status ${C.isActive?"active":"inactive"}`,children:C.isActive?"活躍":"停用"})}),S.jsx("td",{children:S.jsxs("div",{className:"action-buttons",children:[S.jsx("button",{onClick:()=>a(C),className:"btn btn-edit",children:"編輯"}),S.jsx("button",{onClick:()=>m(C.id,{isActive:!C.isActive}),className:`btn ${C.isActive?"btn-disable":"btn-enable"}`,children:C.isActive?"停用":"啟用"}),S.jsx("button",{onClick:()=>v(C.id,C.name),className:"btn btn-delete",children:"刪除"})]})})]},C.id)})})]})}),r&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h2",{children:"編輯會員資料"}),S.jsx("button",{onClick:()=>a(null),className:"modal-close",children:"×"})]}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"姓名"}),S.jsx("input",{type:"text",value:r.name,onChange:C=>a({...r,name:C.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"信箱"}),S.jsx("input",{type:"email",value:r.email,onChange:C=>a({...r,email:C.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"電話"}),S.jsx("input",{type:"text",value:r.phone||"",onChange:C=>a({...r,phone:C.target.value})})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{children:"地址"}),S.jsx("textarea",{value:r.address||"",onChange:C=>a({...r,address:C.target.value})})]})]}),S.jsxs("div",{className:"modal-footer",children:[S.jsx("button",{onClick:()=>a(null),className:"btn btn-cancel",children:"取消"}),S.jsx("button",{onClick:()=>m(r.id,r),className:"btn btn-save",children:"儲存"})]})]})}),S.jsx("style",{jsx:!0,children:`
        .admin-page {
          padding: 20px;
          max-width: 1200px;
          margin: 0 auto;
        }

        .admin-header {
          margin-bottom: 30px;
        }

        .admin-header h1 {
          color: #333;
          margin-bottom: 20px;
        }

        .admin-stats {
          display: flex;
          gap: 20px;
          margin-bottom: 20px;
        }

        .stat-card {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 8px;
          text-align: center;
          min-width: 120px;
        }

        .stat-card h3 {
          margin: 0 0 10px 0;
          color: #666;
          font-size: 14px;
        }

        .stat-number {
          margin: 0;
          font-size: 24px;
          font-weight: bold;
          color: #007bff;
        }

        .admin-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .search-input {
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          width: 300px;
        }

        .admin-table-container {
          overflow-x: auto;
        }

        .admin-table {
          width: 100%;
          border-collapse: collapse;
          background: white;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .admin-table th,
        .admin-table td {
          padding: 12px;
          text-align: left;
          border-bottom: 1px solid #eee;
        }

        .admin-table th {
          background: #f8f9fa;
          font-weight: 600;
          color: #333;
        }

        .status {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }

        .status.active {
          background: #d4edda;
          color: #155724;
        }

        .status.inactive {
          background: #f8d7da;
          color: #721c24;
        }

        .action-buttons {
          display: flex;
          gap: 8px;
        }

        .btn {
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.2s;
        }

        .btn-edit {
          background: #007bff;
          color: white;
        }

        .btn-enable {
          background: #28a745;
          color: white;
        }

        .btn-disable {
          background: #ffc107;
          color: #212529;
        }

        .btn-delete {
          background: #dc3545;
          color: white;
        }

        .btn-refresh {
          background: #6c757d;
          color: white;
          padding: 10px 20px;
        }

        .btn:hover {
          opacity: 0.8;
          transform: translateY(-1px);
        }

        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0,0,0,0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
        }

        .modal {
          background: white;
          border-radius: 8px;
          width: 90%;
          max-width: 500px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .modal-header {
          padding: 20px;
          border-bottom: 1px solid #eee;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .modal-header h2 {
          margin: 0;
          color: #333;
        }

        .modal-close {
          background: none;
          border: none;
          font-size: 24px;
          cursor: pointer;
          color: #999;
        }

        .modal-body {
          padding: 20px;
        }

        .form-group {
          margin-bottom: 20px;
        }

        .form-group label {
          display: block;
          margin-bottom: 5px;
          font-weight: 500;
          color: #333;
        }

        .form-group input,
        .form-group textarea {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        }

        .form-group textarea {
          height: 80px;
          resize: vertical;
        }

        .modal-footer {
          padding: 20px;
          border-top: 1px solid #eee;
          display: flex;
          justify-content: flex-end;
          gap: 10px;
        }

        .btn-cancel {
          background: #6c757d;
          color: white;
          padding: 10px 20px;
        }

        .btn-save {
          background: #007bff;
          color: white;
          padding: 10px 20px;
        }

        .admin-loading {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 200px;
          font-size: 18px;
          color: #666;
        }
      `})]})},D8=()=>{const[t,e]=Y.useState([]);return Y.useEffect(()=>{(async()=>{const r=(await oc(Eo(li,"orders"))).docs.map(a=>({id:a.id,...a.data()}));e(r)})()},[]),S.jsxs("div",{children:[S.jsx("h2",{children:"訂單管理"}),S.jsx("ul",{children:t.map(n=>S.jsxs("li",{children:["訂單編號: ",n.id," - 用戶: ",n.userId," - 金額: ",n.totalPrice," - 狀態: ",n.status]},n.id))})]})},Mu=({user:t,children:e})=>{const n=Ir();return t?S.jsx(S.Fragment,{children:e}):S.jsx(tN,{to:"/login",state:{from:n},replace:!0})},P8=()=>S.jsxs("div",{style:{padding:"2rem"},children:[S.jsx("h2",{children:"請先登入才能進入後台"}),S.jsx("p",{children:"你可以點右上角登入後再返回後台～"})]}),k8=()=>{const t=jg(),[e,n]=Y.useState(null),[i,r]=Y.useState([]),[a,u]=Y.useState(!1),[h,p]=Y.useState(!1),[m,v]=Y.useState(null),[E,C]=Y.useState(null),[w,I]=Y.useState(!0);Y.useEffect(()=>{const N=_D(Ig,P=>{v(P?{uid:P.uid,email:P.email||"",name:P.displayName||P.email||"User"}:null),I(!1)});return()=>N()},[]),Y.useEffect(()=>{if(E){const N=setTimeout(()=>C(null),3e3);return()=>clearTimeout(N)}},[E]);const D=(N,P)=>{r(O=>O.find(L=>L.id===N.id)?O.map(L=>L.id===N.id?{...L,quantity:L.quantity+P}:L):[...O,{...N,quantity:P}]),n(null),C(`${N.name} 已成功加入購物車！`),u(!0)},V=(N,P)=>{r(O=>O.map(q=>q.id===N?{...q,quantity:P}:q).filter(q=>q.quantity>0))},H=N=>{r(P=>P.filter(O=>O.id!==N))},z=()=>{m?(u(!1),t("/checkout")):(u(!1),p(!0))},G=N=>{v(N),p(!1)},ee=N=>{v(N),p(!1)},ne=()=>{v(null)},fe=()=>{n(null)},U=()=>{alert(`感謝 ${m==null?void 0:m.name}！您的訂單已成功提交，我們會盡快處理。`),r([]),t("/")},M=i.reduce((N,P)=>N+P.quantity,0);return w?S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontSize:"24px",color:"#666"},children:"Loading authentication status..."}):S.jsxs(S.Fragment,{children:[S.jsx(ZV,{cartCount:M,currentUser:m,onCartClick:()=>u(!0),onUserClick:()=>p(!0),onLogout:ne}),S.jsxs(iN,{children:[S.jsx(as,{path:"/",element:S.jsxs(S.Fragment,{children:[S.jsxs("main",{children:[S.jsx(eL,{}),S.jsx(tL,{}),S.jsx(nL,{}),S.jsx(sL,{onProductSelect:n}),S.jsx(oL,{}),S.jsx(e5,{})]}),S.jsx(t5,{})]})}),S.jsx(as,{path:"/login",element:S.jsx(P8,{})}),S.jsx(as,{path:"/checkout",element:S.jsx(Mu,{user:m,children:S.jsx(l5,{user:m,cartItems:i,onPlaceOrder:U,onClose:()=>t("/")})})}),S.jsx(as,{path:"/admin",element:S.jsx(Mu,{user:m,children:S.jsx(u5,{})})}),S.jsx(as,{path:"/admin/products",element:S.jsx(Mu,{user:m,children:S.jsx(N8,{})})}),S.jsx(as,{path:"/admin/members",element:S.jsx(Mu,{user:m,children:S.jsx(M8,{})})}),S.jsx(as,{path:"/admin/orders",element:S.jsx(Mu,{user:m,children:S.jsx(D8,{})})})]}),e&&S.jsx(i5,{product:e,onClose:fe,onAddToCart:D}),S.jsx(r5,{isOpen:a,items:i,onClose:()=>u(!1),onUpdateQuantity:V,onRemoveItem:H,onCheckout:z}),h&&S.jsx(s5,{onClose:()=>p(!1),onLogin:G,onRegister:ee}),E&&S.jsx(o5,{message:E})]})},V8=()=>S.jsx(RN,{children:S.jsx(k8,{})}),bR=document.getElementById("root");if(!bR)throw new Error("Could not find root element to mount to");const L8=fb.createRoot(bR);L8.render(S.jsx(ib.StrictMode,{children:S.jsx(V8,{})}));
